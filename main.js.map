{"version":3,"file":"main.js","mappings":"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","sources":["webpack://@flowda-projects/v1-sdk-api/./src/app/app.controller.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appJwt.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appJwtAuth.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appJwtAuthV4.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appJwtV4.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appLocal.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appLocalAuth.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appLocalAuthV4.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/app/appLocalV4.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customer.controller.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerAppCombined.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerAppCombinedAuth.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerJwt.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerJwtAuth.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerLocal.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerWeiXin.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerWeiXinAuth.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerWeiXinAuthV4.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/customerWeiXinV4.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/fwhLoginSimple.guard.ts","webpack://@flowda-projects/v1-sdk-api/./src/customer/fwhLoginSimple.strategy.ts","webpack://@flowda-projects/v1-sdk-api/./src/loadModule.ts","webpack://@flowda-projects/v1-sdk-api/./src/main.ts","webpack://@flowda-projects/v1-sdk-api/./src/order/order.controller.ts","webpack://@flowda-projects/v1-sdk-api/./src/product/product.controller.ts","webpack://@flowda-projects/v1-sdk-api/./src/sdk/sdk.module.ts","webpack://@flowda-projects/v1-sdk-api/./src/sdk/transform.interceptor.ts","webpack://@flowda-projects/v1-sdk-api/./src/services/services.module.ts","webpack://@flowda-projects/v1-sdk-api/./src/trpc/trpc.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared-node/src/assist/audit.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared-node/src/assist/table-filter.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared-node/src/filters/appExceptionFilter.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared-node/src/flowdaSharedNode.module.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared-node/src/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/flowdaShared.module.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/interfaces/schema.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/interfaces/types.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/data/data.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/schema/dynamicTableSchemaTransformer.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/schema/meta.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/schema/prismaSchema.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/schema/prismaUtils.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/schema/schema.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/services/schema/schemaTransformer.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/symbols.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/utils/bindService.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/utils/browser-log-utils.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/utils/getServices.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/flowda-shared/src/utils/matchPath.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/config/config.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/flowdaInfra.module.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/interfaces/config/config.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/interfaces/mail/mail.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/mail/mail.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/mail/templates/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/mail/templates/license/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/mail/templates/reader/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/infra/prismaClientFlowda.module.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/legacy-libs.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/app/app.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/app/appAuth.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/app/dto/appRegisterRes.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/app/dto/dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/authentication.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/dto/generateRecoveryCode.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/dto/resetPassword.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/dto/signup.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/dto/supperAdminSignup.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/superAdminAuthentication.query.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/superAdminAuthentication.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/authentication/superAdminAuthentication.tx.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer-auth/customerAuth.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer-auth/dto/customerEmailSignup.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer-auth/dto/customerPreSignup.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer-auth/dto/customerSignup.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer/customer.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer/customer.tx.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/customer/dto/customerUpdateAmount.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/flowdaServices.module.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/identity-provider/appIdentityProvider.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/identity-provider/customerIdentityProvider.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/identity-provider/tenantIdentityProvider.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/jwt/jwt.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/dto/sdkCreateOrder.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/dto/sdkCreateOrderInJSAPI.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/dto/sdkCreateOrderInJSAPIRes.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/dto/sdkCreateOrderRes.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/dto/sdkCreateQuickOrder.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/order.query.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/order.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/order/order.tx.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/product/dto/sdkProductCreateManyItem.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/product/product.query.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/product/product.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/product/product.tx.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/schema/schema.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/tenant/dto/tenantEmailSignup.dto.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/tenant/tenant.query.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/tenant/tenantAuth.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/wx-login/wxFwhLogin.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/wx-login/wxLogin.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/services/wx-pay/wxPay.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/shared-web/appExceptionFilter.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/utils/dayjs.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/utils/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-services/src/utils/isCuid.decorator.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-types/src/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-types/src/interfaces/identity-provider/identityProvider.service.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-types/src/lib/errors.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-types/src/lib/plan.type.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/flowda-types/src/lib/prisma.type.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/prisma-flowda/src/index.ts","webpack://@flowda-projects/v1-sdk-api/../../../libs/v1/prisma-flowda/src/zod/index.ts","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@anatine/zod-openapi\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@nestjs/common\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@nestjs/core\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@nestjs/passport\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@nestjs/swagger\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@prisma/client-v1-flowda\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"@trpc/client\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"axios\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"bcrypt\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"class-validator\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"class-validator-jsonschema\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"cos-nodejs-sdk-v5\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"cuid\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"dayjs\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"dayjs/plugin/advancedFormat\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"dayjs/plugin/timezone\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"dayjs/plugin/utc\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"dotenv\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"envalid\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"inversify\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"jsonwebtoken\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"keymachine\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"lodash\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"nestjs-zod\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"nodemailer\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"passport-custom\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"passport-jwt\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"passport-local\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"pluralize\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"radash\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"rxjs/operators\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"tslib\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"wechat-oauth\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"wechatpay-node-v3\"","webpack://@flowda-projects/v1-sdk-api/external commonjs \"zod\"","webpack://@flowda-projects/v1-sdk-api/webpack/bootstrap","webpack://@flowda-projects/v1-sdk-api/webpack/before-startup","webpack://@flowda-projects/v1-sdk-api/webpack/startup","webpack://@flowda-projects/v1-sdk-api/webpack/after-startup"],"sourcesContent":["import { Body, Controller, Headers, HttpCode, Post, Req, UseGuards, Version, VERSION_NEUTRAL } from '@nestjs/common'\nimport { AppAuthService } from '@flowda-projects/v1-flowda-services'\nimport { AppLocalAuthGuard } from './appLocalAuth.guard'\nimport { AppLocalAuthV4Guard } from './appLocalAuthV4.guard'\n\n@Controller({\n  path: 'sdk/app',\n})\nexport class AppController {\n  constructor(private appAuth: AppAuthService) {}\n\n  @Version(VERSION_NEUTRAL)\n  @Post('create')\n  async create(@Body() dto) {\n    return this.appAuth.create(dto)\n  }\n\n  @Version([VERSION_NEUTRAL, '1'])\n  @UseGuards(AppLocalAuthGuard)\n  @Post('verify')\n  @HttpCode(200)\n  verify(@Req() req: any) {\n    // 返回 at rt，客户端负责存储策略\n    return req.user\n  }\n\n  @Version('4')\n  @UseGuards(AppLocalAuthV4Guard)\n  @Post('verify')\n  @HttpCode(200)\n  verifyV4(@Req() req: any) {\n    return req.user\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @Post('refreshToken')\n  @HttpCode(200)\n  refreshToken(@Headers('Refresh') rt: string) {\n    return this.appAuth.appRefreshToken(rt)\n  }\n}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { ExtractJwt, Strategy } from 'passport-jwt'\nimport { Injectable } from '@nestjs/common'\nimport { AppAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class AppJwtStrategy extends PassportStrategy(Strategy, 'appJwt') {\n  constructor(private service: AppAuthService) {\n    const at = ExtractJwt.fromAuthHeaderAsBearerToken()\n    super({\n      jwtFromRequest: at,\n      ignoreExpiration: false,\n      secretOrKey: service.getAccessTokenSecret(),\n    })\n  }\n\n  async validate(payload: any) {\n    return this.service.getUser(payload.uid)\n  }\n}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class AppJwtAuthGuard extends AuthGuard('appJwt') {}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class AppJwtAuthV4Guard extends AuthGuard('appJwtV4') {}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { ExtractJwt, Strategy } from 'passport-jwt'\nimport { Injectable, Logger } from '@nestjs/common'\nimport { AppAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class AppJwtV4Strategy extends PassportStrategy(Strategy, 'appJwtV4') {\n  private readonly logger = new Logger(AppJwtV4Strategy.name)\n\n  constructor(private service: AppAuthService) {\n    const at = ExtractJwt.fromAuthHeaderAsBearerToken()\n    super({\n      jwtFromRequest: at,\n      ignoreExpiration: false,\n      secretOrKey: service.getAccessTokenSecret(),\n    })\n  }\n\n  async validate(payload: any) {\n    this.logger.debug!(`[validate] payload, ${JSON.stringify(payload)}`)\n    const app = await this.service.getUserV4(payload.uid)\n    this.logger.debug!(`[validate] app, ${JSON.stringify(app)}`)\n    return app\n  }\n}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-local'\nimport { Injectable, Logger, UnauthorizedException } from '@nestjs/common'\nimport { AppAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class AppLocalAuthStrategy extends PassportStrategy(Strategy, 'appLocal') {\n  private readonly logger = new Logger(AppLocalAuthStrategy.name)\n  constructor(private authService: AppAuthService) {\n    super({\n      usernameField: 'appId',\n      passwordField: 'appToken',\n    })\n  }\n\n  // username,password 也是默认从 request 里取\n  async validate(appId: string, appToken: string): Promise<any> {\n    this.logger.debug!('validate')\n    const tokens = await this.authService.validate(appId, appToken)\n    if (!tokens) {\n      throw new UnauthorizedException()\n    }\n    return tokens // 会附着到 request.user（这是 passport 做的）\n  }\n}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class AppLocalAuthGuard extends AuthGuard('appLocal') {}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class AppLocalAuthV4Guard extends AuthGuard('appLocalV4') {}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-local'\nimport { Injectable, Logger, UnauthorizedException } from '@nestjs/common'\nimport { AppAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class AppLocalAuthV4Strategy extends PassportStrategy(Strategy, 'appLocalV4') {\n  private readonly logger = new Logger(AppLocalAuthV4Strategy.name)\n\n  constructor(private authService: AppAuthService) {\n    super({\n      usernameField: 'appId',\n      passwordField: 'appToken',\n    })\n  }\n\n  async validate(appId: string, appToken: string): Promise<any> {\n    this.logger.debug!('validate')\n    const tokens = await this.authService.validateV4(appId, appToken)\n    if (!tokens) {\n      throw new UnauthorizedException()\n    }\n    return tokens\n  }\n}\n","import {\n  Body,\n  Controller,\n  Get,\n  Headers,\n  HttpCode,\n  Logger,\n  Post,\n  Req,\n  Request,\n  UseGuards,\n  Version,\n  VERSION_NEUTRAL,\n} from '@nestjs/common'\nimport {\n  CustomerAuthService,\n  CustomerEmailSignupDto,\n  customerPreSignupDto,\n  CustomerTx,\n  CustomerUpdateAmountDto,\n  GenerateRecoveryCodeDto,\n  ResetPasswordDto,\n} from '@flowda-projects/v1-flowda-services'\nimport { AppJwtAuthGuard } from '../app/appJwtAuth.guard'\nimport { CustomerJwtAuthGuard } from './customerJwtAuth.guard'\nimport { CustomerWeiXinAuthGuard } from './customerWeiXinAuth.guard'\nimport { FwhLoginSimpleGuard } from './fwhLoginSimple.guard'\nimport { CustomerAppCombinedAuthGuard } from './customerAppCombinedAuth.guard'\nimport { AppJwtAuthV4Guard } from '../app/appJwtAuthV4.guard'\nimport { CustomerWeiXinAuthV4Guard } from './customerWeiXinAuthV4.guard'\n\n@Controller('sdk/customer')\nexport class CustomerController {\n  private readonly logger = new Logger('CustomerController')\n\n  constructor(private customerAuth: CustomerAuthService, private customerTx: CustomerTx) {}\n\n  /**\n   * 注册用户，必须确保 app 已经 verify (SdkAppJwtAuthGuard)\n   * 验证方法是 bearer token 带 app 相关的 access token\n   */\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Post('preSignup')\n  preSignup(@Req() req, @Body() dto: Omit<customerPreSignupDto, 'appId'>) {\n    this.logger.log('pre sign up: ', dto)\n    return this.customerAuth.preSignup({\n      email: dto.email,\n      appId: req.user.id,\n    })\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Post('signup')\n  signup(@Req() req, @Body() dto: Omit<CustomerEmailSignupDto, 'appId'>) {\n    this.logger.log('sign up: ', dto)\n    return this.customerAuth.verifyAndSignup({\n      ...dto,\n      appId: req.user.id,\n    })\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard, CustomerAppCombinedAuthGuard)\n  @Post('login')\n  @HttpCode(200)\n  login(@Request() req) {\n    return req.user\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @Post('refreshToken')\n  @HttpCode(200)\n  refreshToken(@Headers('Refresh') rt: string) {\n    return this.customerAuth.refreshToken(rt)\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Post('logout')\n  @HttpCode(200)\n  async logout(@Request() req) {\n    await this.customerAuth.logoutApi(req.user.id)\n    return {\n      success: true,\n    }\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Post('generateRecoveryCode')\n  @HttpCode(200)\n  async generateRecoveryCode(@Request() req, @Body() dto: Omit<GenerateRecoveryCodeDto, 'appId'>) {\n    const appId = req.user.id\n    this.logger.debug('get appId from request after guard: ', appId)\n    return this.customerAuth.generateRecoveryCode({\n      ...dto,\n      appId,\n    })\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Post('resetPassword')\n  @HttpCode(200)\n  async resetPassword(@Request() req, @Body() dto: Omit<ResetPasswordDto, 'appId'>) {\n    const appId = req.user.id\n    this.logger.debug('reset pw and get appId from request after guard: ', appId)\n    await this.customerAuth.resetPassword({\n      ...dto,\n      appId,\n    })\n    return {\n      success: true,\n    }\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Get()\n  async query(@Req() req) {\n    return req.user\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Post('amount')\n  async updateAmount(@Req() req, @Body() dto: CustomerUpdateAmountDto) {\n    try {\n      const updated = await this.customerTx.amountUpdate({\n        userInfo: req.user,\n        action: dto.action,\n        count: dto.count,\n      })\n      return updated\n    } catch (error) {\n      console.error('user amount update failed: ', error)\n      return {\n        success: false,\n        message: error?.message,\n      }\n    }\n  }\n\n  @Version([VERSION_NEUTRAL, '1'])\n  @UseGuards(AppJwtAuthGuard, CustomerWeiXinAuthGuard)\n  @Post('weixin/login')\n  async getWXAccessToken(@Req() req) {\n    return req.user\n  }\n\n  @Version('4')\n  @UseGuards(AppJwtAuthV4Guard, CustomerWeiXinAuthV4Guard)\n  @Post('weixin/login')\n  async getWXAccessTokenV4(@Req() req) {\n    return req.user\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard, FwhLoginSimpleGuard)\n  @Post('weixin/fwhLoginMerge')\n  async getFwhAccessToken(@Req() req, @Body() dto) {\n    const appId = req.user.appId\n    this.logger.debug('fwh login merge with appId: ', appId)\n    return this.customerAuth.fwhLoginMerge(dto.code, appId)\n  }\n\n  /*\n  https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx16aa373d85f92806&redirect_uri=https%3A%2F%2Fpay.freecharger.cn%2Fwx-h5-login-debug&response_type=code&scope=snsapi_userinfo&state=123#wechat_redirect\n   */\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard, FwhLoginSimpleGuard)\n  @Post('weixin/fwhLogin')\n  async fwhLogin(@Req() req, @Body() dto) {\n    const appId = req.user.appId\n    this.logger.debug('fwh login with appId: ', appId)\n    return this.customerAuth.fwhLogin(dto.code, appId)\n  }\n}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-custom'\nimport { Injectable, UnauthorizedException, Logger } from '@nestjs/common'\nimport { CustomerAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class CustomerAppCombinedStrategy extends PassportStrategy(Strategy, 'customerAppCombined') {\n  private readonly logger = new Logger('CustomerAppCombinedStrategy')\n  constructor(private customerAuth: CustomerAuthService) {\n    super()\n  }\n\n  async validate(request: Request): Promise<any> {\n    this.logger.log('Customer App Combined Strategy guard: ', (request.body as any)?.email, (request as any).user)\n    const body: any = request.body\n    const appId = (request as any).user.id\n    const user = await this.customerAuth.validateUserReturnTokens('email', appId, body?.email, body?.password)\n    if (!user) {\n      throw new UnauthorizedException()\n    }\n    return user\n  }\n}\n","import { Injectable } from '@nestjs/common'\nimport { AuthGuard } from '@nestjs/passport'\n\n@Injectable()\nexport class CustomerAppCombinedAuthGuard extends AuthGuard('customerAppCombined') {}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { ExtractJwt, Strategy } from 'passport-jwt'\nimport { Injectable } from '@nestjs/common'\nimport { CustomerAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class CustomerJwtStrategy extends PassportStrategy(Strategy, 'customerJwt') {\n  constructor(private service: CustomerAuthService) {\n    super({\n      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),\n      ignoreExpiration: false,\n      secretOrKey: service.getAccessTokenSecret(),\n    })\n  }\n\n  async validate(payload: any) {\n    return this.service.getUser(payload.uid)\n  }\n}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class CustomerJwtAuthGuard extends AuthGuard('customerJwt') {}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-local'\nimport { Injectable, UnauthorizedException } from '@nestjs/common'\nimport { CustomerAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class CustomerLocalStrategy extends PassportStrategy(Strategy, 'customerLocal') {\n  constructor(private authService: CustomerAuthService) {\n    super({\n      usernameField: 'email',\n    })\n  }\n\n  async validate(email: string, password: string): Promise<any> {\n    const user = this.authService.validateUserReturnTokens('email', email, password)\n    if (!user) {\n      throw new UnauthorizedException()\n    }\n    return user\n  }\n}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-custom'\nimport { Injectable, UnauthorizedException, Logger } from '@nestjs/common'\nimport { CustomerAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class CustomerWeiXinStrategy extends PassportStrategy(Strategy, 'customerWeiXin') {\n  private readonly logger = new Logger('CustomerWeiXinStrategy')\n  constructor(private customerAuth: CustomerAuthService) {\n    super()\n  }\n\n  async validate(request: Request): Promise<any> {\n    const body: any = request.body\n    const appId = (request as any).user?.id\n    this.logger.debug('weixin login stragety with app info: ', (request as any).user)\n    const ret = await this.customerAuth.wxValidateUser(body.code, appId)\n    if (!ret) {\n      throw new UnauthorizedException()\n    }\n    return ret\n  }\n}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class CustomerWeiXinAuthGuard extends AuthGuard('customerWeiXin') {}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class CustomerWeiXinAuthV4Guard extends AuthGuard('customerWeiXinV4') {}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-custom'\nimport { Injectable, UnauthorizedException, Logger } from '@nestjs/common'\nimport { CustomerAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class CustomerWeiXinV4Strategy extends PassportStrategy(Strategy, 'customerWeiXinV4') {\n  private readonly logger = new Logger(CustomerWeiXinV4Strategy.name)\n  constructor(private customerAuth: CustomerAuthService) {\n    super()\n  }\n\n  async validate(request: Request): Promise<any> {\n    const body: any = request.body\n    const appId = (request as any).user?.id\n    this.logger.debug('weixin login stragety with app info: ', (request as any).user)\n    const ret = await this.customerAuth.wxValidateUserV4(body.code, appId)\n    if (!ret) {\n      throw new UnauthorizedException()\n    }\n    return ret\n  }\n}\n","import { AuthGuard } from '@nestjs/passport'\nimport { Injectable } from '@nestjs/common'\n\n@Injectable()\nexport class FwhLoginSimpleGuard extends AuthGuard('fwhLoginSimple') {}\n","import { PassportStrategy } from '@nestjs/passport'\nimport { Strategy } from 'passport-custom'\nimport { Injectable, UnauthorizedException } from '@nestjs/common'\nimport { CustomerAuthService } from '@flowda-projects/v1-flowda-services'\n\n@Injectable()\nexport class FwhLoginSimpleStrategy extends PassportStrategy(Strategy, 'fwhLoginSimple') {\n  constructor(private customerAuth: CustomerAuthService) {\n    super()\n  }\n\n  /**\n   * 简单校验下 state\n   * @param request\n   */\n  async validate(request: Request): Promise<any> {\n    const body: any = request.body\n    const appId = (request as any).user?.id\n    const ret = await this.customerAuth.validateState(body.state)\n    if (!ret) {\n      throw new UnauthorizedException()\n    }\n    return {\n      valid: ret,\n      appId,\n    }\n  }\n}\n","import { interfaces } from 'inversify'\nimport { flowdaInfraModule, flowdaServicesModule, prismaClientFlowdaModule } from '@flowda-projects/v1-flowda-services'\nimport { flowdaSharedModule, FlowdaTrpcClientSymbol } from '@flowda-projects/flowda-shared'\nimport { flowdaSharedNodeModule } from '@flowda-projects/flowda-shared-node'\nimport { CreateTRPCProxyClient } from '@trpc/client'\nimport { AppRouter } from '@flowda-projects/flowda-services-trpc-server'\nimport { trpc } from './trpc/trpc'\nimport { CMS_ADMIN_ENV } from '@flowda-projects/cms-admin-services'\n\nconsole.log('---------- ENV --------------')\nconsole.log('FLOWDA_URL', process.env.FLOWDA_URL)\nconsole.log('---------- ENV --------------')\n\nexport function loadModule(container: interfaces.Container) {\n  container.bind<CreateTRPCProxyClient<AppRouter>>(FlowdaTrpcClientSymbol).toConstantValue(trpc)\n\n  container.load(flowdaSharedModule)\n  container.load(flowdaSharedNodeModule)\n  container.load(prismaClientFlowdaModule)\n  container.load(flowdaInfraModule)\n  container.load(flowdaServicesModule)\n}\n","/**\n * This is not a production server yet!\n * This is only a minimal backend to get started.\n */\n\nimport { INestApplication, Logger, VersioningType } from '@nestjs/common'\nimport { NestFactory } from '@nestjs/core'\n\nimport { SdkModule } from './sdk/sdk.module'\nimport { TransformInterceptor } from './sdk/transform.interceptor'\n\nexport const globalPrefix = 'v1-sdk-api'\n\nexport function setupNestApp(app: INestApplication) {\n  app.setGlobalPrefix(globalPrefix)\n  app.useGlobalInterceptors(new TransformInterceptor())\n}\n\nasync function bootstrap() {\n  const app = await NestFactory.create(SdkModule, { cors: true })\n  setupNestApp(app)\n\n  const port = process.env.PORT || 3341\n  app.enableCors()\n  app.enableVersioning({\n    type: VersioningType.HEADER,\n    header: 'X-Version',\n    /*\n    版本 v1 -> sdk v1-v3\n    版本 v4 -> sdk v4（也就是后端API调过 v2 v3）\n     */\n    // VERSION_NEUTRAL 确保原来的接口不需要填写 X-Version\n    // 不设置 defaultVersion 全部显式在各个 controller + action 设置\n    // defaultVersion: [VERSION_NEUTRAL],\n  })\n  await app.listen(port)\n  Logger.log(`🚀 Application is running on: http://localhost:${port}/${globalPrefix}`)\n}\n\nbootstrap()\n","import { Body, Controller, Get, Post, Query, Req, UseGuards, Logger, Version, VERSION_NEUTRAL } from '@nestjs/common'\nimport {\n  OrderQuery,\n  OrderTx,\n  SdkCreateOrderDto,\n  SdkCreateOrderInJSAPIDto,\n  SdkCreateQuickOrderDto,\n} from '@flowda-projects/v1-flowda-services'\nimport { CustomerJwtAuthGuard } from '../customer/customerJwtAuth.guard'\nimport { AppJwtAuthGuard } from '../app/appJwtAuth.guard'\n\n@Controller('sdk/order')\nexport class OrderController {\n  private readonly logger = new Logger('CustomerController')\n\n  constructor(private orderQuery: OrderQuery, private orderTx: OrderTx) {}\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Post()\n  async create(@Req() req, @Body() dto: SdkCreateOrderDto) {\n    const user = req.user\n    this.logger.log(`creating order controller ${dto.productId} from user: ${JSON.stringify(user)}`)\n    return this.orderTx.create(user, dto)\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Post('createJSAPI')\n  async createJSAPI(@Req() req, @Body() dto: SdkCreateOrderInJSAPIDto) {\n    const user = req.user\n    return this.orderTx.createJSAPI(user, dto)\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Post('quick')\n  async quick(@Req() req, @Body() dto: SdkCreateQuickOrderDto) {\n    const appId = req.user.id\n    return this.orderTx.createQuick(appId, dto)\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Get()\n  query(@Query('orderId') orderId: string) {\n    return this.orderQuery.query(orderId)\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Get('quick/queryPay')\n  queryPayQuick(\n    @Req() req,\n    @Query('anonymousCustomerToken') anonymousCustomerToken: string,\n    @Query('orderId') orderId: string,\n  ) {\n    return this.orderTx.queryPayQuick(anonymousCustomerToken, orderId)\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(CustomerJwtAuthGuard)\n  @Get('queryPay')\n  queryPay(@Req() req, @Query('orderId') orderId: string) {\n    return this.orderTx.queryPay(req.user.id, orderId)\n  }\n}\n","import { Body, Controller, Get, Post, Query, Req, UseGuards, Version, VERSION_NEUTRAL } from '@nestjs/common'\nimport { ProductQuery, ProductTx, SdkProductCreateManyItemDto } from '@flowda-projects/v1-flowda-services'\nimport { AppJwtAuthGuard } from '../app/appJwtAuth.guard'\n\n@Controller('sdk/product')\nexport class ProductController {\n  constructor(private query: ProductQuery, private tx: ProductTx) {}\n\n  /**\n   * todo: 删除，放到后台\n   */\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Post('createMany')\n  async createMany(@Req() req, @Body() dto: SdkProductCreateManyItemDto[]) {\n    const user = req.user\n    const products = await this.tx.createManyProducts(user.id, dto)\n    return {\n      products,\n    }\n  }\n\n  @Version(VERSION_NEUTRAL)\n  @UseGuards(AppJwtAuthGuard)\n  @Get('findAll')\n  async queryAll(@Req() req) {\n    const user = req.user\n    return this.query.findAll(user.id)\n  }\n\n  /**\n   * 不用进行 appId+appToken 鉴权，直接根据 appId（在数据库里是 name 字段） 获取产品列表\n   */\n  @Version(VERSION_NEUTRAL)\n  @Get('findAllByAppId')\n  async queryAllByAppId(@Query('appId') name: string) {\n    return this.query.findAllByAppName(name)\n  }\n}\n","import { Module, ValidationPipe } from '@nestjs/common'\nimport { ServicesModule } from '../services/services.module'\nimport { AppExceptionFilter } from '@flowda-projects/v1-flowda-services'\nimport { APP_FILTER, APP_PIPE } from '@nestjs/core'\nimport { CustomerController } from '../customer/customer.controller'\nimport { AppController } from '../app/app.controller'\nimport { AppLocalAuthStrategy } from '../app/appLocal.strategy'\nimport { AppJwtStrategy } from '../app/appJwt.strategy'\nimport { CustomerLocalStrategy } from '../customer/customerLocal.strategy'\nimport { CustomerJwtStrategy } from '../customer/customerJwt.strategy'\nimport { OrderController } from '../order/order.controller'\nimport { ProductController } from '../product/product.controller'\nimport { CustomerWeiXinStrategy } from '../customer/customerWeiXin.strategy'\nimport { FwhLoginSimpleStrategy } from '../customer/fwhLoginSimple.strategy'\nimport { CustomerAppCombinedStrategy } from '../customer/customerAppCombined.strategy'\nimport { AppLocalAuthV4Strategy } from '../app/appLocalV4.strategy'\nimport { AppJwtV4Strategy } from '../app/appJwtV4.strategy'\nimport { CustomerWeiXinV4Strategy } from '../customer/customerWeiXinV4.strategy'\n\nexport const sdkModuleControllers = [AppController, CustomerController, OrderController, ProductController]\nexport const sdkModuleProviders = [\n  {\n    provide: APP_FILTER,\n    useClass: AppExceptionFilter,\n  },\n  {\n    provide: APP_PIPE,\n    useClass: ValidationPipe,\n  },\n  AppLocalAuthStrategy,\n  AppLocalAuthV4Strategy,\n  AppJwtStrategy,\n  AppJwtV4Strategy,\n  CustomerLocalStrategy,\n  CustomerJwtStrategy,\n  CustomerWeiXinStrategy,\n  CustomerWeiXinV4Strategy,\n  FwhLoginSimpleStrategy,\n  CustomerAppCombinedStrategy,\n]\n\n@Module({\n  imports: [ServicesModule],\n  controllers: sdkModuleControllers,\n  providers: sdkModuleProviders,\n})\nexport class SdkModule {}\n","import { CallHandler, ExecutionContext, Injectable, NestInterceptor } from '@nestjs/common'\nimport { Observable } from 'rxjs'\nimport { map } from 'rxjs/operators'\n\nexport interface Response<T> {\n  data: T\n}\n\n@Injectable()\nexport class TransformInterceptor<T> implements NestInterceptor<T, Response<T>> {\n  intercept(context: ExecutionContext, next: CallHandler): Observable<Response<T>> {\n    return next.handle().pipe(\n      map(data => ({\n        success: true,\n        data,\n      })),\n    )\n  }\n}\n","import { Global, Module } from '@nestjs/common'\nimport { Container } from 'inversify'\nimport { getServices } from '@flowda-projects/flowda-shared'\nimport { loadModule } from '../loadModule'\n\nexport const servicesContainer = new Container()\nloadModule(servicesContainer)\n\nconst services = getServices(servicesContainer)\n\n@Global()\n@Module({\n  providers: services,\n  exports: services,\n})\nexport class ServicesModule {\n  constructor() {}\n}\n","import { createTRPCProxyClient, httpBatchLink } from '@trpc/client'\nimport type { AppRouter } from '@flowda-projects/flowda-services-trpc-server'\n\nexport const trpc = createTRPCProxyClient<AppRouter>({\n  links: [\n    httpBatchLink({\n      url: `${process.env.FLOWDA_URL}/flowda-api/trpc`, // you should update this to use env variables\n    }),\n  ],\n})\n","import { inject, injectable } from 'inversify'\n// import * as db from '@prisma/client-wms'\nimport { createZodDto } from 'nestjs-zod'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { LoggerService } from '@nestjs/common'\nimport * as z from 'zod'\n\nconst QueryAuditSchema = z.object({\n  auditType: z.string(),\n  auditId: z.number(),\n  pageSize: z.number(),\n  current: z.number(),\n})\n\nexport class QueryAuditSchemaDto extends createZodDto(QueryAuditSchema) {}\n\n@injectable()\nexport class AuditService {\n  private readonly logger\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: any,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(AuditService.name)\n  }\n\n  async queryAudit(dto: QueryAuditSchemaDto) {\n    const [data, count] = await this.prisma.$transaction([\n      this.prisma.audits.findMany({\n        skip: dto.pageSize * (dto.current - 1),\n        take: dto.pageSize,\n        where: {\n          auditType: dto.auditType,\n          auditId: dto.auditId,\n        },\n        orderBy: {\n          createdAt: 'desc',\n        },\n      }),\n      this.prisma.audits.count({\n        where: {\n          auditType: dto.auditType,\n          auditId: dto.auditId,\n        },\n      }),\n    ])\n    return {\n      total: count,\n      data,\n    }\n  }\n}\n","import { inject, injectable } from 'inversify'\n// import * as db from '@prisma/client-wms'\nimport { createZodDto } from 'nestjs-zod'\n// import { TableFilterSchema } from '@flowda-projects/prisma-wms'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { LoggerService } from '@nestjs/common'\nimport { z } from 'zod'\n\n// todo @flowda-projects/prisma-wms\n// 不能有关联关系，先手动 copy 出来\nexport const TableFilterSchema = z.object({\n  id: z.number().int(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  isDeleted: z.boolean(),\n  path: z.string(),\n  name: z.string(),\n  filterJSON: z.string(),\n})\n\nconst QueryTableFilterSchema = TableFilterSchema.pick({\n  path: true,\n})\n\nconst RemoveTableFilterSchema = TableFilterSchema.pick({\n  id: true,\n})\n\nexport interface SaveTableFilterDto {\n  path: string\n  filterJSON: string\n  name: string\n}\n\nexport class QueryTableFilterSchemaDto extends createZodDto(QueryTableFilterSchema) {}\n\nexport class RemoveTableFilterSchemaDto extends createZodDto(RemoveTableFilterSchema) {}\n\n@injectable()\nexport class TableFilterService {\n  private readonly logger\n\n  constructor(\n    // todo: 暂时先强类型，后续应该做成服务\n    @inject(PrismaClientSymbol) private prisma: any,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(TableFilterService.name)\n  }\n\n  save(dto: SaveTableFilterDto) {\n    return this.prisma.tableFilter.create({\n      data: dto,\n    })\n  }\n\n  remove(dto: RemoveTableFilterSchemaDto) {\n    return this.prisma.tableFilter.delete({\n      where: { id: dto.id },\n    })\n  }\n\n  query(dto: QueryTableFilterSchemaDto) {\n    return this.prisma.tableFilter.findMany({\n      where: {\n        isDeleted: false,\n        path: dto.path,\n      },\n      select: {\n        id: true,\n        path: true,\n        name: true,\n        filterJSON: true,\n      },\n    })\n  }\n}\n","import { ArgumentsHost, Catch, ExceptionFilter, HttpException, HttpStatus, Logger } from '@nestjs/common'\nimport { CustomError } from '@flowda-projects/flowda-shared'\n\n@Catch()\nexport class AppExceptionFilter implements ExceptionFilter {\n  private readonly logger = new Logger(AppExceptionFilter.name)\n\n  constructor() {}\n\n  catch(exception: unknown, host: ArgumentsHost) {\n    const ctx = host.switchToHttp()\n    const response = ctx.getResponse()\n    if (exception instanceof CustomError) {\n      const rt = JSON.parse(exception.message)\n      this.logger.error(`CustomError|${rt.code}|${rt.message}`)\n      response.status(HttpStatus.OK).json({\n        code: rt.code,\n        message: rt.message,\n      })\n    } else if (exception instanceof HttpException) {\n      const res = exception.getResponse()\n      if (typeof res === 'object') {\n        const extra = JSON.stringify(res)\n        this.logger.error(`HttpException|${exception.getStatus()}|${exception.message}|${extra}`)\n      } else {\n        this.logger.error(`HttpException|${exception.getStatus()}|${exception.message}`)\n      }\n      response.status(exception.getStatus()).json({\n        code: exception.getStatus(),\n        message: typeof res === 'object' ? res : exception.message,\n      })\n    } else {\n      this.logger.error((exception as Error).stack)\n\n      response.status(HttpStatus.INTERNAL_SERVER_ERROR).json({\n        code: HttpStatus.INTERNAL_SERVER_ERROR,\n        message: (exception as Error).message,\n      })\n    }\n  }\n}\n","import { ContainerModule, interfaces } from 'inversify'\nimport { Logger, LoggerService } from '@nestjs/common'\nimport { bindService, ServiceSymbol } from '@flowda-projects/flowda-shared'\nimport { TableFilterService } from './assist/table-filter.service'\nimport { AuditService } from './assist/audit.service'\n\nexport const flowdaSharedNodeModule = new ContainerModule((bind: interfaces.Bind) => {\n  bindService(bind, ServiceSymbol, TableFilterService)\n  bindService(bind, ServiceSymbol, AuditService)\n  bind<interfaces.Factory<LoggerService>>('Factory<Logger>').toFactory<LoggerService, [string]>(context => {\n    return name => {\n      return new Logger(name)\n    }\n  })\n})\n","export * from './flowdaSharedNode.module'\nexport * from './filters/appExceptionFilter'\nexport * from './assist/table-filter.service'\nexport * from './assist/audit.service'\n","import { ContainerModule, interfaces } from 'inversify'\nimport { z } from 'zod'\n\nimport {\n  bindServiceSymbol,\n  DataServiceSymbol,\n  DynamicTableSchemaTransformer,\n  DynamicTableSchemaTransformerSymbol,\n  PrismaUtilsSymbol,\n  SchemaServiceSymbol,\n  ServiceSymbol,\n} from '@flowda-projects/flowda-shared'\nimport { PrismaSchemaService } from './services/schema/prismaSchema.service'\nimport { DataService } from './services/data/data.service'\nimport { SchemaService } from './services/schema/schema.service'\nimport { SchemaTransformer } from './services/schema/schemaTransformer'\nimport { PrismaUtils } from './services/schema/prismaUtils'\nimport { PrismaSchemaServiceSymbol, SchemaTransformerSymbol } from './symbols'\n\nexport const flowdaSharedModule = new ContainerModule((bind: interfaces.Bind) => {\n  bindServiceSymbol(bind, ServiceSymbol, DataServiceSymbol, DataService)\n  bindServiceSymbol(bind, ServiceSymbol, SchemaServiceSymbol, SchemaService)\n\n  bind<PrismaSchemaService>(PrismaSchemaServiceSymbol).to(PrismaSchemaService).inSingletonScope()\n  bind<PrismaUtils>(PrismaUtilsSymbol).to(PrismaUtils).inSingletonScope()\n\n  bind<SchemaTransformer>(SchemaTransformerSymbol).to(SchemaTransformer).inTransientScope()\n  bind<interfaces.Factory<SchemaTransformer>>('Factory<SchemaTransformer>').toFactory<SchemaTransformer, [any]>(\n    context => {\n      return (z: z.AnyZodObject) => {\n        const transformer = context.container.get<SchemaTransformer>(SchemaTransformerSymbol)\n        transformer.setZodType(z)\n        return transformer\n      }\n    },\n  )\n  bind<DynamicTableSchemaTransformer>(DynamicTableSchemaTransformerSymbol)\n    .to(DynamicTableSchemaTransformer)\n    .inTransientScope()\n})\n","export * from './symbols'\nexport * from './flowdaShared.module'\n\nexport * from './utils/bindService'\nexport * from './utils/matchPath'\nexport * from './utils/getServices'\nexport * from './utils/browser-log-utils'\n\nexport * from './interfaces/types'\nexport * from './interfaces/schema'\n\nexport * from './services/schema/meta'\nexport * from './services/schema/schemaTransformer'\nexport * from './services/schema/dynamicTableSchemaTransformer'\nexport * from './services/schema/schema.service'\nexport * from './services/data/data.service'\n","// todo: 改成 zod 定义\nexport interface IResourceSchema {\n  prisma?: boolean\n  is_dynamic?: boolean\n  schema_name: string\n  name: string\n  slug: string\n  primary_key: string\n  custom?: any\n  display_column?: string | string[]\n  display_name: string | null\n  display_primary_key: boolean\n  searchable_columns?: string[]\n  columns: Partial<IResourceColumnSchema>[]\n  associations: IResourceAssociationSchema[]\n  __jsonschema?: any\n}\n\nexport interface IResourceAssociationSchema {\n  foreign_key: string\n  /**\n   * Prisma Model 名称\n   */\n  model_name: string\n  primary_key: string\n  /**\n   * Prisma 字段名称\n   */\n  name: string\n  slug: string\n  display_name: string\n  schema_name: string\n}\n\nexport interface ISchemaSelectOption {\n  value: string | number\n  label: string\n}\n\nexport interface IResourceColumnSchema {\n  name: string\n  access_type: 'read_only'\n  column_type: 'reference' | 'string' | 'tag' | 'integer' | 'datetime' | 'textarea' | 'boolean'\n  prisma?: boolean\n  format: {\n    select_options: ISchemaSelectOption[]\n  }\n  reference: {\n    model_name: string\n    primary_key: string\n    display_name: string\n    display_column?: string | string[]\n    'x-relationField': string\n    'x-onSoftDelete': string\n    'x-unique'?: boolean\n    // foreign_key: jsProp.foreign_key,\n  }\n  display_name: string | null\n  validators: Array<\n    | {\n        required: boolean\n      }\n    | {\n        format: string\n        message: string\n      }\n  >\n}\n","export const PrismaClientSymbol = Symbol('PrismaClient')\n/**\n * getServices 方法会将 inversify module 转换成 nestjs module，这样 nestjs controller 就可以使用了\n * 所以，注意：如果不需要给 controller 使用，则不需要 bind\n */\nexport const ServiceSymbol = Symbol('Service')\nexport const APISymbol = Symbol('API')\nexport const URLSymbol = Symbol.for('URL')\nexport const ENVSymbol = Symbol.for('ENV')\nexport const PrismaZodSchemaSymbol = Symbol.for('PrismaZodSchema')\nexport const CustomZodSchemaSymbol = Symbol.for('CustomZodSchema')\nexport const K3CloudIdentifyInfoSymbol = Symbol.for('K3CloudIdentifyInfo')\n\nexport class CustomError extends Error {\n  public override message\n\n  constructor(code: number, message: string, extra?: any) {\n    super(JSON.stringify({ code: code, message }))\n    this.message = JSON.stringify({ code, message, extra })\n  }\n}\n\nexport type TFilterFormValue =\n  | string\n  | {\n      column: string | undefined\n      condition: string | undefined\n      value: string | undefined\n    }\n\nexport const COSSymbol = Symbol('COS')\n","import { inject, injectable } from 'inversify'\nimport * as _ from 'radash'\nimport { lowerFirst } from 'lodash'\nimport type { LoggerService } from '@nestjs/common'\nimport type { PrismaSchemaService } from '../schema/prismaSchema.service'\nimport { PrismaClientSymbol } from '../../interfaces/types'\nimport { PrismaSchemaServiceSymbol } from '../../symbols'\n// import * as db from '@prisma/client-cms_admin'\n\n/*\ntodo: 增加 reference_type 区分是如何做 nest\ne.g. Customer#weixinProfile 和 Order#customerId 的 nest 查询有区别\n */\n@injectable()\nexport class DataService {\n  private readonly logger\n\n  constructor(\n    // todo: prisma 要不要强类型\n    // @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject(PrismaClientSymbol) private prisma: any,\n    @inject(PrismaSchemaServiceSymbol) private prismaSchemaService: PrismaSchemaService,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(DataService.name)\n  }\n\n  async get(reqUser: any, pathname: string, query: Record<string, any>) {\n    this.logger.debug!(\n      `get(reqUser ${JSON.stringify(reqUser, null, 2)}, path: ${pathname}, query: ${JSON.stringify(query, null, 2)})`,\n    )\n    const findParamRet = await this.prismaSchemaService.toFindParam(pathname, query)\n    if (_.isEmpty(findParamRet)) {\n      return {}\n    }\n    const { resource, action, param } = findParamRet\n    if (action === 'findUnique') {\n      const ret = await this.prisma[resource][action](param)\n      if (ret.isDeleted) return {}\n      return _.omit(ret, ['isDeleted']) as any\n    }\n    if (action === 'findMany') {\n      const [data, count] = await this.prisma.$transaction([\n        this.prisma[resource][action](param),\n        this.prisma[resource].count({ where: param.where }),\n      ])\n      return {\n        pagination: {\n          total: count,\n        },\n        data,\n      }\n    }\n  }\n\n  async put(reqUser: any, path: string, values: any) {\n    this.logger.debug!(\n      `put(reqUser ${JSON.stringify(reqUser, null, 2)}), path: ${path}, values: ${JSON.stringify(values, null, 2)}`,\n    )\n    const updateParamRet = await this.prismaSchemaService.toUpdateParam(path, values)\n    const { resource, param } = updateParamRet\n    const prevRet = await this.prisma[resource].findUnique({\n      where: {\n        id: param.where.id,\n      },\n      select: _.mapValues(param.data, item => true),\n    })\n    this.logger.debug!(`prevRet ${JSON.stringify(prevRet, null, 2)}`)\n    const auditChanges = Object.keys(param.data).reduce<Record<string, [string, string]>>((acc, k) => {\n      acc[k] = [prevRet[k], param.data[k]]\n      return acc\n    }, {})\n    const ret = await this.prisma[resource].update(param)\n    const auditInfo = {\n      auditId: param.where.id as number,\n      auditType: resource,\n      userId: JSON.stringify(reqUser['user_id'] || reqUser['uid']), // todo: 暂时兼容 java 和 node\n      username: reqUser['user_name'],\n      action: 'update',\n      auditChanges: JSON.stringify(auditChanges),\n      version: 0,\n    }\n    this.logger.log(`audit ${JSON.stringify(auditInfo, null, 2)}`)\n    await this.prisma.audits.create({\n      data: auditInfo,\n    })\n    return ret\n  }\n\n  async post(reqUser: any, path: string, values: any) {\n    this.logger.debug!(`[post] reqUser ${JSON.stringify(reqUser, null, 2)}`)\n    const createParamRet = await this.prismaSchemaService.toCreateParam(path, values)\n    const { resource, param } = createParamRet\n\n    if (createParamRet['x-unique']) {\n      const ref = createParamRet['x-unique']\n      const refId = values[ref.name!]\n      const refModelName = ref.reference!.model_name\n      const refData = await this.prisma[lowerFirst(refModelName)].findUnique({\n        where: {\n          id: refId,\n        },\n        include: {\n          [resource]: true,\n        },\n      })\n      const id = refData[resource].id\n      const ret = await this.prisma[resource].update({\n        where: {\n          id: id,\n        },\n        data: {\n          ...param.data,\n          ...{\n            isDeleted: false,\n          },\n        },\n      })\n\n      const auditInfo = {\n        auditId: id,\n        auditType: resource,\n        userId: JSON.stringify(reqUser['user_id'] || reqUser['uid']), // todo: 暂时兼容 java 和 node\n        username: reqUser['user_name'],\n        action: 'soft_delete_revert',\n        auditChanges: JSON.stringify(param.data),\n        version: 0,\n      }\n      this.logger.log(`audit ${JSON.stringify(auditInfo, null, 2)}`)\n      await this.prisma.audits.create({\n        data: auditInfo,\n      })\n      return ret\n    } else {\n      const ret = await this.prisma[resource].create(param)\n      const auditInfo = {\n        auditId: ret.id,\n        auditType: resource,\n        userId: JSON.stringify(reqUser['user_id'] || reqUser['uid']), // todo: 暂时兼容 java 和 node\n        username: reqUser['user_name'],\n        action: 'create',\n        auditChanges: JSON.stringify(param.data),\n        version: 0,\n      }\n      this.logger.log(`audit ${JSON.stringify(auditInfo, null, 2)}`)\n      await this.prisma.audits.create({\n        data: auditInfo,\n      })\n\n      return ret\n    }\n  }\n\n  async remove(reqUser: any, pathname: string) {\n    this.logger.debug!(`[remove] reqUser ${JSON.stringify(reqUser, null, 2)}`)\n    const assDelStrategy = await this.prismaSchemaService.getAssociationDeleteStrategy(pathname)\n    const { resource, param } = await this.prismaSchemaService.toRemoveParam(pathname)\n    for (const k of Object.keys(assDelStrategy)) {\n      const ass = assDelStrategy[k]\n      if (ass['x-onSoftDelete'] === 'Restrict') {\n        const ret = await this.prisma[lowerFirst(k)].findMany({\n          where: {\n            isDeleted: false,\n            [ass.name]: param.where.id,\n          },\n        })\n        if (ret.length > 0) {\n          throw new Error(`删除失败, 关联的<${ass.relatedDisplayName}>不为空`)\n        }\n      }\n    }\n\n    const prevRet = await this.prisma[resource].findUnique({\n      where: {\n        id: param.where.id,\n      },\n    })\n    const ret = await this.prisma[resource].update(param)\n\n    const auditInfo = {\n      auditId: param.where.id,\n      auditType: resource,\n      userId: JSON.stringify(reqUser['user_id'] || reqUser['uid']), // todo: 暂时兼容 java 和 node\n      username: reqUser['user_name'],\n      action: 'soft_delete',\n      auditChanges: JSON.stringify(prevRet),\n      version: 0,\n    }\n    this.logger.log(`audit ${JSON.stringify(auditInfo, null, 2)}`)\n    await this.prisma.audits.create({\n      data: auditInfo,\n    })\n    return ret\n  }\n}\n","import type { LoggerService } from '@nestjs/common'\nimport { inject, injectable } from 'inversify'\nimport { toModelName, toPath, toSchemaName } from '../../utils/matchPath'\n\n@injectable()\nexport class DynamicTableSchemaTransformer {\n  private readonly logger: LoggerService\n\n  constructor(@inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService) {\n    this.logger = loggerFactory(DynamicTableSchemaTransformer.name)\n  }\n\n  transform(input: any) {\n    const cols = input.dynamicTableDefColumns.map((c: any) => {\n      return Object.assign(\n        {\n          name: c.name,\n          column_type: c.type,\n        },\n        c.extendedSchema,\n      )\n    })\n    return Object.assign(\n      {\n        name: toModelName(input.name),\n        slug: toPath(input.name),\n        schema_name: toSchemaName(input.name),\n        primary_key: 'id',\n        columns: cols,\n        prisma: false,\n        is_dynamic: true,\n      },\n      input.extendedSchema,\n    )\n  }\n}\n","import { z } from 'zod'\n// motor-admin JSON.parse(document.getElementById('app').dataset.schema)\n// todo: 目前尽量在后端定义，后续可以再开辟一条链路来储存 schema，并进行 merge\n// 当然如果后端定义链路保留，应该做成 decorator\n\nexport function meta(values: any) {\n  return z.unknown().optional().describe(JSON.stringify(values))\n}\n","import { LoggerService } from '@nestjs/common'\nimport { inject, injectable } from 'inversify'\nimport * as qs from 'qs'\nimport { isLikeNumber, matchPath, toModelName } from '../../utils/matchPath'\nimport type { SchemaService } from './schema.service'\nimport * as _ from 'lodash'\nimport type { IResourceSchema } from '../../interfaces/schema'\nimport type { TFilterFormValue } from '@flowda-projects/flowda-shared'\nimport { PrismaUtilsSymbol, SchemaServiceSymbol } from '@flowda-projects/flowda-shared'\nimport type { PrismaUtils } from './prismaUtils'\n\n@injectable()\nexport class PrismaSchemaService {\n  private readonly logger\n\n  constructor(\n    @inject(PrismaUtilsSymbol) private prismaUtils: PrismaUtils,\n    @inject(SchemaServiceSymbol) private schemaService: SchemaService,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(PrismaSchemaService.name)\n  }\n\n  toPrismaSelect(fields: string | undefined, theResourceSchema: Partial<IResourceSchema>) {\n    let fieldsArr: string[] = []\n    if (fields == null) {\n      fieldsArr = theResourceSchema.columns!.map(c => c.name!)\n    } else {\n      fieldsArr = fields.split(',')\n    }\n    return fieldsArr.reduce((acc: Record<string, boolean>, cur: string) => {\n      acc[cur] = true\n      return acc\n    }, {})\n  }\n\n  async toFindParam(\n    pathname: string,\n    query: qs.ParsedQs,\n  ): Promise<\n    | {\n        action: 'findUnique' | 'findMany'\n        resource: string\n        param: any\n      }\n    | Record<string, never>\n  > {\n    // if (!query['fields']) {\n    //   throw new Error('No query fields')\n    // }\n\n    this.logger.debug!(`pathname: ${pathname}, query: ${JSON.stringify(query, null, 2)}`)\n\n    const parsedPath = matchPath(pathname)\n    if (parsedPath.length === 0) return Promise.resolve({})\n\n    const { resource, id, resourceSchema } = parsedPath[parsedPath.length - 1]\n\n    const schemaCache = await this.schemaService.getSchemaCache()\n    const theResourceSchema = schemaCache[resourceSchema]\n\n    let action: 'findUnique' | 'findMany'\n    let param = {}\n\n    const queryFields = query['fields'] as qs.ParsedQs\n    const fields = this.toPrismaSelect(queryFields[resource] as string | undefined, theResourceSchema)\n\n    const include: Record<string, any> = {}\n\n    if (typeof query['include'] === 'string' && query['include'] !== '') {\n      query['include'].split(',').forEach((inc: string) => {\n        // this.logger.log(`[toFindParam] parse include ${inc}`)\n        const refSelect: any = this.getRefSelect(schemaCache, theResourceSchema, inc)\n        const selectRet = this.toPrismaSelect(queryFields[inc] as string, theResourceSchema)\n        include[inc] = {\n          // todo: 似乎 prisma nest select 不支持 order by 只有 include 支持，但是 include 不支持 nest select fields\n          // orderBy: [{ createdAt: 'desc' }],\n          select: { ...selectRet, ...refSelect },\n        }\n      })\n    }\n\n    if (id != null) {\n      action = 'findUnique'\n      const id2 = await this.prismaUtils.parseId(resource, id)\n      param = {\n        where: {\n          id: id2,\n        },\n        select: { ...fields, ...include, ...{ isDeleted: true } },\n      }\n    } else {\n      const filter = this.convertQueryToPrismaFilter(schemaCache, theResourceSchema, query)\n\n      const orderBy = this.convertToOrderBy(query)\n\n      action = 'findMany'\n      const skip = query['current'] ? (_.toNumber(query['current']) - 1) * _.toNumber(query['pageSize']) : undefined\n      const take = query['pageSize'] ? _.toNumber(query['pageSize']) : undefined\n      if (parsedPath.length > 1) {\n        // 情况1：根据前一个 resource id 搜索 list\n        const pResource = parsedPath[parsedPath.length - 2]\n        // this.logger.log(`${resource}.findMany`)\n        param = _.omitBy(\n          {\n            where: {\n              ...{\n                [`${pResource.resource}Id`]: pResource.id,\n                isDeleted: false,\n              },\n              ...filter,\n            },\n            orderBy,\n            skip,\n            take,\n            select: { ...fields, ...include },\n          },\n          _.isUndefined,\n        )\n      } else {\n        param = _.omitBy(\n          {\n            where: {\n              ...{\n                isDeleted: false,\n              },\n              ...filter,\n            },\n            orderBy,\n            skip,\n            take,\n            select: { ...fields, ...include },\n          },\n          _.isUndefined,\n        )\n      }\n    }\n    const ret = {\n      action,\n      param,\n      resource,\n    }\n    this.logger.debug!(JSON.stringify(ret))\n    return ret\n  }\n\n  convertToOrderBy(query: any) {\n    let sort: string\n    if (query.sort != null) {\n      sort = query.sort\n    } else {\n      return [{ createdAt: 'desc' }]\n    }\n\n    if (sort[0] === '-') {\n      return [{ [sort.slice(1)]: 'desc' }]\n    } else {\n      return [{ [sort]: 'asc' }]\n    }\n  }\n\n  /**\n   * 根据 resource 的 schema 中 columns 是 ref， e.g. resource(Receipt) 收货单关联的 ref(partVersion)\n   * 找到对应 refSchema 的 display_column 中的又 include e.g. display_column(partId)，得到 nest select\n   * { [include: partVersion]: { select { partId: true, [partId x-relationField: part]: { select: { id: true, [display_column*]: true} }}} }\n   *\n   * todo: 现在是根据 display_column 里如果有 ref 来计算的，后续可以改成所有 ref 都默认向下搜索一层\n   */\n  getRefSelect(\n    schemaCache: Record<string, Partial<IResourceSchema>>,\n    resourceSchema: Partial<IResourceSchema>,\n    includeRef: string,\n  ) {\n    const refSelect: any = {}\n    if (resourceSchema && resourceSchema.columns) {\n      // e.g. inc partVersion\n      const refColumn = resourceSchema.columns.find(\n        col => col.column_type === 'reference' && col.reference!['x-relationField'] === includeRef,\n      )\n      if (refColumn) {\n        // e.g. model_name PartVersion\n        // e.g. display_column partId,version\n        const { model_name, display_column } = refColumn.reference!\n        // e.g. PartVersionResourceSchema\n        const refSchema = schemaCache[model_name + 'ResourceSchema']\n        let displayCols: string[] = []\n        if (typeof display_column === 'string') {\n          displayCols = [display_column]\n        } else {\n          displayCols = (display_column as string[]) || []\n        }\n        displayCols.forEach(item => {\n          // e.g. item partId\n          const disCol = refSchema.columns!.find(col => col.name === item)\n          if (disCol == null) {\n            throw new Error(`schema '${model_name}', wrong display column '${item}'`)\n          } else if (disCol.column_type === 'reference') {\n            // e.g. name\n            const display_column = disCol!.reference!.display_column!\n            const relationField = disCol!.reference!['x-relationField']\n\n            let display_column2: string[]\n            if (Array.isArray(display_column)) {\n              display_column2 = display_column\n            } else {\n              display_column2 = [display_column]\n            }\n            const select = display_column2.reduce((acc, cur) => {\n              acc[cur] = true\n              return acc\n            }, {} as Record<string, boolean>)\n\n            refSelect[relationField] = {\n              select: Object.assign(\n                {\n                  id: true,\n                },\n                select,\n              ),\n            }\n          }\n        })\n      }\n    }\n    return refSelect\n  }\n\n  /*\n    [\n      {\n        type: { eq: 'UNSCHEDULE' },\n        status: { eq: 'DONE' },\n      },\n    ]\n   */\n  convertQueryToPrismaFilter(\n    schemaCache: Record<string, Partial<IResourceSchema>>,\n    resourceSchema: Partial<IResourceSchema>,\n    query: any,\n  ) {\n    if (query.filter && Array.isArray(query.filter) && query.filter.length > 0) {\n      // console.log(query.filter)\n      const filter = query.filter as TFilterFormValue[]\n      const andIdx = filter.findIndex(item => typeof item === 'string' && item === 'AND')\n      const orIdx = filter.findIndex(item => typeof item === 'string' && item === 'OR')\n      const ret: any = {}\n\n      if (andIdx === 0) {\n        ret['AND'] = []\n        if (orIdx === -1) {\n          const andFilter = filter.slice(1)\n          andFilter.forEach(item => ret['AND'].push(this.mapItemToPrismaFilter(schemaCache, resourceSchema, item)))\n        } else {\n          const andFilter = filter.slice(1, orIdx)\n          andFilter.forEach(item => ret['AND'].push(this.mapItemToPrismaFilter(schemaCache, resourceSchema, item)))\n          ret['OR'] = []\n          const orFilter = filter.slice(orIdx + 1)\n          orFilter.forEach(item => ret['OR'].push(this.mapItemToPrismaFilter(schemaCache, resourceSchema, item)))\n        }\n      } else if (orIdx === 0) {\n        ret['OR'] = []\n        if (andIdx === -1) {\n          const orFilter = filter.slice(1)\n          orFilter.forEach(item => ret['OR'].push(this.mapItemToPrismaFilter(schemaCache, resourceSchema, item)))\n        } else {\n          const orFilter = filter.slice(1, andIdx)\n          orFilter.forEach(item => ret['OR'].push(this.mapItemToPrismaFilter(schemaCache, resourceSchema, item)))\n          ret['AND'] = []\n          const andFilter = filter.slice(andIdx + 1)\n          andFilter.forEach(item => ret['AND'].push(this.mapItemToPrismaFilter(schemaCache, resourceSchema, item)))\n        }\n      } else {\n        throw new Error('Wrong filter')\n      }\n      return ret\n    } else if (\n      query.q != null &&\n      Array.isArray(resourceSchema.searchable_columns) &&\n      resourceSchema.searchable_columns.length > 0\n    ) {\n      return {\n        OR: resourceSchema.searchable_columns.reduce((acc, cur) => {\n          acc.push({ [cur]: { contains: query.q } })\n          return acc\n        }, [] as any[]),\n      }\n    } else {\n      return {}\n    }\n  }\n\n  async toUpdateParam(pathname: string, values: any) {\n    this.logger.debug!(`pathname: ${pathname}, body: ${JSON.stringify(values)}`)\n\n    const matchRet = matchPath(pathname)\n    const { resource, id, resourceSchema } = matchRet[matchRet.length - 1]\n    const schemaCache = await this.schemaService.getSchemaCache()\n\n    this.removeRelationFields(schemaCache, resourceSchema, values)\n    const ret = {\n      resource,\n      param: {\n        where: { id: id },\n        data: values,\n      },\n    }\n    this.logger.debug!(JSON.stringify(ret))\n    return ret\n  }\n\n  // todo: 需要增加 relation name\n  async getAssociationDeleteStrategy(pathname: string) {\n    const matchRet = matchPath(pathname)\n    const { origin, resourceSchema } = matchRet[matchRet.length - 1]\n    const schemaCache = await this.schemaService.getSchemaCache()\n    const theResourceSchema = schemaCache[resourceSchema]\n    if (theResourceSchema.associations == null) {\n      return {}\n    }\n    const ret = theResourceSchema.associations.reduce((acc, cur) => {\n      const assSchema = schemaCache[cur.model_name + 'ResourceSchema']\n      if (assSchema == null) {\n        throw new Error(`${resourceSchema} associated schema ${cur.model_name} is null`)\n      }\n      const relCol = assSchema.columns!.find(\n        ac => ac.column_type === 'reference' && ac.reference!.model_name === toModelName(origin),\n      )\n      if (relCol == null) {\n        throw new Error('Cannot found related column')\n      }\n      if (relCol.reference!['x-onSoftDelete'] === 'Restrict') {\n        acc[cur.model_name] = {\n          'x-onSoftDelete': relCol.reference!['x-onSoftDelete'],\n          name: relCol.name,\n          relatedDisplayName: assSchema.display_name,\n        }\n        return acc\n      }\n      return acc\n    }, {} as any)\n    return ret\n  }\n\n  async toRemoveParam(pathname: string) {\n    const matchRet = matchPath(pathname)\n    const { resource, origin, id, resourceSchema } = matchRet[matchRet.length - 1]\n    const schemaCache = await this.schemaService.getSchemaCache()\n    const theResourceSchema = schemaCache[resourceSchema]\n    let assDisconnect: any = {}\n    let include: any\n    if (theResourceSchema.associations != null) {\n      assDisconnect = theResourceSchema.associations.reduce((acc, cur) => {\n        const assSchema = schemaCache[cur.model_name + 'ResourceSchema']\n        const relCol = assSchema.columns!.find(\n          ac => ac.column_type === 'reference' && ac.reference!.model_name === toModelName(origin),\n        )\n        if (relCol == null) {\n          throw new Error('Cannot found related column')\n        }\n        if (relCol.reference!['x-onSoftDelete'] !== 'Restrict' /* Restrict 已经确保 is_deleted 不需要解除关联 */) {\n          acc[cur.name] = {\n            set: [] /* disconnectAll 模拟 setNull */,\n          }\n          if (include == null) include = {}\n          include[cur.name] = true\n        }\n        return acc\n      }, {} as any)\n    }\n\n    let id2: string | number\n    if (id == null) {\n      throw new Error(`remove ${resource}, id null`)\n    } else {\n      id2 = await this.prismaUtils.parseId(resource, id)\n    }\n    const ret = {\n      resource,\n      param: {\n        where: {\n          id: id2,\n        },\n        data: Object.assign(\n          {\n            isDeleted: true,\n          },\n          assDisconnect,\n        ),\n        include,\n      },\n    }\n    this.logger.debug!(JSON.stringify(ret))\n    return ret\n  }\n\n  mapItemToPrismaFilter(\n    schemaCache: Record<string, Partial<IResourceSchema>>,\n    resourceSchema: Partial<IResourceSchema>,\n    item: any,\n  ) {\n    // 先初步转换\n    const k = Object.keys(item)[0]\n    // https://javascript.plainenglish.io/how-to-rename-object-keys-in-react-javascript-using-lodash-b73fb92ea24d\n    item[k] = _.mapKeys(item[k], (v, k) => {\n      switch (k) {\n        case 'eq':\n          return 'equals'\n        case 'neq':\n          return 'not'\n        default:\n          return k\n      }\n    })\n\n    item[k] = _.mapValues(item[k], v => {\n      // 得用 schema 判断下，主要就是 string 的 LIKE\n      const kk = k.split('.')\n      let col\n      if (kk.length === 2) {\n        const refCol = resourceSchema.columns!.find(col => {\n          return col.column_type === 'reference' && col.reference!['x-relationField'] === kk[0]\n        })\n        const refSchema = schemaCache[refCol!.reference!.model_name + 'ResourceSchema']\n        col = refSchema.columns!.find(item => item.name === kk[1])\n      } else {\n        col = resourceSchema.columns!.find(item => item.name === k)\n      }\n      if (col && ['string', 'textarea'].indexOf(col.column_type!) > -1) {\n        return v\n      } else if (isLikeNumber(v)) {\n        return _.toNumber(v)\n      } else {\n        return v\n      }\n    })\n\n    // 再将 . 改成嵌套（chatGPT 给出的方式）\n    const ret = {}\n    _.forEach(item, (value, key) => {\n      _.set(ret, key.replace(/\\./g, '.'), value)\n    })\n    return ret\n  }\n\n  async toCreateParam(pathname: string, values: any) {\n    const matchRet = matchPath(pathname)\n    // console.log(matchRet)\n    const { resource, resourceSchema } = matchRet[matchRet.length - 1]\n    const schemaCache = await this.schemaService.getSchemaCache()\n    this.removeRelationFields(schemaCache, resourceSchema, values)\n    const theResourceSchema = schemaCache[resourceSchema]\n    // console.log(theResourceSchema)\n\n    const uniqueCols = theResourceSchema.columns!.filter(col => {\n      return col.column_type === 'reference' && col.reference!['x-unique']\n    })\n\n    if (uniqueCols.length === 0) {\n      return {\n        action: 'create',\n        resource: resource,\n        param: {\n          data: values,\n        },\n      }\n    } else if (uniqueCols.length > 1) {\n      throw new Error('Not support multiple unique key')\n    } else {\n      const uniqueCol = uniqueCols[0]\n      // console.log(uniqueCol)\n      return {\n        action: 'update',\n        resource: resource,\n        param: {\n          data: values,\n        },\n        'x-unique': uniqueCol,\n      }\n    }\n  }\n\n  removeRelationFields(schemaCache: Record<string, Partial<IResourceSchema>>, resourceSchema: string, values: any) {\n    // todo: 目前是通过显式声明 x-relationField 来删除 put 时候的 reference 值\n    const relationFields: string[] = []\n    const theResourceSchema = schemaCache[resourceSchema]\n    // console.log(theResourceSchema)\n    if (theResourceSchema) {\n      Object.keys(values).forEach((k: string) => {\n        const kProp = theResourceSchema.columns && theResourceSchema.columns.find(col => col.name === k)\n        if (kProp && kProp.column_type === 'reference') {\n          const relationField = kProp.reference?.['x-relationField']\n          if (relationField) {\n            relationFields.push(relationField)\n          }\n        }\n      })\n    }\n    // console.log(relationFields)\n    relationFields.forEach(k => {\n      delete values[k]\n    })\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { toModelName } from '../../utils/matchPath'\nimport { PrismaClientSymbol } from '../../interfaces/types'\nimport type { LoggerService } from '@nestjs/common'\n\n@injectable()\nexport class PrismaUtils {\n  private readonly logger\n\n  constructor(\n    // todo: prisma 要不要强类型\n    // @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject(PrismaClientSymbol) private prisma: any,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(PrismaUtils.name)\n  }\n\n  async parseId(resource: string, id: string | number) {\n    const modelName = toModelName(resource)\n    const dmmf = await this.prisma._getDmmf()\n    const idField = dmmf.modelMap[modelName].fields.find((item: any) => item.name === 'id')\n    // this.logger.log(`id: ${id}, type: ${idField.type}`)\n    return idField.type === 'Int' && typeof id !== 'number' ? parseInt(id) : id\n  }\n}\n","import { z } from 'zod'\nimport { inject, injectable } from 'inversify'\nimport type { LoggerService } from '@nestjs/common'\nimport type { SchemaTransformer } from './schemaTransformer'\nimport { CustomZodSchemaSymbol, PrismaZodSchemaSymbol } from '../../interfaces/types'\nimport type { IResourceSchema } from '../../interfaces/schema'\n\n@injectable()\nexport class SchemaService {\n  private readonly logger\n  private schemaCache?: Record<string, Partial<IResourceSchema>>\n\n  constructor(\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n    @inject('Factory<SchemaTransformer>') private modelSchemaFactory: (z: z.AnyZodObject) => SchemaTransformer,\n    @inject(PrismaZodSchemaSymbol) private zt: any,\n    @inject(CustomZodSchemaSymbol) private czt: any,\n  ) {\n    this.logger = loggerFactory(SchemaService.name)\n  }\n\n  getSchema(): Record<string, Partial<IResourceSchema>> {\n    console.time('generate schema')\n    const schema = Object.keys(this.czt).reduce((acc: any, k) => {\n      const e = this.czt[k]\n      if (['ZodObject'].indexOf(e.constructor.name) > -1) {\n        const transformer = this.modelSchemaFactory(e)\n        acc[k] = transformer.buildSchema(k).toSchema()\n      } else {\n        this.logger.error('Wrong type', k)\n      }\n      return acc\n    }, {})\n    this.schemaCache = schema\n    console.timeEnd('generate schema')\n    return schema\n  }\n\n  async getSchemaCache(): Promise<Record<string, Partial<IResourceSchema>>> {\n    if (!this.schemaCache) {\n      // 重启的话内存里就没有了，可以手动重新获取下\n      this.logger.log(`schemaCache is empty, getSchema again.`)\n      return this.getSchema()\n    } else {\n      return this.schemaCache\n    }\n  }\n}\n","import { z } from 'zod'\nimport { inject, injectable } from 'inversify'\nimport type { LoggerService } from '@nestjs/common'\nimport { generateSchema as zodToOpenAPI } from '@anatine/zod-openapi'\nimport * as _ from 'lodash'\nimport { PrismaZodSchemaSymbol } from '../../interfaces/types'\nimport type { IResourceAssociationSchema, IResourceColumnSchema, IResourceSchema } from '../../interfaces/schema'\nimport { toPath } from '../../utils/matchPath'\n\nexport const SUFFIX = 'ResourceSchema'\n\n@injectable()\nexport class SchemaTransformer {\n  private readonly logger\n  private zodType?: z.AnyZodObject\n  private jsonSchema: any\n  private extendSchema: any\n  private modelLevelSchema: any = {}\n  private associations: IResourceAssociationSchema[] = []\n  private columns: Partial<IResourceColumnSchema>[] = []\n  private schemaName!: string\n\n  constructor(\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n    @inject(PrismaZodSchemaSymbol) private prismaZod: any,\n  ) {\n    this.logger = loggerFactory(SchemaTransformer.name)\n  }\n\n  setZodType(z: z.AnyZodObject) {\n    this.zodType = z\n  }\n\n  buildSchema(schemaName: string): SchemaTransformer {\n    if (!this.zodType) {\n      const errMsg = 'zodType is not initialized'\n      this.logger.error(errMsg)\n      throw new Error(errMsg)\n    }\n    this.schemaName = schemaName\n\n    this.jsonSchema = zodToOpenAPI(this.zodType)\n    this.modelLevelSchema = this.getModelSchema()\n\n    const props = this.getProperties()\n    this.columns = props.reduce<Partial<IResourceColumnSchema>[]>((acc, k) => {\n      const jsProp = this.jsonSchema.properties[k]\n\n      if (jsProp.virtual === 'true') {\n        return acc // 不处理 virtual，目前只有 1..1 用到\n      }\n\n      if (jsProp.type === 'array') {\n        if (!jsProp.model_name) {\n          throw new Error(`${this.schemaName} 1..n model_name is not set`)\n        }\n        this.associations.push({\n          foreign_key: this.getForeignKey(jsProp.foreign_key),\n          model_name: jsProp.model_name,\n          primary_key: jsProp.primary_key || 'id',\n          name: k,\n          slug: toPath(k),\n          display_name: jsProp.title,\n          schema_name: jsProp.model_name + SUFFIX,\n        })\n        return acc // 不处理 array\n      }\n\n      const c: Partial<IResourceColumnSchema> = _.omitBy<Partial<IResourceColumnSchema>>(\n        _.assign(\n          { name: k },\n          {\n            name: k,\n            column_type: this.doColumnType(k),\n            format: this.doFormat(k),\n            display_name: this.doDisplayName(k),\n            access_type: this.doAccessType(k),\n            reference: jsProp.reference ? this.doRef(k) : undefined,\n            validators: this.doValidators(k),\n            prisma: jsProp.prisma,\n          },\n        ),\n        _.isUndefined,\n      )\n      acc.push(c)\n      return acc\n    }, [])\n\n    if (Array.isArray(this.extendSchema.columns)) {\n      // 合并 __meta.columns 和 cols\n      this.columns.forEach((c: any) => {\n        const f = this.extendSchema.columns.find((c1: any) => c1.name === c.name)\n        Object.assign(c, f || {})\n      })\n    }\n\n    return this\n  }\n\n  toSchema(): Partial<IResourceSchema> {\n    const name = this.schemaName.split(SUFFIX)[0]\n    return _.omitBy<IResourceSchema>(\n      {\n        name: name,\n        slug: toPath(name),\n        prisma: this.modelLevelSchema.prisma != null ? this.modelLevelSchema.prisma : undefined,\n        schema_name: this.schemaName,\n        primary_key: this.modelLevelSchema.primary_key || 'id',\n        custom: this.jsonSchema.custom,\n        display_column: this.doDisplayColumn(this.modelLevelSchema.display_column),\n        display_name: this.modelLevelSchema.display_name,\n        display_primary_key:\n          this.modelLevelSchema.display_primary_key == null\n            ? true\n            : this.modelLevelSchema.display_primary_key === 'true',\n        searchable_columns: this.modelLevelSchema.searchable_columns\n          ? this.modelLevelSchema.searchable_columns.split(',')\n          : undefined,\n        columns: this.columns,\n        associations: this.associations,\n        // __jsonschema: this.jsonSchema,\n      },\n      _.isUndefined,\n    )\n  }\n\n  protected doDisplayColumn(display_column: string) {\n    if (!display_column) return undefined // 默认 id\n    const cols = display_column.split(',')\n    if (cols.length > 1) return cols\n    else return display_column\n  }\n\n  protected doRef(k: string): IResourceColumnSchema['reference'] {\n    const jsProp = this.jsonSchema.properties[k]\n    // console.log(jsProp)\n    const t = jsProp.reference + 'Schema'\n    const ref = zodToOpenAPI(this.prismaZod[t])\n    const { primary_key, display_name, display_column } = ref\n    const ret = {\n      model_name: jsProp.reference,\n      'x-relationField': jsProp['x-relationField'] || k.replace('Id', ''),\n      'x-onSoftDelete': !jsProp.nullable && this.jsonSchema.required.indexOf(k) > -1 ? 'Restrict' : 'SetNull',\n      primary_key,\n      display_name: jsProp.display_name || display_name,\n      display_column: this.doDisplayColumn(display_column),\n      // foreign_key: jsProp.foreign_key,\n    }\n    if (jsProp['x-unique']) {\n      return { ...ret, ...{ 'x-unique': true } }\n    } else {\n      return ret\n    }\n  }\n\n  protected getProperties() {\n    // 拿到最大的 columns\n    const keys = Object.keys((this.zodType as z.AnyZodObject).shape)\n    const properties = keys.filter(key => {\n      const item = (this.zodType as z.AnyZodObject).shape[key]\n      return (\n        key !== '__meta' &&\n        !(item instanceof z.ZodDefault || item._def.typeName === 'ZodDefault') &&\n        !(item instanceof z.ZodNever || item._def.typeName === 'ZodDefault') &&\n        keys.indexOf(key + 'Id') === -1 && // 忽略 product (product + 'Id' === productId)\n        key !== 'isDeleted'\n      )\n    })\n    return properties\n  }\n\n  protected getModelSchema() {\n    this.checkValid()\n    const _extends = this.extendSchema.extends\n    const { prisma } = this.extendSchema\n    if (prisma !== false && !this.prismaZod[_extends]) {\n      throw new Error('no _extends')\n    } else {\n      if (prisma !== false) {\n        return zodToOpenAPI(this.prismaZod[_extends])\n      } else {\n        const ret = Object.assign({ prisma: false }, _.omit(this.jsonSchema, ['type', 'properties', 'required']))\n        // this.logger.debug!(ret)\n        return ret\n      }\n    }\n  }\n\n  protected checkValid() {\n    // 暂时认为必须有 __meta，简化下逻辑\n    // 现在 __meta 里必须定义 extends\n    // todo: support no prisma schema\n    if (!this.jsonSchema.properties.__meta) {\n      throw new Error('no __meta')\n    }\n    this.extendSchema = JSON.parse(this.jsonSchema.properties.__meta.description)\n  }\n\n  protected doDisplayName(k: string): string | undefined {\n    const jsProp = this.jsonSchema.properties[k]\n    if (typeof jsProp.title === 'string') {\n      return jsProp.title\n    } else {\n      if (k === 'createdAt') {\n        return '创建时间'\n      }\n      if (k === 'updatedAt') {\n        return '更新时间'\n      }\n      return\n    }\n  }\n\n  protected doAccessType(k: string): IResourceColumnSchema['access_type'] | undefined {\n    const jsProp = this.jsonSchema.properties[k]\n    if (typeof jsProp.access_type === 'string') {\n      return jsProp.access_type\n    } else {\n      if (k === 'createdAt' || k === 'updatedAt' || k === this.modelLevelSchema.primary_key) {\n        return 'read_only'\n      } else {\n        return\n      }\n    }\n  }\n\n  protected doColumnType(k: string): IResourceColumnSchema['column_type'] {\n    const jsProp = this.jsonSchema.properties[k]\n    if (Array.isArray(jsProp.enum)) {\n      return 'tag'\n    } else if (jsProp.override_type) {\n      jsProp.type = jsProp.override_type\n    } else if (jsProp.format === 'date-time') {\n      return 'datetime'\n    }\n\n    if (jsProp.column_type) {\n      return jsProp.column_type\n    }\n\n    return jsProp.reference ? 'reference' : jsProp.type\n  }\n\n  private doValidators(k: string): IResourceColumnSchema['validators'] | undefined {\n    const jsProp = this.jsonSchema.properties[k]\n    if (!jsProp) {\n      this.logger.warn('undef key: ' + k)\n      return\n    }\n    const validators: IResourceColumnSchema['validators'] = []\n    if (['createdAt', 'updatedAt'].indexOf(k) === -1 && !jsProp.nullable && this.jsonSchema.required.indexOf(k) > -1) {\n      validators.push({ required: true })\n    }\n    return validators.length === 0 ? undefined : validators\n  }\n\n  private doFormat(k: string): IResourceColumnSchema['format'] | undefined {\n    const jsProp = this.jsonSchema.properties[k]\n    if (Array.isArray(jsProp.enum)) {\n      if (jsProp['x-enumNames']) {\n        const enumNames = jsProp['x-enumNames'].split(',')\n        return {\n          select_options: jsProp.enum.map((opt: string, idx: number) => ({\n            value: opt,\n            label: enumNames[idx],\n          })),\n        }\n      }\n      return {\n        select_options: jsProp.enum.map((opt: string) => ({\n          value: opt,\n          label: opt,\n        })),\n      }\n    } else {\n      return\n    }\n  }\n\n  private getForeignKey(fk: string) {\n    if (fk) return fk\n    const schema = this.extendSchema.extends\n    return _.lowerFirst(schema.split('Schema')[0]) + 'Id'\n  }\n}\n","export const PrismaSchemaServiceSymbol = Symbol.for('PrismaSchemaService')\nexport const SchemaTransformerSymbol = Symbol.for('SchemaTransformer')\nexport const PrismaUtilsSymbol = Symbol.for('PrismaUtils')\nexport const DataServiceSymbol = Symbol.for('DataService')\nexport const SchemaServiceSymbol = Symbol.for('SchemaService')\nexport const DynamicTableSchemaTransformerSymbol = Symbol.for('DynamicTableSchemaTransformer')\nexport const FlowdaTrpcClientSymbol = Symbol.for('FlowdaTrpcClient')\n","import { interfaces } from 'inversify'\n\nexport function bindService<T>(\n  bind: interfaces.Bind,\n  serviceIdentifier: interfaces.ServiceIdentifier<T>,\n  constructor: new (...args: never[]) => T,\n) {\n  bind<T>(constructor).toSelf().inSingletonScope()\n  bind<T>(serviceIdentifier).toFactory<T>((context: interfaces.Context) => {\n    return context.container.get<T>(constructor) as interfaces.SimpleFactory<T>\n  })\n}\n\nexport function bindServiceSymbol<T>(\n  bind: interfaces.Bind,\n  serviceIdentifier: interfaces.ServiceIdentifier<T>,\n  implementIdentifier: interfaces.ServiceIdentifier<T>,\n  constructor: interfaces.Newable<T>,\n) {\n  bind<T>(implementIdentifier).to(constructor).inSingletonScope()\n  bind<T>(serviceIdentifier).toFactory<T>((context: interfaces.Context) => {\n    return context.container.get<T>(implementIdentifier) as interfaces.SimpleFactory<T>\n  })\n}\n","const levelColorMap: Record<string, string> = {\n  0: '#c0392b', // Red\n  1: '#f39c12', // Yellow\n  3: '#00BCD4', // Cyan\n  4: '#ccc',\n}\n\nfunction style(level: number) {\n  return `\n  background: ${levelColorMap[level]};\n  border-radius: 0.5em;\n  color: white;\n  font-weight: bold;\n  padding: 2px 0.5em;\n`\n}\n\nexport function debug(msg: string) {\n  return [`%c debug `, style(4), '', msg]\n}\n\nexport function info(msg: string) {\n  return [`%c info `, style(3), '', msg]\n}\n\nexport function warn(msg: string) {\n  return [`%c warn `, style(1), '', msg]\n}\n\nexport function error(msg: string) {\n  return [`%c error `, style(0), '', msg]\n}\n","import { ServiceSymbol } from '../interfaces/types'\nimport { Container } from 'inversify'\n\nexport function getServices(servicesContainer: Container) {\n  return servicesContainer.getAll(ServiceSymbol).map((service: any) => {\n    return {\n      provide: service.constructor,\n      useValue: service,\n    }\n  })\n}\n","import * as plur from 'pluralize'\nimport * as _ from 'lodash'\n\nplur.addSingularRule(/data/i, 'data')\nplur.addSingularRule(/defs/i, 'def')\n\n// s* equipment 不可数\nconst REG = /(([a-z_]+s*)\\/?([A-Za-z0-9-_:]+)?)+/g\n\nconst NUM_REG = /^-?\\d+(\\.\\d+)?$/\n\nexport type TMatchPath = {\n  origin: string\n  resource: string\n  resourceSchema: string\n  id?: string | number\n}\n\n// todo: 暂时没想到更精确的方法，这个应该能覆盖 100%\nexport function isLikeNumber(value: string) {\n  return NUM_REG.test(value)\n}\n\nexport function toModelName(slug: string) {\n  return _.startCase(_.camelCase(plur.singular(slug))).replace(/ /g, '')\n}\n\nexport function toPath(modelName: string) {\n  return plur.plural(_.snakeCase(modelName))\n}\n\nexport function toSchemaName(slug: string) {\n  const p = plur.singular(slug)\n  return toModelName(p) + 'ResourceSchema'\n}\n\nexport function matchPath(path: string): TMatchPath[] {\n  const ret1 = path.match(REG)\n  // console.log(ret1)\n  if (ret1 != null) {\n    const ret2 = ret1.map(item => {\n      const [resource, id] = item.split('/')\n\n      const p = plur.singular(resource)\n      return {\n        resource: _.camelCase(p),\n        resourceSchema: toSchemaName(resource),\n        origin: resource,\n        id: isLikeNumber(id) ? _.toNumber(id) : id,\n      }\n    })\n    return ret2\n  } else {\n    return []\n  }\n}\n","import { extendZodWithOpenApi } from '@anatine/zod-openapi'\nimport { z } from 'zod'\n\nextendZodWithOpenApi(z)\n\nexport * from './legacy-libs'\nexport * from './infra/index'\nexport * from './services/index'\nexport * from './utils/index'\nexport * from './shared-web/appExceptionFilter'\n","import { injectable } from 'inversify'\nimport * as env from 'dotenv'\nimport { IConfigService } from '../interfaces/config/config.service'\nimport { CleanedEnvAccessors, cleanEnv, email, EnvError, EnvMissingError, num, port, str, testOnly } from 'envalid'\nimport { Logger } from '@nestjs/common'\n\nenv.config()\n\n@injectable()\nexport class ConfigService implements IConfigService {\n  private env: Readonly<any & CleanedEnvAccessors>\n  private readonly logger = new Logger(ConfigService.name)\n\n  constructor() {\n    this.env = cleanEnv(\n      process.env,\n      {\n        DATABASE_URL: str({ devDefault: testOnly('test') }),\n        SECRET_FOR_LICENSE_TOKEN: str({ devDefault: testOnly('test') }),\n\n        // secret 不设置默认值，强制配置\n        // customer\n        customer_access_token_secret: str({ devDefault: testOnly('test') }),\n        customer_refresh_token_secret: str({ devDefault: testOnly('test') }),\n        customer_access_token_expire: num({ default: 7 * 24 * 60 * 60 }),\n        customer_refresh_token_expire: num({ default: 12 * 30 * 24 * 60 * 60 }),\n\n        // app\n        app_access_token_secret: str({ devDefault: testOnly('test') }),\n        app_refresh_token_secret: str({ devDefault: testOnly('test') }),\n        app_access_token_expire: num({ default: 7 * 24 * 60 * 60 }),\n        app_refresh_token_expire: num({ default: 12 * 30 * 24 * 60 * 60 }),\n\n        app_token_secret: str({ devDefault: testOnly('test') }),\n\n        // tenant\n        tenant_access_token_secret: str({ devDefault: testOnly('test') }),\n        tenant_refresh_token_secret: str({ devDefault: testOnly('test') }),\n        tenant_access_token_expire: num({ default: 10 * 60 }),\n        tenant_refresh_token_expire: num({ default: 7 * 24 * 60 * 60 }),\n\n        // 以下设置 default，是因为 e2e CI 上不需要强制配置\n        // 但是其实生产环境需要设置下\n        merchant_serial_no: str({ default: '' }),\n        mchid: str({ default: '' }),\n        'apiclient_key.pem': str({ default: '' }),\n        'apiclient_cert.pem': str({ default: '' }),\n        appid: str({ default: '' }),\n        feishu_mail_account: email({ default: 'tset@test.com' }),\n        feishu_mail_secret: str({ default: '' }),\n        TENCENT_SEC_ID: str({ default: '' }),\n        TENCENT_SEC_KEY: str({ default: '' }),\n        mail_smtp: str({ default: '' }),\n        mail_smtp_port: port({ default: 0 }),\n        mail_account: str({ default: '' }),\n        mail_secret: str({ default: '' }),\n        freecharger_pc_appid: str({ default: '' }),\n        freecharger_pc_appSecret: str({ default: '' }),\n        freecharger_fuwuhao_appid: str({ default: '' }),\n        freecharger_fuwuhao_secret: str({ default: '' }),\n        fuwuhao_state_secret: str({ default: '' }),\n        ZHI_CNT_PER_DAY: str({ default: 20 }),\n        CHAT_SALT: str({ default: 'CHAT_SALT_STR' }),\n        WORKER_LIST: str({ default: '' }),\n        WECOM_HOOK_KEY: str({ default: 'f392b278-930a-4ccf-81ab-31128d668631' }),\n\n        FLOWDA_URL: str({ devDefault: testOnly('http://localhost:3350') }),\n      },\n      {\n        reporter: ({ errors, env }) => {\n          for (const [envVar, err] of Object.entries(errors)) {\n            if (err instanceof EnvError) {\n              process.exit(1)\n            } else if (err instanceof EnvMissingError) {\n              this.logger.error(`missing ${envVar}`)\n              process.exit(1)\n            } else {\n              process.exit(1)\n            }\n          }\n        },\n      },\n    )\n  }\n\n  public getEnv(key: string): any {\n    return this.env[key]\n  }\n}\n","import { ContainerModule, interfaces } from 'inversify'\nimport { IMailService } from './interfaces/mail/mail.service'\nimport { MailService } from './mail/mail.service'\nimport { ConfigService } from './config/config.service'\nimport { COSSymbol } from '@flowda-projects/flowda-shared'\nimport { IConfigService } from './interfaces/config/config.service'\nimport {\n  COS,\n  WechatOAuth,\n  WechatOAuthFactorySymbol,\n  WechatOAuthSymbol,\n  WechatpayNodeV3,\n  WechatpayNodeV3FactorySymbol,\n  WechatpayNodeV3Symbol,\n} from '../legacy-libs'\n\nexport const flowdaInfraModule = new ContainerModule((bind: interfaces.Bind) => {\n  // 一些切面依赖暂时先放在这，应该放在基础设施层的，不过不强调过分学术的分层\n  // 现在分出 domain 层的目标主要是为了解决循环依赖\n  bind<IMailService>(IMailService).to(MailService).inSingletonScope()\n  bind<IConfigService>(IConfigService).to(ConfigService).inSingletonScope()\n\n  bind<typeof COS>(COSSymbol)\n    .toDynamicValue((context: interfaces.Context) => {\n      const config = context.container.get<IConfigService>(IConfigService)\n      return new COS({\n        SecretId: config.getEnv('TENCENT_SEC_ID'),\n        SecretKey: config.getEnv('TENCENT_SEC_KEY'),\n      })\n    })\n    .inSingletonScope()\n\n  bind<typeof WechatpayNodeV3>(WechatpayNodeV3Symbol)\n    .toDynamicValue((context: interfaces.Context) => {\n      const config = context.container.get<IConfigService>(IConfigService)\n      return new WechatpayNodeV3({\n        appid: config.getEnv('appid'),\n        mchid: config.getEnv('mchid'),\n        publicKey: Buffer.from(config.getEnv('apiclient_cert.pem'), 'utf-8'),\n        privateKey: Buffer.from(config.getEnv('apiclient_key.pem'), 'utf-8'),\n      })\n    })\n    .inSingletonScope()\n\n  bind<interfaces.Factory<typeof WechatpayNodeV3>>(WechatpayNodeV3FactorySymbol).toFactory<typeof WechatpayNodeV3, []>(\n    context => {\n      return () => context.container.get(WechatpayNodeV3Symbol)\n    },\n  )\n\n  bind<typeof WechatOAuth>(WechatOAuthSymbol)\n    .toDynamicValue((context: interfaces.Context) => {\n      const config = context.container.get<IConfigService>(IConfigService)\n      return new WechatOAuth(config.getEnv('freecharger_pc_appid'), config.getEnv('freecharger_pc_appSecret'))\n    })\n    .inSingletonScope()\n\n  bind<interfaces.Factory<typeof WechatOAuth>>(WechatOAuthFactorySymbol).toFactory<typeof WechatOAuth, []>(context => {\n    return () => context.container.get(WechatOAuthSymbol)\n  })\n})\n","export * from './flowdaInfra.module'\nexport * from './prismaClientFlowda.module'\nexport * from './interfaces/mail/mail.service'\nexport * from './interfaces/config/config.service'\n","export const IConfigService = Symbol.for('IConfigService')\n\nexport interface IConfigService {\n  getEnv(key: string): any\n}\n","import { TTemplateName } from '../../mail/templates'\n\nexport const IMailService = Symbol.for('IMailService')\nexport * from '../../mail/templates'\n\nexport type TSendEmailOptions = {\n  email: string\n  templateName: TTemplateName\n  params: any\n}\nexport interface IMailService {\n  sendLicense(email: string, license: string): Promise<void>\n  sendEmail(options: TSendEmailOptions): Promise<void>\n  legacySendEmail(email: string, subject: string, content: string): Promise<void>\n}\n\nexport interface IMailOptions {\n  /** The e-mail address of the sender. All e-mail addresses can be plain 'sender@server.com' or formatted 'Sender Name <sender@server.com>' */\n  from?: string | undefined\n  /** Comma separated list or an array of recipients e-mail addresses that will appear on the To: field */\n  to?: string | Array<string> | undefined\n  /** Comma separated list or an array of recipients e-mail addresses that will appear on the Cc: field */\n  cc?: string | Array<string> | undefined\n  /** Comma separated list or an array of recipients e-mail addresses that will appear on the Bcc: field */\n  bcc?: string | Array<string> | undefined\n  /** Comma separated list or an array of e-mail addresses that will appear on the Reply-To: field */\n  replyTo?: string | Array<string> | undefined\n  /** The message-id this message is replying */\n  inReplyTo?: string | undefined\n  /** Message-id list (an array or space separated string) */\n  references?: string | string[] | undefined\n  /** The subject of the e-mail */\n  subject?: string | undefined\n  /** The plaintext version of the message */\n  text?: string | undefined\n  /** The HTML version of the message */\n  html?: string | undefined\n}\n","import * as nodemailer from 'nodemailer'\nimport { inject, injectable } from 'inversify'\nimport { Logger } from '@nestjs/common'\nimport { IMailOptions, IMailService, TSendEmailOptions } from '../interfaces/mail/mail.service'\nimport { IConfigService } from '../interfaces/config/config.service'\nimport { render } from './templates'\n\n@injectable()\nexport class MailService implements IMailService {\n  private readonly logger = new Logger(MailService.name)\n\n  constructor(@inject(IConfigService) private config: IConfigService) {}\n\n  private getTransporter = () => {\n    return nodemailer.createTransport({\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore host 类型在 SMTPTransport 不存在？\n      host: this.config.getEnv('mail_smtp'),\n      port: this.config.getEnv('mail_smtp_port') as unknown as number,\n      secure: true,\n      auth: {\n        user: this.config.getEnv('mail_account'),\n        pass: this.config.getEnv('mail_secret'),\n      },\n    })\n  }\n\n  private async _sendMail(options: IMailOptions) {\n    const transporter = this.getTransporter()\n    try {\n      // SMTP 发信限制规则\n      // 发信频率（调用 SMTP 服务的整体频率）200 封/100 秒\n      // 单日发信上限（一个发件人单日发信上限） 450 封\n      await transporter.sendMail(options)\n    } catch (error) {\n      this.logger.error('send mail exception: ', error)\n      // TODO: Emergency Alert\n    }\n  }\n\n  async sendLicense(email: string, license: string): Promise<void> {\n    this.logger.log(`sending license ${email}`)\n    const { html, subject } = render('LICENSE', { license })\n\n    await this._sendMail({\n      from: this.config.getEnv('mail_account'),\n      to: email,\n      subject,\n      html,\n    })\n\n    // const transporter = this.getTransporter();\n    // await transporter.sendMail({\n    //   to: email,\n    //   from: '\"Support Team\" <support@webinfra.cloud>',\n    //   subject: 'Thank you for buying the nice product!',\n    //   text: ' Your license is\\n' + license,\n    // })\n  }\n\n  async sendEmail({ email, templateName, params }: TSendEmailOptions): Promise<void> {\n    this.logger.log(`sending email ${email}`)\n    const { html, subject } = render(templateName, params)\n\n    await this._sendMail({\n      from: this.config.getEnv('mail_account'),\n      to: email,\n      subject,\n      html,\n    })\n  }\n\n  async legacySendEmail(email: string, subject: string, content: string): Promise<void> {\n    this.logger.log(`sending email ${email}`)\n    const transporter = nodemailer.createTransport({\n      host: 'smtp.feishu.cn',\n      port: 465,\n      secure: true,\n      auth: {\n        user: this.config.getEnv('mail_account'),\n        pass: this.config.getEnv('mail_secret'),\n      },\n    })\n\n    await transporter.sendMail({\n      to: email,\n      from: '\"Support Team\" <qa@webinfra.cloud>',\n      subject: subject,\n      text: content,\n    })\n  }\n}\n","import readerTemplate from './reader'\nimport licenseTemplate from './license'\n\nconst templateMap = {\n  COLLECT: readerTemplate,\n  LICENSE: licenseTemplate,\n}\n\nexport type TTemplateName = keyof typeof templateMap\n\nexport const render = (name: TTemplateName, params: any) => {\n  const templateFn = templateMap[name]\n  if (!templateFn) {\n    throw new Error(`Email Template(${name}) not found`)\n  }\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const render = templateFn.render\n  const html = render(params)\n  const subject = templateFn.renderSubject(params)\n  return {\n    html,\n    subject,\n  }\n}\n","const render = (params: any) => {\n  const { license } = params\n  if (!license) {\n    throw new Error('No license for email')\n  }\n  return `<html>\n  <head>\n    <title>Email Confirmation</title>\n\n    <style type=\"text/css\">\n      @media screen {\n        @font-face {\n          font-family: 'Source Sans Pro';\n          font-style: normal;\n          font-weight: 400;\n          src: local('Source Sans Pro Regular'), local('SourceSansPro-Regular'), url(https://fonts.gstatic.com/s/sourcesanspro/v10/ODelI1aHBYDBqgeIAH2zlBM0YzuT7MdOe03otPbuUS0.woff) format('woff');\n        }\n\n        @font-face {\n          font-family: 'Source Sans Pro';\n          font-style: normal;\n          font-weight: 700;\n          src: local('Source Sans Pro Bold'), local('SourceSansPro-Bold'), url(https://fonts.gstatic.com/s/sourcesanspro/v10/toadOcfmlt9b38dHJxOBGFkQc6VGVFSmCnC_l7QZG60.woff) format('woff');\n        }\n      }\n\n      /**\n       * Avoid browser level font resizing.\n       * 1. Windows Mobile\n       * 2. iOS / OSX\n       */\n      body,\n      table,\n      td,\n      a {\n        -ms-text-size-adjust: 100%;\n        /* 1 */\n        -webkit-text-size-adjust: 100%;\n        /* 2 */\n      }\n\n      /**\n       * Remove extra space added to tables and cells in Outlook.\n       */\n      table,\n      td {\n        mso-table-rspace: 0pt;\n        mso-table-lspace: 0pt;\n      }\n\n      /**\n       * Better fluid images in Internet Explorer.\n       */\n      img {\n        -ms-interpolation-mode: bicubic;\n      }\n\n      /**\n       * Remove blue links for iOS devices.\n       */\n      a[x-apple-data-detectors] {\n        font-family: inherit !important;\n        font-size: inherit !important;\n        font-weight: inherit !important;\n        line-height: inherit !important;\n        color: inherit !important;\n        text-decoration: none !important;\n      }\n\n      /**\n       * Fix centering issues in Android 4.4.\n       */\n      div[style*=\"margin: 16px 0;\"] {\n        margin: 0 !important;\n      }\n\n      body {\n        width: 100% !important;\n        height: 100% !important;\n        padding: 0 !important;\n        margin: 0 !important;\n      }\n\n      /**\n       * Collapse table borders to avoid space between cells.\n       */\n      table {\n        border-collapse: collapse !important;\n      }\n\n      a {\n        color: #1a82e2;\n      }\n\n      img {\n        height: auto;\n        line-height: 100%;\n        text-decoration: none;\n        border: 0;\n        outline: none;\n      }\n    </style>\n\n    <style>\n      @font-face {\n        font-family: 'Open Sans Regular';\n        font-style: normal;\n        font-weight: 400;\n        src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-regular.woff');\n      }\n    </style>\n    <style>\n      @font-face {\n        font-family: 'Open Sans Bold';\n        font-style: normal;\n        font-weight: 800;\n        src: url('chrome-extension://gkkdmjjodidppndkbkhhknakbeflbomf/fonts/open_sans/open-sans-v18-latin-800.woff');\n      }\n    </style>\n    <base target=\"_blank\">\n  </head>\n\n  <body style=\"background-color: #e9ecef;\">\n\n\n    <div class=\"preheader\" style=\"display: none; max-width: 0; max-height: 0; overflow: hidden; font-size: 1px; line-height: 1px; color: #fff; opacity: 0;\">\n      A preheader is the short summary text that follows the subject line when an email is viewed in the inbox.\n    </div>\n\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n\n      <tbody>\n        <tr>\n          <td align=\"center\" bgcolor=\"#e9ecef\">\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 600px;\">\n              <tbody>\n                <tr>\n                  <td align=\"center\" valign=\"top\" style=\"padding: 36px 24px;\">\n                    <a href=\"https://reader.webinfra.cloud\" style=\"display: inline-block;\">\n                      <img src=\"data:image/png;base64,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\" alt=\"Logo\" border=\"0\" width=\"48\" style=\"display: block; width: 48px; max-width: 48px; min-width: 48px;\">\n                    </a>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </td>\n        </tr>\n\n        <tr>\n          <td align=\"center\" bgcolor=\"#e9ecef\">\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 600px;\">\n              <tbody>\n                <tr>\n                  <td align=\"left\" bgcolor=\"#ffffff\" style=\"padding: 36px 24px 0; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; border-top: 3px solid #d4dadf;\">\n                    <h1 style=\"margin: 0; font-size: 32px; font-weight: 700; letter-spacing: -1px; line-height: 48px;\">请查收您的License</h1>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n\n          </td>\n        </tr>\n        <tr>\n          <td align=\"center\" bgcolor=\"#e9ecef\">\n\n            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"max-width: 600px;\">\n\n\n              <tbody>\n                <tr>\n                  <td align=\"left\" bgcolor=\"#ffffff\" style=\"padding: 24px; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 24px;\">\n                    <p style=\"margin: 0;\">该 license 作为您 FreeSaver 账户的唯一标志，请妥善保管</p>\n                  </td>\n                </tr>\n\n\n\n                <tr>\n                  <td align=\"left\" bgcolor=\"#ffffff\">\n                    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\">\n                      <tbody>\n                        <tr>\n                          <td align=\"center\" bgcolor=\"#ffffff\" style=\"padding: 12px;\">\n                            <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\n                              <tbody>\n                                <tr>\n                                  <td align=\"center\" bgcolor=\"#1a82e2\" style=\"border-radius: 6px;\">\n                                    <a style=\"display: inline-block; padding: 16px 36px; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 16px; color: #ffffff; text-decoration: none; border-radius: 6px;\">\n                                    ${license}\n                                    </a>\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </td>\n                </tr>\n\n                <tr>\n                  <td align=\"left\" bgcolor=\"#ffffff\" style=\"padding: 24px; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 24px;\">\n                    <p style=\"margin: 0;\">如有遗失，可点击下方链接申请重新生成 license，本邮箱会收到生成新的 license，原 license 则作废</p>\n                    <p style=\"margin: 0;\"><a href=\"https://pay.xiaolizupai.com/?id=hlaemjfdnknpdlpgcpmigacmpieofedl\">请至登录界面选择 忘记License</a></p>\n                  </td>\n                </tr>\n\n                <tr>\n                  <td align=\"left\" bgcolor=\"#ffffff\" style=\"padding: 24px; font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif; font-size: 16px; line-height: 24px; border-bottom: 3px solid #d4dadf\">\n                    <p style=\"margin: 0;\">Cheers,<br>FreeSaver</p>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </body>\n\n  </html>`\n}\n\nconst renderSubject = () => {\n  return 'FreeSaver License'\n}\n\nexport default {\n  render,\n  renderSubject,\n}\n","const render = (params: any) => {\n  const { previewUrl, collectionUrl } = params || {}\n  return `<html lang=\"en\"><head>\n    <title></title>\n    <meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\n    <meta content=\"width=device-width, initial-scale=1.0\" name=\"viewport\">\n    <style>\n        * {\n          box-sizing: border-box;\n        }\n\n        body {\n          margin: 0;\n          padding: 0;\n        }\n\n        a[x-apple-data-detectors] {\n          color: inherit !important;\n          text-decoration: inherit !important;\n        }\n\n        #MessageViewBody a {\n          color: inherit;\n          text-decoration: none;\n        }\n\n        p {\n          line-height: inherit\n        }\n\n        .desktop_hide,\n        .desktop_hide table {\n          mso-hide: all;\n          display: none;\n          max-height: 0px;\n          overflow: hidden;\n        }\n\n        @media (max-width:660px) {\n          .desktop_hide table.icons-inner {\n            display: inline-block !important;\n          }\n\n          .icons-inner {\n            text-align: center;\n          }\n\n          .icons-inner td {\n            margin: 0 auto;\n          }\n\n          .image_block img.big,\n          .row-content {\n            width: 100% !important;\n          }\n\n          .mobile_hide {\n            display: none;\n          }\n\n          .stack .column {\n            width: 100%;\n            display: block;\n          }\n\n          .mobile_hide {\n            min-height: 0;\n            max-height: 0;\n            max-width: 0;\n            overflow: hidden;\n            font-size: 0px;\n          }\n\n          .desktop_hide,\n          .desktop_hide table {\n            display: table !important;\n            max-height: none !important;\n          }\n        }\n      </style>\n    </head>\n    <body style=\"background-color: #f3f2f3; margin: 0; padding: 0; -webkit-text-size-adjust: none; text-size-adjust: none;\">\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"nl-container\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f3f2f3;\" width=\"100%\">\n    <tbody>\n    <tr>\n    <td>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row row-1\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody>\n    <tr>\n    <td>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row row-2\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody>\n    <tr>\n    <td>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row row-2\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody>\n    <tr>\n    <td>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row-content stack\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #ffffff; color: #000000; width: 640px;\" width=\"640\">\n    <tbody>\n    <tr>\n    <td class=\"column column-1\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 48px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;\" width=\"33.333333333333336%\">\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"empty_block block-2\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"padding-right:0px;padding-bottom:0px;padding-left:0px;padding-top:33px;\">\n    <div></div>\n    </td>\n    </tr>\n    </tbody></table>\n    </td>\n    <td class=\"column column-2\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;\" width=\"33.333333333333336%\">\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"empty_block block-2\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\">\n    <div></div>\n    </td>\n    </tr>\n    </tbody></table>\n    </td>\n    <td class=\"column column-3\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; padding-left: 48px; vertical-align: top; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;\" width=\"33.333333333333336%\">\n    <div class=\"spacer_block\" style=\"height:5px;line-height:5px;font-size:1px;\">&hairsp;</div>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"divider_block block-2 mobile_hide\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"padding-left:10px;padding-right:10px;padding-top:30px;\">\n    <div align=\"center\" class=\"alignment\">\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"divider_inner\" style=\"font-size: 1px; line-height: 1px; border-top: 0px solid #BBBBBB;\"><span>&hairsp;</span></td>\n    </tr>\n    </tbody></table>\n    </div>\n    </td>\n    </tr>\n    </tbody></table>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"text_block block-3\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"padding-bottom:33px;\">\n    <div style=\"font-family: sans-serif\">\n    <div class=\"\" style=\"font-size: 12px; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; mso-line-height-alt: 21.6px; color: #555555; line-height: 1.8;\">\n    <p style=\"margin: 0; font-size: 14px; text-align: left; mso-line-height-alt: 25.2px;\"><span style=\"color:#2a272b;\"><strong>FreeSaver</strong></span></p>\n    </div>\n    </div>\n    </td>\n    </tr>\n    </tbody></table>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row row-3\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody>\n    <tr>\n    <td>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row-content stack\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #f3f2f3; color: #000000; width: 640px;\" width=\"640\">\n    <tbody>\n    <tr>\n    <td class=\"column column-1\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding-top: 0px; padding-bottom: 0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;\" width=\"100%\">\n    <div class=\"spacer_block\" style=\"height:1px;line-height:1px;font-size:1px;\">&hairsp;</div>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row row-4\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody>\n    <tr>\n    <td>\n    <table align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"row-content stack\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; background-color: #ffffff; background-image: url('images/bg-shade.jpg'); background-position: center top; background-repeat: repeat; color: #000000; width: 640px;\" width=\"640\">\n    <tbody>\n    <tr>\n    <td class=\"column column-1\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; font-weight: 400; text-align: left; vertical-align: top; padding-bottom: 0px; border-top: 0px; border-right: 0px; border-bottom: 0px; border-left: 0px;\" width=\"100%\">\n\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"divider_block block-2 mobile_hide\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"padding-top:50px;\">\n    <div align=\"center\" class=\"alignment\">\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"divider_inner\" style=\"font-size: 1px; line-height: 1px; border-top: 0px solid #BBBBBB;\"><span>&hairsp;</span></td>\n    </tr>\n    </tbody></table>\n    </div>\n    </td>\n    </tr>\n    </tbody></table>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"text_block block-3\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\">\n    <div style=\"font-family: sans-serif\">\n    <div class=\"\" style=\"font-size: 12px; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; mso-line-height-alt: 14.399999999999999px; color: #555555; line-height: 1.2;\">\n    <p style=\"margin: 0; font-size: 16px; text-align: center; mso-line-height-alt: 19.2px;\"><a style=\"color:#004afd;\" href=\"${previewUrl}\"><strong>点击预览</strong></a></p>\n    </div>\n    </div>\n    </td>\n    </tr>\n    </tbody></table>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"text_block block-4\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"padding-bottom:15px;padding-left:38px;padding-right:38px;padding-top:20px;\">\n    </td>\n    </tr>\n    </tbody></table>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"text_block block-5\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt; word-break: break-word;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"padding-bottom:10px;padding-left:38px;padding-right:38px;padding-top:10px;\">\n    <div style=\"font-family: sans-serif\">\n    <div class=\"\" style=\"font-size: 12px; font-family: Helvetica Neue, Helvetica, Arial, sans-serif; mso-line-height-alt: 18px; color: #555555; line-height: 1.5;\">\n    <p style=\"margin: 0; text-align: center; mso-line-height-alt: 24px;\"><span style=\"font-size:16px;color:#2a272b;\">欢迎使用<strong>FreeSaver</strong>，一键收藏即可分享</span></p>\n    <p style=\"margin: 0; text-align: center; mso-line-height-alt: 24px;\"><span style=\"font-size:16px;color:#2a272b;\">再也不用担心收藏夹的网页内容丢失了</span></p>\n    <p style=\"margin: 0; mso-line-height-alt: 18px;\">&nbsp;</p>\n    </div>\n    </div>\n    </td>\n    </tr>\n    </tbody></table>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"button_block block-6\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"text-align:center;\">\n    <div align=\"center\" class=\"alignment\">\n    <a href=${collectionUrl} style=\"text-decoration:none;display:inline-block;color:#ffffff;background-color:#004afd;border-radius:60px;width:auto;border-top:0px solid transparent;font-weight:400;border-right:0px solid transparent;border-bottom:0px solid transparent;border-left:0px solid transparent;padding-top:12px;padding-bottom:16px;font-family:Helvetica Neue, Helvetica, Arial, sans-serif;font-size:16px;text-align:center;mso-border-alt:none;word-break:keep-all;\" target=\"_blank\"><span style=\"padding-left:32px;padding-right:32px;font-size:16px;display:inline-block;letter-spacing:normal;\"><span dir=\"ltr\" style=\"margin: 0; word-break: break-word; line-height: 32px; color: #fff; text-decoration: none;\"><strong>查看收藏列表</strong></span></span></a>\n    <!--[if mso]></center></v:textbox></v:roundrect><![endif]-->\n    </div>\n    </td>\n    </tr>\n    </tbody></table>\n    <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" class=\"image_block block-7\" role=\"presentation\" style=\"mso-table-lspace: 0pt; mso-table-rspace: 0pt;\" width=\"100%\">\n    <tbody><tr>\n    <td class=\"pad\" style=\"width:100%;padding-right:0px;padding-left:0px;\">\n    <div align=\"center\" class=\"alignment\" style=\"line-height:10px\"><img alt=\"Image\" class=\"big\" src=\"data:image/png;base64,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\" style=\"display: block; height: auto; border: 0; width: 640px; max-width: 100%;\" title=\"Image\" width=\"640\"></div>\n    </td>\n    </tr>\n    </tbody></table>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </td>\n    </tr>\n    </tbody>\n    </table>\n    </td>\n    </tr>\n    </tbody>\n    </table><!-- End -->\n\n    </body></html>\n  `\n}\n\nconst renderSubject = (params: any) => {\n  return 'FreeSaver 收藏提醒'\n}\n\nexport default {\n  render,\n  renderSubject,\n}\n","import { ContainerModule, interfaces } from 'inversify'\nimport { PrismaClient } from '@prisma/client-v1-flowda'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\n\nconst prisma = new PrismaClient({\n  // log: ['query', 'info', 'warn', 'error'],\n})\n\nexport const prismaClientFlowdaModule = new ContainerModule((bind: interfaces.Bind) => {\n  bind<PrismaClient>(PrismaClientSymbol).toConstantValue(prisma)\n})\n","/* eslint-disable @typescript-eslint/no-var-requires */\n\nconst cuid = require('cuid')\nconst WechatOAuth = require('wechat-oauth')\nexport const WechatOAuthSymbol = Symbol.for('WechatOAuth')\nexport const WechatOAuthFactorySymbol = Symbol.for('WechatOAuthFactory')\nconst dayjs = require('dayjs')\nconst utc = require('dayjs/plugin/utc')\nconst timezone = require('dayjs/plugin/timezone')\nconst advancedFormat = require('dayjs/plugin/advancedFormat')\nconst WechatpayNodeV3 = require('wechatpay-node-v3')\nexport const WechatpayNodeV3Symbol = Symbol.for('WechatpayNodeV3Symbol')\nexport const WechatpayNodeV3FactorySymbol = Symbol.for('WechatpayNodeV3FactorySymbol')\nconst COS = require('cos-nodejs-sdk-v5')\n\nexport { cuid, WechatOAuth, dayjs, utc, timezone, advancedFormat, WechatpayNodeV3, COS }\n","import { inject, injectable } from 'inversify'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { LoggerService } from '@nestjs/common'\nimport * as db from '@prisma/client-v1-flowda'\nimport * as jwt from 'jsonwebtoken'\nimport { IConfigService } from '../../infra'\nimport { AppUpdateDto } from './dto/dto'\nimport { JwtPayload } from 'jsonwebtoken'\n\n@injectable()\nexport class AppService {\n  private readonly logger\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject(IConfigService) protected config: IConfigService,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(AppService.name)\n  }\n\n  async findAll() {\n    const apps = await this.prisma.app.findMany({ where: { isDeleted: false } })\n    return apps.map(app => ({\n      ...app,\n      appToken: this.decode(app.hashedAppToken),\n    }))\n  }\n\n  findByTenantId(tenantId: string) {\n    // todo: 租户id\n    return this.prisma.app\n      .findMany({\n        where: {\n          tenantId: tenantId,\n        },\n      })\n      .then(list => {\n        return list.map((item: any) => {\n          if (item.hashedAppToken) {\n            const token = this.decode(item.hashedAppToken)\n            item.appToken = token\n          }\n          return item\n        })\n      })\n  }\n\n  async update(toApp: AppUpdateDto): Promise<db.App> {\n    const app = await this.prisma.app.update({\n      where: {\n        id: toApp.id,\n      },\n      data: {\n        displayName: toApp.displayName,\n        description: toApp.description,\n      },\n    })\n    return app\n  }\n\n  async findById(id: string): Promise<(db.App & { appToken: string }) | null> {\n    const app = await this.prisma.app.findFirst({\n      where: {\n        id: id,\n        isDeleted: false,\n      },\n    })\n    if (app === null) {\n      return null\n    }\n\n    const nextApp: any = app as db.App & { appToken: string }\n    nextApp.appToken = this.decode(app.hashedAppToken)\n    return nextApp\n  }\n\n  private decode(token: string | null): string | null {\n    if (!token) {\n      return null\n    }\n    const decode = jwt.verify(token, this.config.getEnv('app_token_secret')) as any\n    return decode.appToken\n  }\n}\n","import { inject, injectable, named, postConstruct } from 'inversify'\nimport {\n  AuthenticationError,\n  IdentityProviderServiceSymbol,\n  IIdentityProviderService,\n} from '@flowda-projects/v1-flowda-types'\nimport { FlowdaTrpcClientSymbol, PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { JwtService } from '../jwt/jwt.service'\nimport { IConfigService, IMailService } from '../../infra'\nimport { App, PrismaClient } from '@prisma/client-v1-flowda'\nimport { AuthenticationService, excludedIdentity, TExcludedIdentity } from '../authentication/authentication.service'\nimport keymachine from 'keymachine'\nimport * as bcrypt from 'bcrypt'\nimport { AppRegisterResDto } from './dto/appRegisterRes.dto'\nimport { AppCreateDto } from './dto/dto'\nimport { SignupDto } from './dto/signup.dto'\nimport { CreateTRPCProxyClient } from '@trpc/client'\nimport { AppRouter } from '@flowda-projects/flowda-services-trpc-server'\n\n@injectable()\nexport class AppAuthService extends AuthenticationService<App> {\n  constructor(\n    @inject(IdentityProviderServiceSymbol)\n    @named('app')\n    protected identityProvider: IIdentityProviderService<App>,\n    @inject(JwtService) protected jwt: JwtService,\n    @inject(IConfigService) protected config: IConfigService,\n    @inject(IMailService) protected mailService: IMailService,\n    @inject(PrismaClientSymbol) protected prisma: PrismaClient,\n    @inject(FlowdaTrpcClientSymbol) private flowdaTrpc: CreateTRPCProxyClient<AppRouter>,\n  ) {\n    super(identityProvider, jwt, config, mailService)\n  }\n\n  @postConstruct()\n  postConstruct() {\n    this.setOptions({\n      access_token_secret: this.config.getEnv('app_access_token_secret'),\n      refresh_token_secret: this.config.getEnv('app_refresh_token_secret'),\n      access_token_expire: this.config.getEnv('app_access_token_expire'),\n      refresh_token_expire: this.config.getEnv('app_refresh_token_expire'),\n    })\n  }\n\n  async create(dto: AppCreateDto): Promise<AppRegisterResDto> {\n    const randomAppId = this.generateRandomUppercaseLetter(4)\n    const randomAppToken = keymachine()\n    const user = await this.signup(\n      {\n        name: randomAppId,\n        password: randomAppToken,\n        tenantId: dto.tenantId,\n      },\n      dto,\n    )\n\n    return {\n      id: user.id,\n      appId: user.name,\n      appToken: randomAppToken, // appToken 虽然是密码，但是需要返回给前台\n      displayName: user.displayName,\n      description: user.description,\n    }\n  }\n\n  public async validate(appId: string, appToken: string) {\n    const tokens = await super.validateUserReturnTokens('name', appId, appToken)\n    return {\n      at: tokens.at,\n      rt: tokens.rt,\n      expireAt: tokens.expireAt,\n      app: tokens.user,\n    }\n  }\n\n  public async validateV4(appId: string, appToken: string) {\n    const tenant = await this.flowdaTrpc.user.getTenantByName.query({\n      tenantName: appId,\n    })\n    const { at, exp } = this.jwt.generateAccessToken(String(tenant.id), {\n      secret: this.options.access_token_secret,\n      exp: this.options.access_token_expire,\n    })\n    return {\n      at,\n      rt: null,\n      app: this.v4ConvertTo(tenant),\n      expireAt: exp,\n    }\n  }\n\n  /**\n   * 映射 tenant -> 和原来的 app 表\n   * @param tenant\n   * @private\n   */\n  private v4ConvertTo(tenant: any) {\n    return {\n      id: tenant.id,\n      name: tenant.name,\n      displayName: tenant.name,\n      description: tenant.name,\n    }\n  }\n\n  async getUserV4(userId: string): Promise<any> {\n    this.logger.debug!(`[getUserV4] userId ${userId}`)\n    const tenant = await this.flowdaTrpc.user.getTenant.query({\n      tid: Number(userId),\n    })\n    if (!tenant) {\n      throw new AuthenticationError.AccountNotFound()\n    }\n    return this.v4ConvertTo(tenant)\n  }\n\n  async appRefreshToken(rt: string): Promise<{ at: string; expireAt: number; app: TExcludedIdentity<App> }> {\n    const ret = await super.refreshToken(rt)\n    return {\n      at: ret.at,\n      expireAt: ret.expireAt,\n      app: ret.user,\n    }\n  }\n\n  async signup(dto: SignupDto, extraFields: Record<string, any> = {}): Promise<TExcludedIdentity<App>> {\n    const app = await this.identityProvider.find({\n      name: dto.name,\n      tenantId: dto.tenantId,\n    })\n    if (app) {\n      throw new AuthenticationError.AccountNameAlreadyExists()\n    }\n\n    let hashedPassword: string | null = null\n    if (dto.password) {\n      // todo: 先不做验证这一步，邮箱需要，但是微信/手机号不需要\n      hashedPassword = await bcrypt.hash(dto.password, 10)\n    }\n\n    // const { password, ...rest } = dto // 删除 password\n    const a = {\n      ...dto, // 所有属性（除 password），identity 和非 identity 属性透传，这样子类可以按需保存\n      hashedPassword: hashedPassword,\n      hashedRefreshToken: null,\n      recoveryCode: null,\n      recoveryToken: null,\n      ...extraFields,\n    }\n    const newApp = await this.identityProvider.create(a)\n\n    return excludedIdentity<App>(newApp)\n  }\n}\n","export type AppRegisterResDto = {\n  id: string\n  appId: string\n  appToken: string\n  displayName: string\n  description: string | null\n}\n","import { createZodDto } from 'nestjs-zod'\nimport { JSONSchema } from 'class-validator-jsonschema'\nimport { IsOptional } from 'class-validator'\nimport { AppSchema } from '@flowda-projects/v1-prisma-flowda'\nimport { meta } from '@flowda-projects/flowda-shared'\n\nconst appCreateUpdateMeta = {\n  extends: 'AppSchema',\n  columns: [\n    { name: 'displayName' },\n    {\n      name: 'description',\n      column_type: 'textarea',\n      validators: [\n        {\n          format: '^[\\\\w.%+-]+@[a-zA-Z0-9.-]+\\\\.[a-zA-Z]{2,}$',\n          message: 'invalid email',\n        },\n      ],\n    },\n  ],\n}\n\nconst AppCreateSchema = AppSchema.pick({\n  displayName: true,\n  description: true,\n  tenantId: true,\n}).extend({\n  __meta: meta(appCreateUpdateMeta),\n})\n\n// todo: updateSchema 前端已经不需要，但是 nestjs DTO 暂时还需要\n// todo: createZodDto 可以读取 floSchema\nconst AppUpdateSchema = AppSchema.pick({\n  id: true,\n  displayName: true,\n  description: true,\n})\n  .partial()\n  .extend({\n    __meta: meta(appCreateUpdateMeta),\n  })\n\nexport class AppUpdateDto extends createZodDto(AppUpdateSchema) {}\n\n// todo: 尽量全部走 zod 定义了，这样 zod 还能前后端 share 类型\n// 也就是放弃使用 class validator 了\nexport class AppCreateDto extends createZodDto(AppCreateSchema) {\n  @IsOptional()\n  @JSONSchema({\n    description: 'test',\n  })\n  displayName: string\n}\n","import { SignupDto } from './dto/signup.dto'\nimport { AuthenticationError, IIdentity, IIdentityProviderService } from '@flowda-projects/v1-flowda-types'\nimport * as bcrypt from 'bcrypt'\nimport { JwtService } from '../jwt/jwt.service'\nimport { IConfigService, IMailService } from '../../infra/index'\nimport { injectable } from 'inversify'\nimport type { JwtPayload } from 'jsonwebtoken'\nimport { Logger } from '@nestjs/common'\nimport { GenerateRecoveryCodeDto } from './dto/generateRecoveryCode.dto'\nimport keymachine from 'keymachine'\nimport { ResetPasswordDto } from './dto/resetPassword.dto'\n\nexport type TAuthOptions = {\n  access_token_secret: string\n  refresh_token_secret: string\n  access_token_expire: number\n  refresh_token_expire: number\n}\n\n/**\n * 为了保证 nest module 和 inversify 配合简单，需要将 auth service 降为 base class\n * 新建3个 child 来 bind\n * 但是如果全部用 inverisfy 本质上是想实现：\n * AppController -> @someDecorator('tenant') AuthService -> IdentityProvider<Tenant>\n *   bind(IdentityProvider).to(TenantIdentityProvider).when(request -> request.parent.target === 'tenant')\n * 似乎也有些复杂了。用 child class 直观，代码虽然多了点，但是合理，否则就会有 leaky abstraction\n * 经验总结：先完成任务，再提取（重构），否则写起来畏手畏脚\n *\n *\n * todo: 将 parent class 的某些行为移动到需要的 child class 里\n * 所以还有一种做法是做 composition，但是 identityProvider 需要手动 set property（相当于策略模式）\n * 但是 base class 相对简单，可以认为是重构的第一步。重构需要渐进\n */\n@injectable()\nexport abstract class AuthenticationService<T extends IIdentity> {\n  protected readonly logger = new Logger(AuthenticationService.name)\n  protected options: TAuthOptions\n\n  constructor(\n    protected identityProvider: IIdentityProviderService<T>,\n    protected jwt: JwtService,\n    protected config: IConfigService,\n    protected mailService: IMailService,\n  ) {}\n\n  protected setOptions(options: TAuthOptions) {\n    this.options = options\n  }\n\n  async signup(dto: SignupDto, extraFields: Record<string, any> = {}): Promise<TExcludedIdentity<T>> {\n    const user = await this.identityProvider.find({\n      name: dto.name,\n    })\n    if (user) {\n      throw new AuthenticationError.AccountNameAlreadyExists()\n    }\n\n    let hashedPassword: string | null = null\n    if (dto.password) {\n      // todo: 先不做验证这一步，邮箱需要，但是微信/手机号不需要\n      hashedPassword = await bcrypt.hash(dto.password, 10)\n    }\n\n    // const { password, ...rest } = dto // 删除 password\n    const a = {\n      ...dto, // 所有属性（除 password），identity 和非 identity 属性透传，这样子类可以按需保存\n      hashedPassword: hashedPassword,\n      hashedRefreshToken: null,\n      recoveryCode: null,\n      recoveryToken: null,\n      ...extraFields,\n    }\n    const newUser = await this.identityProvider.create(a)\n\n    return excludedIdentity<T>(newUser)\n  }\n\n  async validateUser(\n    nameField: 'email' | 'name',\n    name: string,\n    password?: string,\n  ): Promise<TExcludedIdentityAndRefreshToken> {\n    const user = await this.doValidateUser(nameField, name, password)\n    return excludedIdentityAndRefreshToken(user)\n  }\n\n  async validateUserReturnTokens(\n    nameField: string,\n    name: string,\n    password?: string,\n  ): Promise<{\n    at: string\n    rt: string\n    user: TExcludedIdentityAndRefreshToken\n    expireAt: number\n  }> {\n    const user = await this.doValidateUser(nameField, name, password)\n    const { at, exp } = this.jwt.generateAccessToken(user.id, {\n      secret: this.options.access_token_secret,\n      exp: this.options.access_token_expire,\n    })\n    return {\n      at,\n      rt: user.refreshToken,\n      user: excludedIdentityAndRefreshToken(user),\n      expireAt: exp,\n    }\n  }\n\n  /**\n   * 由服务端将 jwt 存在 cookie 里（而不是客户端拿到 access token 自己负责存储），适合 web 端应用，API 的话得自己想办法存\n   * 但是要处理，跨域 cookie\n   * e.g response.setHeader('Set-Cookie', cookie)\n   */\n  getCookieWithJwtToken(userId: string) {\n    const { at, rt } = this.getTokens(userId)\n    return [\n      `Authentication=${at}; HttpOnly; Path=/; Max-Age=${this.options.access_token_expire}`,\n      `Refresh=${rt}; HttpOnly; Path=/; Max-Age=${this.options.refresh_token_expire}`,\n    ]\n  }\n\n  getTokens(userId: string) {\n    const { at } = this.jwt.generateAccessToken(userId, {\n      secret: this.options.access_token_secret,\n      exp: this.options.access_token_expire,\n    })\n    const { rt } = this.jwt.generateRefreshToken(userId, {\n      secret: this.options.refresh_token_secret,\n      exp: this.options.refresh_token_expire,\n    })\n    return { at, rt }\n  }\n\n  async logout(userId: string) {\n    await this.logoutApi(userId)\n    return ['Authentication=; HttpOnly; Path=/; Max-Age=0', 'Refresh=; HttpOnly; Path=/; Max-Age=0']\n  }\n\n  async getUser(userId: string): Promise<TExcludedIdentity> {\n    const user = await this.identityProvider.find({ id: userId })\n    if (!user) {\n      throw new AuthenticationError.AccountNotFound()\n    }\n    return excludedIdentity(user)\n  }\n\n  async logoutApi(userId: string): Promise<void> {\n    const user = await this.identityProvider.find({ id: userId })\n    if (!user) {\n      throw new AuthenticationError.AccountNotFound()\n    }\n    const data = {\n      ...user,\n      hashedRefreshToken: null,\n    }\n    await this.identityProvider.update(data)\n  }\n\n  getAccessTokenSecret() {\n    return this.options.access_token_secret\n  }\n\n  private async doValidateUser(\n    nameField: string,\n    name: string,\n    password?: string,\n  ): Promise<IIdentity & { refreshToken: string }> {\n    const user = await this.identityProvider.find({\n      [nameField]: name,\n    })\n    if (!user) {\n      throw new AuthenticationError.UserNamePasswordMismatch()\n    }\n\n    // 微信登录可以不用校验密码\n    if (password != null) {\n      if (!user.hashedPassword) {\n        throw new AuthenticationError.NotInitPassword()\n      }\n\n      const match = await bcrypt.compare(password, user.hashedPassword)\n      if (!match) {\n        throw new AuthenticationError.UserNamePasswordMismatch()\n      }\n    }\n\n    const { rt } = this.jwt.generateRefreshToken(user.id, {\n      secret: this.options.refresh_token_secret,\n      exp: this.options.refresh_token_expire,\n    })\n    const hash = await bcrypt.hash(rt, 10)\n    user.hashedRefreshToken = hash\n    const updatedUser = await this.identityProvider.update(user)\n    // db 不要明文存 refresh token，但是 refresh token 要返回给 client\n    return {\n      ...user,\n      refreshToken: rt,\n    }\n  }\n\n  async refreshToken(rt: string): Promise<{ at: string; expireAt: number; user: TExcludedIdentity<T> }> {\n    let decodedToken: JwtPayload\n    try {\n      decodedToken = this.jwt.verifyRefreshToken(rt, {\n        secret: this.options.refresh_token_secret,\n      })\n    } catch (error) {\n      throw new AuthenticationError.InvalidToken()\n    }\n    const uid = decodedToken.uid\n    const user = await this.identityProvider.find({ id: uid })\n    if (!user) {\n      this.logger.error('cannot find uid')\n      throw new AuthenticationError.InvalidToken()\n    }\n    if (user.hashedRefreshToken == null) {\n      throw new AuthenticationError.NullRefreshToken()\n    }\n    const match = await bcrypt.compare(rt, user.hashedRefreshToken)\n    if (!match) {\n      throw new AuthenticationError.InvalidToken()\n    }\n    const { at, exp } = this.jwt.generateAccessToken(user.id, {\n      secret: this.options.access_token_secret,\n      exp: this.options.access_token_expire,\n    })\n    return { at, expireAt: exp, user: excludedIdentity(user) }\n  }\n\n  async generateRecoveryCode(dto: GenerateRecoveryCodeDto) {\n    const user = await this.identityProvider.find({\n      appId: dto.appId,\n      email: dto.email,\n    })\n    if (!user) {\n      throw new AuthenticationError.AccountNotFound()\n    }\n\n    const recoveryToken = this.jwt.generateRecoveryToken(dto.email, {\n      secret: this.options.access_token_secret,\n    })\n    // token 过长，关联一个 code 发到邮箱里\n    const recoveryCode = this.generateRandomUppercaseLetter()\n    user.recoveryToken = recoveryToken\n    user.recoveryCode = recoveryCode\n    await this.identityProvider.update(user)\n    await this.mailService.legacySendEmail(dto.email, 'sdk customer recovery code', recoveryCode)\n    return {\n      recoveryCode,\n    }\n  }\n\n  async resetPassword(dto: ResetPasswordDto): Promise<TExcludedIdentity<T>> {\n    const user = await this.identityProvider.find({\n      appId: dto.appId,\n      recoveryCode: dto.recoveryCode,\n    })\n    if (!user) {\n      throw new AuthenticationError.InvalidRecoveryCode()\n    }\n    const recoveryToken = user.recoveryToken\n    if (recoveryToken == null) {\n      throw new AuthenticationError.InvalidRecoveryCode()\n    }\n    let decodedToken\n    try {\n      decodedToken = this.jwt.verifyRecoveryToken(recoveryToken, {\n        secret: this.options.access_token_secret,\n      })\n    } catch (error) {\n      throw new AuthenticationError.InvalidRecoveryCode()\n    }\n    if (!decodedToken.verificationToken) {\n      throw new AuthenticationError.InvalidRecoveryCode()\n    }\n\n    const hash = await bcrypt.hash(dto.password, 10)\n    user.hashedPassword = hash\n    user.hashedRefreshToken = null\n    user.recoveryCode = null\n    user.recoveryToken = null\n    await this.identityProvider.update(user)\n    return excludedIdentity(user)\n  }\n\n  generateRandomUppercaseLetter(len = 6) {\n    return keymachine({\n      possibility: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',\n      length: len,\n      case: 'upper',\n    })\n  }\n}\n\nexport function exclude<Clazz, Key extends keyof Clazz>(clazz: Clazz, keys: Key[]): Omit<Clazz, Key> {\n  for (const key of keys) {\n    delete clazz[key]\n  }\n  return clazz\n}\n\nexport function excludedIdentityAndRefreshToken(user: IIdentity & { refreshToken: string }) {\n  return exclude(user, ['hashedPassword', 'refreshToken', 'hashedRefreshToken', 'recoveryCode', 'recoveryToken'])\n}\n\nexport type TExcludedIdentityAndRefreshToken = Omit<\n  IIdentity,\n  'hashedPassword' | 'refreshToken' | 'hashedRefreshToken' | 'recoveryCode' | 'recoveryToken'\n>\n\nexport function excludedIdentity<T extends IIdentity = IIdentity>(user: T) {\n  return exclude(user, ['hashedPassword', 'hashedRefreshToken', 'recoveryCode', 'recoveryToken'])\n}\n\nexport type TExcludedIdentity<T extends IIdentity = IIdentity> = Omit<\n  T,\n  'hashedPassword' | 'hashedRefreshToken' | 'recoveryCode' | 'recoveryToken'\n>\n","export class GenerateRecoveryCodeDto {\n  email: string\n  appId: string\n}\n","export class ResetPasswordDto {\n  recoveryCode: string\n  password: string\n  appId: string\n}\n","export class SignupDto {\n  name: string\n  email?: string\n  password?: string\n}\n","export class SupperAdminSignupDto {\n  username: string\n  email: string\n  password: string\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport * as db from '@prisma/client-v1-flowda'\n\n// todo: 借着创建 super admin 账户，准备重构 authentication\n@injectable()\nexport class SuperAdminAuthenticationQuery {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject('Factory<Logger>')\n    loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(SuperAdminAuthenticationQuery.name)\n  }\n\n  mathRoles(roles: string[], tenant: db.Tenant): boolean {\n    if (tenant.role == null) return false\n    if (roles.indexOf('superadmin') > -1) return true\n    if (roles.indexOf(tenant.role) > -1) return true\n    return false\n  }\n\n  getTenantList() {\n    return this.prisma.tenant.findMany()\n  }\n}\n","import { injectable } from 'inversify'\nimport { AuthenticationError, PrismaTx } from '@flowda-projects/v1-flowda-types'\nimport * as bcrypt from 'bcrypt'\nimport * as db from '@prisma/client-v1-flowda'\nimport { SupperAdminSignupDto } from './dto/supperAdminSignup.dto'\n\n// todo: 借着创建 super admin 账户，准备重构 authentication\n@injectable()\nexport class SuperAdminAuthenticationService {\n  // todo: 后续换成 zod\n  async signup(dto: SupperAdminSignupDto, { tx }: PrismaTx): Promise<db.Tenant> {\n    const tenant = await tx.tenant.findFirst({\n      where: {\n        name: dto.username,\n      },\n    })\n    if (tenant) {\n      throw new AuthenticationError.AccountNameAlreadyExists()\n    }\n    const hashedPassword = await bcrypt.hash(dto.password, 10)\n    const newTenant = await tx.tenant.create({\n      data: {\n        name: dto.username,\n        hashedPassword: hashedPassword,\n        email: dto.email,\n        role: 'superadmin',\n      },\n    })\n\n    return newTenant\n  }\n}\n","import { SignupDto } from './dto/signup.dto'\nimport { inject, injectable } from 'inversify'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { LoggerService } from '@nestjs/common'\nimport { SuperAdminAuthenticationService } from './superAdminAuthentication.service'\nimport * as db from '@prisma/client-v1-flowda'\nimport { SupperAdminSignupDto } from './dto/supperAdminSignup.dto'\n\n@injectable()\nexport class SuperAdminAuthenticationTx {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(SuperAdminAuthenticationService) private service: SuperAdminAuthenticationService,\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(SuperAdminAuthenticationTx.name)\n  }\n\n  async signup(dto: SupperAdminSignupDto): Promise<any> {\n    return this.prisma.$transaction(tx => this.service.signup(dto, { tx }))\n  }\n}\n","import { inject, injectable, named, postConstruct } from 'inversify'\nimport * as bcrypt from 'bcrypt'\nimport {\n  AuthenticationError,\n  IdentityProviderServiceSymbol,\n  IIdentity,\n  IIdentityProviderService,\n  SdkError,\n  WXError,\n} from '@flowda-projects/v1-flowda-types'\nimport { FlowdaTrpcClientSymbol, PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { JwtService } from '../jwt/jwt.service'\nimport { IConfigService, IMailService } from '../../infra'\nimport { Customer, PrismaClient } from '@prisma/client-v1-flowda'\nimport {\n  AuthenticationService,\n  excludedIdentity,\n  excludedIdentityAndRefreshToken,\n  TExcludedIdentity,\n  TExcludedIdentityAndRefreshToken,\n} from '../authentication/authentication.service'\nimport { customerPreSignupDto } from './dto/customerPreSignup.dto'\nimport { CustomerSignupDto } from './dto/customerSignup.dto'\nimport { CustomerEmailSignupDto } from './dto/customerEmailSignup.dto'\nimport { customerPreSignupResDto } from './dto/customerPreSignupRes.dto'\nimport { WxLoginService } from '../wx-login/wxLogin.service'\nimport { WxFwhLoginService } from '../wx-login/wxFwhLogin.service'\nimport { CreateTRPCProxyClient } from '@trpc/client'\nimport { AppRouter } from '@flowda-projects/flowda-services-trpc-server'\n\n@injectable()\nexport class CustomerAuthService extends AuthenticationService<Customer> {\n  constructor(\n    @inject(IdentityProviderServiceSymbol)\n    @named('customer')\n    protected identityProvider: IIdentityProviderService<Customer>,\n    @inject(JwtService) protected jwt: JwtService,\n    @inject(IConfigService) protected config: IConfigService,\n    @inject(IMailService) protected mailService: IMailService,\n    @inject(PrismaClientSymbol) private prisma: PrismaClient,\n    @inject(WxLoginService) private wxLogin: WxLoginService,\n    @inject(WxFwhLoginService) private wxFwhLogin: WxFwhLoginService,\n    @inject(FlowdaTrpcClientSymbol) private flowdaTrpc: CreateTRPCProxyClient<AppRouter>,\n  ) {\n    super(identityProvider, jwt, config, mailService)\n  }\n\n  @postConstruct()\n  postConstruct() {\n    this.setOptions({\n      access_token_secret: this.config.getEnv('customer_access_token_secret'),\n      refresh_token_secret: this.config.getEnv('customer_refresh_token_secret'),\n      access_token_expire: this.config.getEnv('customer_access_token_expire'),\n      refresh_token_expire: this.config.getEnv('customer_refresh_token_expire'),\n    })\n  }\n\n  /**\n   * 预注册\n   * sdk.register\n   */\n  async preSignup(dto: customerPreSignupDto): Promise<customerPreSignupResDto> {\n    // 一个邮箱只能注册一个\n    const user = await this.identityProvider.find(dto)\n    if (user) {\n      throw new AuthenticationError.EmailAlreadyExists()\n    }\n    const app = await this.prisma.app.findUniqueOrThrow({ where: { id: dto.appId } })\n\n    const randomCode = this.generateRandomUppercaseLetter()\n\n    await this.prisma.customerPreSignup.create({\n      data: {\n        tenantId: app.tenantId,\n        appId: dto.appId,\n        email: dto.email,\n        verifyCode: randomCode,\n      },\n    })\n\n    await this.mailService.legacySendEmail(dto.email, 'sdk customer register verify code', randomCode)\n\n    return {\n      verifyCode: randomCode,\n    }\n  }\n\n  async signup(dto: CustomerSignupDto, extraFields: Record<string, any> = {}): Promise<TExcludedIdentity<Customer>> {\n    const user = await this.identityProvider.find({\n      appId: dto.appId,\n      name: dto.name,\n    })\n    if (user) {\n      throw new AuthenticationError.AccountNameAlreadyExists()\n    }\n\n    let hashedPassword: string | null = null\n    if (dto.password) {\n      // todo: 先不做验证这一步，邮箱需要，但是微信/手机号不需要\n      hashedPassword = await bcrypt.hash(dto.password, 10)\n    }\n\n    // const { password, ...rest } = dto // 删除 password\n    const app = await this.prisma.app.findUniqueOrThrow({ where: { id: dto.appId } })\n\n    const a = {\n      ...dto, // 所有属性（除 password），identity 和非 identity 属性透传，这样子类可以按需保存\n      tenantId: app.tenantId,\n      hashedPassword: hashedPassword,\n      hashedRefreshToken: null,\n      recoveryCode: null,\n      recoveryToken: null,\n      ...extraFields,\n    }\n\n    const newUser = await this.identityProvider.create(a)\n\n    return excludedIdentity<Customer>(newUser)\n  }\n\n  async verifyAndSignup(dto: CustomerEmailSignupDto): Promise<TExcludedIdentity<Customer>> {\n    const rt = await this.prisma.customerPreSignup.findFirst({\n      where: {\n        AND: [{ appId: dto.appId }, { email: dto.email }, { verifyCode: dto.verifyCode }],\n      },\n    })\n    if (!rt) {\n      throw new SdkError.WrongVerifyCode()\n    }\n\n    const newUser = await this.signup({\n      appId: dto.appId,\n      name: dto.name,\n      password: dto.password,\n      email: dto.email,\n    })\n\n    await this.prisma.customerPreSignup.delete({\n      where: {\n        id: rt.id,\n      },\n    })\n\n    return newUser\n  }\n\n  async validateUser(\n    nameField: 'email' | 'name',\n    appId: string,\n    name: string,\n    password?: string,\n  ): Promise<TExcludedIdentityAndRefreshToken> {\n    const user = await this.doValidateUserWithApp(nameField, appId, name, password)\n    return excludedIdentityAndRefreshToken(user)\n  }\n\n  async validateUserReturnTokens(\n    nameField: string,\n    appId: string,\n    name: string,\n    password?: string,\n  ): Promise<{\n    at: string\n    rt: string\n    user: TExcludedIdentityAndRefreshToken\n    expireAt: number\n  }> {\n    const user = await this.doValidateUserWithApp(nameField, appId, name, password)\n    const { at, exp } = this.jwt.generateAccessToken(user.id, {\n      secret: this.options.access_token_secret,\n      exp: this.options.access_token_expire,\n    })\n    return {\n      at,\n      rt: user.refreshToken,\n      user: excludedIdentityAndRefreshToken(user),\n      expireAt: exp,\n    }\n  }\n\n  async wxValidateUser(\n    code: string,\n    appId: string,\n  ): Promise<{\n    at: string\n    rt: string\n    user: TExcludedIdentityAndRefreshToken\n    expireAt: number\n  }> {\n    this.logger.debug!('invoke wxValidateUser')\n    // appId valite\n    if (!appId) {\n      throw new AuthenticationError.InvalidAppId()\n    }\n\n    const ret = await this.wxLogin.getAccessToken(code)\n    const data = ret.data\n\n    const findCustomerRet = await this.identityProvider.find({ name: data.unionid + appId, appId })\n\n    let customer\n    if (!findCustomerRet) {\n      // 如果不存在则创建\n      // 微信注册，只需要 name\n      customer = await this.signup({\n        appId,\n        name: data.unionid + appId,\n      })\n      const wxUser = await this.wxLogin.getUser(data.openid, data.access_token)\n      const app = await this.prisma.app.findUniqueOrThrow({ where: { id: appId } })\n      // 创建微信信息\n      await this.prisma.weixinProfile.create({\n        data: {\n          tenantId: app.tenantId,\n          unionid: data.unionid,\n          loginOpenid: data.openid,\n          headimgurl: wxUser.headimgurl,\n          nickname: wxUser.nickname,\n          sex: wxUser.sex,\n          customerId: customer.id,\n        },\n      })\n    } else {\n      customer = findCustomerRet\n    }\n\n    return this.validateUserReturnTokens('name', appId, customer.name)\n  }\n\n  async wxValidateUserV4(\n    code: string,\n    appId: string,\n  ): Promise<{\n    at: string\n    rt: string\n    user: TExcludedIdentityAndRefreshToken\n    expireAt: number\n  }> {\n    this.logger.debug!(`invoke wxValidateUserV4, appId ${appId}`)\n    // appId valite\n    if (!appId) {\n      throw new AuthenticationError.InvalidAppId()\n    }\n\n    const ret = await this.wxLogin.getAccessToken(code)\n    const data = ret.data\n\n    const findCustomerRet = await this.flowdaTrpc.user.findByUnionIdAndTenantId.query({\n      unionid: data.unionid,\n      tenantId: Number(appId),\n    })\n\n    let customer\n    let weixinProfile\n    if (!findCustomerRet) {\n      // 如果不存在则创建\n      // 微信注册，只需要 name\n      customer = await this.flowdaTrpc.user.registerByUnionId.mutate({\n        unionid: data.unionid,\n        tenantId: Number(appId),\n      })\n      const wxUser = await this.wxLogin.getUser(data.openid, data.access_token)\n      // const app = await this.prisma.app.findUniqueOrThrow({ where: { id: appId } })\n      // 创建微信信息\n      weixinProfile = await this.prisma.weixinProfile.create({\n        data: {\n          // tenantId: '不填写数据库默认值',\n          unionid: data.unionid,\n          loginOpenid: data.openid,\n          headimgurl: wxUser.headimgurl,\n          nickname: wxUser.nickname,\n          sex: wxUser.sex,\n          customerId: null,\n        },\n      })\n    } else {\n      customer = findCustomerRet\n      weixinProfile = await this.prisma.weixinProfile.findFirst({\n        where: {\n          unionid: data.unionid,\n        },\n      })\n    }\n\n    return {\n      at: '',\n      rt: '',\n      user: Object.assign(customer, {\n        id: String(customer.id),\n        name: customer.username,\n        weixinProfile,\n      }),\n      expireAt: 0,\n    }\n  }\n\n  // 匿名登录 <- name: 匿名token\n  // 快捷支付 <- name: openid\n  //    1. customer\n  //    2. 一笔订单（只考虑了一笔）\n  // 以上发生在 merge 之前\n  async fwhLoginMerge(code: string, appId: string) {\n    const ret = await this.wxFwhLogin.getAccessTokenByCode(code)\n    // 拿到 unionid 和 openid\n    // 根据 openid 找到匿名用户\n    // 1. 根据 openid 拿 customer 1\n    const customerByFwhOpenId = await this.prisma.customer.findFirst({\n      where: {\n        appId,\n        name: ret.openid, // 注意在 queryPayQuick 的时候，已经将 name 改成了 openid\n      },\n    })\n    if (!customerByFwhOpenId) {\n      // 1. 没有支付 2. 已经合并(unionid)\n      throw new WXError.RecoveryNoOrderFound()\n    }\n\n    // 2. 再尝试通过 unionid 去拿 customer 2\n    const customerByUnionId = await this.identityProvider.find({ name: ret.unionid, appId })\n\n    // 3. customer 1 \\2 合并，customer+  order关联\n    if (!customerByUnionId) {\n      // 如果不存在，则 name 替换为 unionid\n      // TODO: 应该添加 appId 限制\n      customerByFwhOpenId.name = ret.unionid\n      await this.prisma.customer.update({\n        where: {\n          id: customerByFwhOpenId.id,\n        },\n        data: customerByFwhOpenId,\n      })\n    } else {\n      // 如果存在，则替换 order 的 customerId， todo 并且废弃掉之前的 customerByFwhOpenId\n      await this.prisma.order.updateMany({\n        where: {\n          customerId: customerByFwhOpenId.id,\n        },\n        data: {\n          customerId: customerByUnionId.id,\n        },\n      })\n    }\n    const customer = await this.validateUserReturnTokens('name', appId, ret.unionid)\n\n    return customer\n  }\n\n  async fwhLogin(code: string, appId: string) {\n    const ret = await this.wxFwhLogin.getAccessTokenByCode(code)\n    const name = ret.unionid || ret.openid // 如果 unionid 为空，则 fallback 到 openid\n\n    const findCustomerRet = await this.identityProvider.find({ name: name, appId })\n\n    let customer\n    if (!findCustomerRet) {\n      // 如果不存在则创建\n      // 微信注册，只需要 name\n      customer = await this.signup({ name, appId })\n    } else {\n      customer = findCustomerRet\n    }\n\n    // 更新微信信息\n    const wxUser = await this.wxLogin.getUser(ret.openid, ret.access_token)\n    const app = await this.prisma.app.findUniqueOrThrow({ where: { id: appId } })\n\n    await this.prisma.weixinProfile.upsert({\n      where: {\n        customerId: customer.id,\n      },\n      create: {\n        tenantId: app.tenantId,\n        unionid: ret.unionid,\n        loginOpenid: ret.openid,\n        headimgurl: wxUser.headimgurl,\n        nickname: wxUser.nickname,\n        sex: wxUser.sex,\n        customerId: customer.id,\n      },\n      update: {\n        unionid: ret.unionid,\n        loginOpenid: ret.openid,\n        headimgurl: wxUser.headimgurl,\n        nickname: wxUser.nickname,\n        sex: wxUser.sex,\n      },\n    })\n\n    return this.validateUserReturnTokens('name', appId, customer.name)\n  }\n\n  // 服务号的state校验\n  // 可能也要根据app做配置，每个app默认生成一个唯一的secret防止线上用户数据混淆\n  async validateState(state: string) {\n    const s = this.config.getEnv('fuwuhao_state_secret')\n    return s === state\n  }\n\n  private async doValidateUserWithApp(\n    nameField: string,\n    appId: string,\n    name: string,\n    password?: string,\n  ): Promise<IIdentity & { refreshToken: string }> {\n    if (!appId) {\n      throw new AuthenticationError.InvalidAppId()\n    }\n    const user = await this.identityProvider.find({\n      [nameField]: name,\n      appId,\n    })\n    if (!user) {\n      throw new AuthenticationError.UserNamePasswordMismatch()\n    }\n\n    // 微信登录可以不用校验密码\n    if (password != null) {\n      if (!user.hashedPassword) {\n        throw new AuthenticationError.NotInitPassword()\n      }\n\n      const match = await bcrypt.compare(password, user.hashedPassword)\n      if (!match) {\n        throw new AuthenticationError.UserNamePasswordMismatch()\n      }\n    }\n\n    const { rt } = this.jwt.generateRefreshToken(user.id, {\n      secret: this.options.refresh_token_secret,\n      exp: this.options.refresh_token_expire,\n    })\n    const hash = await bcrypt.hash(rt, 10)\n    user.hashedRefreshToken = hash\n    const updatedUser = await this.identityProvider.update(user)\n    // db 不要明文存 refresh token，但是 refresh token 要返回给 client\n    return {\n      ...user,\n      refreshToken: rt,\n    }\n  }\n}\n","import { IsNotEmpty } from 'class-validator'\n\nexport class CustomerEmailSignupDto {\n  @IsNotEmpty()\n  appId: string\n  @IsNotEmpty()\n  email: string\n  @IsNotEmpty()\n  verifyCode: string\n  @IsNotEmpty()\n  password: string\n  @IsNotEmpty()\n  name: string\n}\n","export class customerPreSignupDto {\n  appId: string\n  email: string\n}\n","import { IsNotEmpty } from 'class-validator'\n\nexport class CustomerSignupDto {\n  @IsNotEmpty()\n  appId: string\n  name: string\n  email?: string\n  password?: string\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { EPlan, OrderError, PrismaTx, AuthenticationError } from '@flowda-projects/v1-flowda-types'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { CustomerUpdateAmountDto } from './dto/customerUpdateAmount.dto'\nimport { PrismaClient } from '@prisma/client-v1-flowda'\nimport * as db from '@prisma/client-v1-flowda'\nimport { getTimeByDay } from '../../utils/dayjs'\n\n@injectable()\nexport class CustomerService {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n    @inject(PrismaClientSymbol) private prisma: PrismaClient,\n  ) {\n    this.logger = loggerFactory(CustomerService.name)\n  }\n\n  async createAnonymous(anonymousCustomerToken: string, appId: string, { tx }: PrismaTx): Promise<db.Customer> {\n    const findRet = await tx.customer.findFirst({\n      where: {\n        appId,\n        name: anonymousCustomerToken,\n      },\n    })\n    if (findRet) {\n      throw new OrderError.DuplicateAnonymousCustomerToken()\n    }\n    const app = await tx.app.findUniqueOrThrow({ where: { id: appId } })\n    return tx.customer.create({\n      data: {\n        tenantId: app.tenantId,\n        appId,\n        name: anonymousCustomerToken,\n      },\n    })\n  }\n\n  async findAll(query?: any) {\n    console.log('find query: ', query)\n    let limit = 100\n    if (query?.limit) {\n      limit = query.limit\n      delete query.limit\n    }\n    return this.prisma.customer.findMany({\n      where: query,\n      take: limit,\n    })\n  }\n\n  async count(query?: any) {\n    if (query?.limit) {\n      delete query.limit\n    }\n    return this.prisma.customer.count({\n      where: query,\n    })\n  }\n\n  async findbyAppId(appId: string) {\n    if (!appId) {\n      throw new AuthenticationError.InvalidAppId()\n    }\n    return this.prisma.customer.findMany({\n      where: { appId },\n    })\n  }\n\n  /*\n    todo: 修改，不要覆盖数据\n    直接将匿名账户的 name 改成 openid\n    未来合并账户的时候，再改成 unionid\n   */\n  async updateAnonymousToPayOpenId(anonymousCustomerToken: string, openid: string, { tx }: PrismaTx) {\n    const findRet = await tx.customer.findFirstOrThrow({\n      where: {\n        name: anonymousCustomerToken,\n      },\n    })\n\n    findRet.name = openid\n    const updateRet = await tx.customer.update({\n      where: { id: findRet.id },\n      data: findRet,\n      include: {\n        profile: true,\n        weixinProfile: true,\n      },\n    })\n    return updateRet\n  }\n\n  /**\n   * 更新用户额度\n   * update amount\n   */\n  async amountUpdate(\n    option: CustomerUpdateAmountDto & { userInfo: (db.Customer & { profile: any }) | null },\n    { tx }: PrismaTx,\n  ): Promise<any> {\n    this.logger.log('updating amount: ', option)\n    const profile = option.userInfo?.profile\n    if (!profile) {\n      throw new Error('User has no profile')\n    }\n    if (profile.expireAt) {\n      if (new Date(profile.expireAt).valueOf() < Date.now()) {\n        throw new Error('No valid amount')\n      }\n    }\n    const cnt = option.count || 1\n    const action = option.action || 'decrement'\n    if (action === 'decrement') {\n      if (profile.amount < cnt) {\n        throw new Error('Reach amount limit')\n      }\n    } else {\n      throw new Error('Action not allowed')\n    }\n    const resp = await this.updateProfileAmount(profile.id, action, cnt, { tx })\n    return {\n      ...option.userInfo,\n      profile: resp,\n    }\n  }\n\n  // 免费产品直接容易一份到 customer 相当于授权码\n  // v1(free saver) 其实是用了 license Code\n  // v2 通过登录实现，直接把 authorization code 挂载到 Customer 上\n  async updateFreeProfile(userId: string, product: db.Product, { tx }: PrismaTx): Promise<db.Customer> {\n    const prevProfile = await tx.profile.findUnique({\n      where: {\n        customerId: userId,\n      },\n    })\n    // 订阅免费计划，不应该将已有计划清空（如果有的话）\n    // TODO: Plan 的情况先不管\n    const profile = {\n      tenantId: product.tenantId,\n      productType: product?.productType || db.ProductType.PLAN,\n      plan: EPlan.Free,\n      amount: product.amount == null ? prevProfile?.amount : product.amount + (prevProfile?.amount || 0),\n      expireAt: null,\n    }\n    return tx.customer.update({\n      where: {\n        id: userId,\n      },\n      data: {\n        profile: {\n          upsert: {\n            update: profile,\n            create: profile,\n          },\n        },\n      },\n      include: {\n        profile: true,\n      },\n    })\n  }\n\n  async updatePaidProfile(\n    userId: string,\n    product: db.Product,\n    { tx }: PrismaTx,\n  ): Promise<db.Customer & { profile: db.Profile | null }> {\n    const prevProfile = await tx.profile.findUnique({\n      where: {\n        customerId: userId,\n      },\n    })\n    const nextProfile = {\n      tenantId: product.tenantId,\n      productType: product.productType,\n      plan: product.plan,\n      amount:\n        product.amount == null\n          ? null\n          : product.amount + (prevProfile && prevProfile.amount != null ? prevProfile.amount : 0),\n      expireAt: product.validityPeriod != null ? getTimeByDay(product.validityPeriod) : null,\n    }\n    // 更新用户的 plan\n    return tx.customer.update({\n      where: {\n        id: userId,\n      },\n      data: {\n        profile: {\n          upsert: {\n            update: nextProfile,\n            create: nextProfile,\n          },\n        },\n      },\n      include: {\n        profile: true,\n        weixinProfile: true,\n      },\n    })\n  }\n\n  private async updateProfileAmount(profileId: string, action: string, cnt: number, { tx }: PrismaTx) {\n    // Cnt update\n    const updated =\n      action === 'decrement'\n        ? {\n            decrement: cnt || 1,\n          }\n        : {\n            increment: cnt || 1,\n          }\n    const resp = await tx.profile.update({\n      where: { id: profileId },\n      data: {\n        amount: updated,\n      },\n    })\n    this.logger.log('update resp: ', resp)\n    return resp\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { CustomerUpdateAmountDto } from './dto/customerUpdateAmount.dto'\nimport * as db from '@prisma/client-v1-flowda'\nimport { CustomerService } from './customer.service'\n\n@injectable()\nexport class CustomerTx {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(CustomerService) private service: CustomerService,\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(CustomerTx.name)\n  }\n\n  async amountUpdate(\n    option: CustomerUpdateAmountDto & { userInfo: (db.Customer & { profile: any }) | null },\n  ): Promise<any> {\n    return this.prisma.$transaction(tx => this.service.amountUpdate(option, { tx }))\n  }\n}\n","export class CustomerUpdateAmountDto {\n  action: string\n  count?: number\n}\n","import { ContainerModule, interfaces } from 'inversify'\nimport { IdentityProviderServiceSymbol, IIdentityProviderService } from '@flowda-projects/v1-flowda-types'\nimport { zt } from '@flowda-projects/v1-prisma-flowda'\nimport {\n  bindService,\n  CustomZodSchemaSymbol,\n  PrismaZodSchemaSymbol,\n  ServiceSymbol,\n} from '@flowda-projects/flowda-shared'\nimport { WxPayService } from './wx-pay/wxPay.service'\nimport { JwtService } from './jwt/jwt.service'\nimport { TenantIdentityProviderService } from './identity-provider/tenantIdentityProvider.service'\nimport { App, Customer, Tenant } from '@prisma/client-v1-flowda'\nimport { AppIdentityProviderService } from './identity-provider/appIdentityProvider.service'\nimport { CustomerIdentityProviderService } from './identity-provider/customerIdentityProvider.service'\nimport { TenantAuthService } from './tenant/tenantAuth.service'\nimport { AppAuthService } from './app/appAuth.service'\nimport { CustomerAuthService } from './customer-auth/customerAuth.service'\nimport { OrderService } from './order/order.service'\nimport { CustomerService } from './customer/customer.service'\nimport { ProductService } from './product/product.service'\nimport { WxLoginService } from './wx-login/wxLogin.service'\nimport { WxFwhLoginService } from './wx-login/wxFwhLogin.service'\nimport { AppService } from './app/app.service'\nimport { ProductQuery } from './product/product.query'\nimport { ProductTx } from './product/product.tx'\nimport { OrderTx } from './order/order.tx'\nimport { OrderQuery } from './order/order.query'\nimport { CustomerTx } from './customer/customer.tx'\nimport { SuperAdminAuthenticationTx } from './authentication/superAdminAuthentication.tx'\nimport { SuperAdminAuthenticationQuery } from './authentication/superAdminAuthentication.query'\nimport { SuperAdminAuthenticationService } from './authentication/superAdminAuthentication.service'\nimport { TenantQuery } from './tenant/tenant.query'\nimport * as schema from './schema/schema'\n\nexport const flowdaServicesModule = new ContainerModule((bind: interfaces.Bind) => {\n  // const schema = generateSchema()\n  bind(PrismaZodSchemaSymbol).toConstantValue(zt)\n  bind(CustomZodSchemaSymbol).toConstantValue(schema)\n\n  // bind(TenantService).toSelf().inRequestScope()\n  bind(WxPayService).toSelf().inSingletonScope()\n  bind(JwtService).toSelf().inSingletonScope()\n  bind(WxLoginService).toSelf().inSingletonScope()\n  bind(WxFwhLoginService).toSelf().inSingletonScope()\n\n  bindService(bind, ServiceSymbol, TenantAuthService)\n  bindService(bind, ServiceSymbol, AppService)\n\n  // sdk\n  bindService(bind, ServiceSymbol, AppAuthService)\n  bindService(bind, ServiceSymbol, CustomerAuthService)\n  bindService(bind, ServiceSymbol, OrderService)\n  bindService(bind, ServiceSymbol, OrderTx)\n  bindService(bind, ServiceSymbol, OrderQuery)\n  bindService(bind, ServiceSymbol, CustomerService)\n  bindService(bind, ServiceSymbol, CustomerTx)\n  bindService(bind, ServiceSymbol, ProductService)\n  bindService(bind, ServiceSymbol, ProductQuery)\n  bindService(bind, ServiceSymbol, ProductTx)\n\n  bind(SuperAdminAuthenticationService).toSelf().inSingletonScope()\n  bindService(bind, ServiceSymbol, SuperAdminAuthenticationTx)\n  bindService(bind, ServiceSymbol, SuperAdminAuthenticationQuery)\n\n  bind(TenantQuery).toSelf().inSingletonScope()\n\n  // identity provider\n  bind<IIdentityProviderService<Tenant>>(IdentityProviderServiceSymbol)\n    .to(TenantIdentityProviderService)\n    .whenTargetNamed('tenant')\n  bind<IIdentityProviderService<App>>(IdentityProviderServiceSymbol)\n    .to(AppIdentityProviderService)\n    .whenTargetNamed('app')\n  bind<IIdentityProviderService<Customer>>(IdentityProviderServiceSymbol)\n    .to(CustomerIdentityProviderService)\n    .whenTargetNamed('customer')\n})\n","import { inject, injectable } from 'inversify'\nimport { IIdentityProviderService } from '@flowda-projects/v1-flowda-types'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { App, PrismaClient } from '@prisma/client-v1-flowda'\nimport * as jwt from 'jsonwebtoken'\nimport { IConfigService } from '../../infra'\n\n@injectable()\nexport class AppIdentityProviderService implements IIdentityProviderService<App> {\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: PrismaClient,\n    @inject(IConfigService) protected config: IConfigService,\n  ) {}\n\n  async create(dto: Omit<App, 'id'> & { password: string }): Promise<App> {\n    const hashedAppToken = jwt.sign(\n      {\n        appId: dto.name,\n        appToken: dto.password,\n      },\n      this.config.getEnv('app_token_secret'),\n    )\n\n    const user = await this.prisma.app.create({\n      data: {\n        tenantId: dto.tenantId,\n        name: dto.name,\n        hashedAppToken: hashedAppToken,\n        hashedPassword: dto.hashedPassword,\n        hashedRefreshToken: null,\n        displayName: dto.displayName,\n        description: dto.description,\n      },\n    })\n    return user\n  }\n\n  find(query: Partial<App>): Promise<App | null> {\n    const or: any[] = []\n    if (query.id) {\n      or.push({ id: query.id })\n    }\n    if (query.name) {\n      or.push({ name: query.name })\n    }\n    return this.prisma.app.findFirst({\n      where: {\n        OR: or,\n      },\n    })\n  }\n\n  update(user: App): Promise<App> {\n    return this.prisma.app.update({\n      where: { id: user.id },\n      data: user,\n    })\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { AuthenticationError, IIdentityProviderService } from '@flowda-projects/v1-flowda-types'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { Customer, Prisma, PrismaClient } from '@prisma/client-v1-flowda'\n\n@injectable()\nexport class CustomerIdentityProviderService implements IIdentityProviderService<Customer> {\n  constructor(@inject(PrismaClientSymbol) private prisma: PrismaClient) {}\n\n  async create(dto: Omit<Customer, 'id'>): Promise<Customer> {\n    /*if (!dto.hashedPassword) {\n      throw new SdkError.NoPassword()\n    }\n    if (!dto.email) {\n      throw new AuthenticationError.NoEmail()\n    }*/\n    const user = await this.prisma.customer.create({\n      data: {\n        tenantId: dto.tenantId,\n        appId: dto.appId,\n        name: dto.name,\n        email: dto.email,\n        hashedPassword: dto.hashedPassword,\n        hashedRefreshToken: null,\n      },\n    })\n    return user\n  }\n\n  async find(query: Partial<Customer>): Promise<Prisma.CustomerGetPayload<{\n    include: { profile: true; weixinProfile: true }\n  }> | null> {\n    const appIdQuery: any = { appId: query.appId }\n    const or: Record<string, string>[] = []\n\n    if (query.id) {\n      or.push({ id: query.id })\n      delete appIdQuery.appId\n    } else {\n      if (!query.appId) {\n        throw new AuthenticationError.InvalidAppId()\n      }\n    }\n    if (query.name) {\n      or.push({ name: query.name })\n    }\n    if (query.email) {\n      or.push({ email: query.email })\n    }\n    if (query.recoveryCode) {\n      or.push({ recoveryCode: query.recoveryCode })\n    }\n    const customer = await this.prisma.customer.findFirst({\n      where: {\n        AND: [appIdQuery, { OR: or }],\n      },\n      include: {\n        profile: true,\n        weixinProfile: true,\n      },\n    })\n    return customer\n\n    /*if (customer) {\n      const profile = await this.prisma.profile.findUnique({\n        where: {\n          customerId: customer.id,\n        },\n      })\n      return {\n        ...customer,\n        // todo: 增加 e2e test\n        profile: profile === null ? undefined : profile, // 必须是 undefined，否则 update 会报错\n      }\n    } else {\n      return null\n    }*/\n  }\n\n  update(user: Prisma.CustomerUpdateInput): Promise<Customer> {\n    const { profile, weixinProfile, ...customer } = user\n    return this.prisma.customer.update({\n      where: { id: user.id as string },\n      data: customer,\n    })\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { PrismaClient, Tenant } from '@prisma/client-v1-flowda'\nimport { IIdentityProviderService } from '@flowda-projects/v1-flowda-types'\n\n@injectable()\nexport class TenantIdentityProviderService implements IIdentityProviderService<Tenant> {\n  constructor(@inject(PrismaClientSymbol) private prisma: PrismaClient) {}\n\n  async create(dto: Omit<Tenant, 'id'>): Promise<Tenant> {\n    const user = await this.prisma.tenant.create({\n      data: {\n        name: dto.name,\n        email: dto.email,\n        hashedPassword: dto.hashedPassword,\n        hashedRefreshToken: null,\n      },\n    })\n    return user\n  }\n\n  find(query: Partial<Tenant>): Promise<Tenant | null> {\n    const or: any[] = []\n    if (query.id) {\n      or.push({ id: query.id })\n    }\n    if (query.name) {\n      or.push({ name: query.name })\n    } else if (query.email) {\n      or.push({ email: query.email })\n    }\n    return this.prisma.tenant.findFirst({\n      where: {\n        OR: or,\n      },\n    })\n  }\n\n  update(user: Tenant): Promise<Tenant> {\n    return this.prisma.tenant.update({\n      where: { id: user.id },\n      data: user,\n    })\n  }\n}\n","export * from './flowdaServices.module'\nexport * from './wx-pay/wxPay.service'\n\nexport * from './wx-login/wxLogin.service'\nexport * from './wx-login/wxFwhLogin.service'\n// authentication\nexport * from './tenant/tenantAuth.service'\nexport * from './authentication/dto/signup.dto'\nexport * from './authentication/dto/generateRecoveryCode.dto'\nexport * from './authentication/dto/resetPassword.dto'\nexport * from './customer-auth/dto/customerEmailSignup.dto'\n\n// tenant\nexport * from './tenant/dto/tenantEmailSignup.dto'\n\n// identity provider\nexport * from './identity-provider/tenantIdentityProvider.service'\nexport * from './identity-provider/customerIdentityProvider.service'\nexport * from './identity-provider/appIdentityProvider.service'\n\n// sdk\nexport * from './app/appAuth.service'\nexport * from './customer-auth/customerAuth.service'\n\nexport * from './app/dto/appRegisterRes.dto'\nexport * from './customer-auth/dto/customerPreSignup.dto'\nexport * from './customer-auth/dto/customerSignup.dto'\n// sdk order\nexport * from './order/order.service'\nexport * from './order/order.tx'\nexport * from './order/order.query'\nexport * from './order/dto/sdkCreateOrder.dto'\nexport * from './order/dto/sdkCreateQuickOrder.dto'\nexport * from './order/dto/sdkCreateOrderInJSAPI.dto'\nexport * from './order/dto/sdkCreateOrderInJSAPIRes.dto'\n// sdk customer\nexport * from './customer/customer.service'\nexport * from './customer/customer.tx'\nexport * from './customer/dto/customerUpdateAmount.dto'\n// sdk product\nexport * from './product/product.service'\nexport * from './product/product.query'\nexport * from './product/product.tx'\nexport * from './product/dto/sdkProductCreateManyItem.dto'\nexport * from './wx-login/wxLogin.service'\n\nexport * from './app/app.service'\nexport * from './app/dto/dto'\n\nexport * from './authentication/superAdminAuthentication.service'\nexport * from './authentication/superAdminAuthentication.query'\nexport * from './authentication/superAdminAuthentication.tx'\nexport * from './authentication/dto/supperAdminSignup.dto'\n","import { inject, injectable } from 'inversify'\nimport * as jwt from 'jsonwebtoken'\nimport { JwtPayload } from 'jsonwebtoken'\nimport { IConfigService } from '../../infra/index'\n\n@injectable()\nexport class JwtService {\n  constructor(@inject(IConfigService) private config: IConfigService) {}\n\n  generateAccessToken(\n    userId: string,\n    options: { exp: number; secret: string },\n  ): {\n    at: string\n    iat: number\n    exp: number\n  } {\n    const payload = {\n      uid: userId,\n    }\n    const token = jwt.sign(payload, options.secret, {\n      expiresIn: `${options.exp}s`,\n    })\n\n    const decode = jwt.decode(token) as JwtPayload\n    return {\n      at: token,\n      iat: decode.iat as number,\n      exp: decode.exp as number,\n    }\n  }\n\n  generateRefreshToken(\n    userId: string,\n    options: { exp: number; secret: string },\n  ): {\n    rt: string\n    iat: number\n    exp: number\n  } {\n    const payload = {\n      uid: userId,\n    }\n    const token = jwt.sign(payload, options.secret, {\n      expiresIn: `${options.exp}s`,\n    })\n    const decode = jwt.decode(token) as JwtPayload\n    return {\n      rt: token,\n      iat: decode.iat as number,\n      exp: decode.exp as number,\n    }\n  }\n\n  verifyRefreshToken(rt: string, options: { secret: string }): JwtPayload {\n    return jwt.verify(rt, options.secret) as JwtPayload\n  }\n\n  generateRecoveryToken(email: string, options: { secret: string }): string {\n    const recoveryToken = jwt.sign(\n      {\n        email: email,\n        verificationToken: true,\n        exp: Math.floor(Date.now() / 1000) + 30 * 60, // 30 分钟过期\n      },\n      options.secret,\n    )\n    return recoveryToken\n  }\n\n  verifyRecoveryToken(at: string, options: { secret: string }): JwtPayload {\n    return jwt.verify(at, options.secret) as JwtPayload\n  }\n}\n","import { IsNotEmpty } from 'class-validator'\nimport { ApiProperty } from '@nestjs/swagger'\n\nexport class SdkCreateOrderDto {\n  @ApiProperty({\n    description: '产品 id',\n  })\n  @IsNotEmpty()\n  productId: string\n}\n","import { IsNotEmpty } from 'class-validator'\nimport { ApiProperty } from '@nestjs/swagger'\nimport { SdkCreateOrderDto } from './sdkCreateOrder.dto'\n\nexport class SdkCreateOrderInJSAPIDto extends SdkCreateOrderDto {\n  @ApiProperty({\n    description: 'jsapi 支付需要的 openid',\n  })\n  @IsNotEmpty()\n  openid: string\n}\n","import { ApiProperty } from '@nestjs/swagger'\nimport { SdkCreateOrderBaseResDto } from './sdkCreateOrderRes.dto'\n\nexport class SdkCreateOrderInJSAPIResDto extends SdkCreateOrderBaseResDto {\n  @ApiProperty({\n    description: 'prepay_id',\n  })\n  wxRet?: any\n}\n","import { Customer, Order, ProductSnapshot, Profile } from '@prisma/client-v1-flowda'\nimport { ApiProperty } from '@nestjs/swagger'\nimport { TExcludedIdentity } from '../../authentication/authentication.service'\n\nexport class SdkCreateOrderBaseResDto {\n  @ApiProperty({\n    description: '返回订单信息',\n  })\n  order: Order\n\n  @ApiProperty({\n    description: '返回消费者信息',\n  })\n  customer: TExcludedIdentity<Customer> & { profile?: Profile }\n\n  @ApiProperty({\n    description: '返回产品的快照信息',\n  })\n  productSnapshot: ProductSnapshot\n}\n\nexport class SdkCreateOrderResDto extends SdkCreateOrderBaseResDto {\n  @ApiProperty({\n    description: '返回支付二维码链接',\n  })\n  codeUrl?: string\n}\n","import { IsNotEmpty } from 'class-validator'\nimport { ApiProperty } from '@nestjs/swagger'\nimport { SdkCreateOrderDto } from './sdkCreateOrder.dto'\n\nexport class SdkCreateQuickOrderDto extends SdkCreateOrderDto {\n  @ApiProperty({\n    description: '快捷创建需要客户端提供一个匿名 Token',\n  })\n  @IsNotEmpty()\n  anonymousCustomerToken: string\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { excludedIdentity, TExcludedIdentity } from '../authentication/authentication.service'\nimport * as db from '@prisma/client-v1-flowda'\n\ntype QueryResDto = Array<\n  db.Prisma.OrderGetPayload<{\n    include: {\n      productSnapshots: true\n    }\n  }> & {\n    customer: TExcludedIdentity<db.Customer>\n  }\n>\n\n@injectable()\nexport class OrderQuery {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject('Factory<Logger>')\n    loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(OrderQuery.name)\n  }\n\n  async query(orderId: string): Promise<QueryResDto> {\n    const ret = await this.prisma.order.findMany({\n      where: { id: orderId },\n      include: {\n        customer: true,\n        productSnapshots: true,\n      },\n    })\n    return ret.map(item => ({\n      ...item,\n      customer: excludedIdentity(item.customer),\n    }))\n  }\n\n  async findAll(query?: any): Promise<any> {\n    console.log('find all order: ', query)\n    let limit = 100\n    if (query?.limit) {\n      limit = query.limit\n      delete query.limit\n    }\n    const ret = await this.prisma.order.findMany({\n      where: query || {},\n      take: limit,\n      include: {\n        customer: true,\n        productSnapshots: false,\n      },\n    })\n    return ret\n  }\n\n  async count(query?: any) {\n    if (query?.limit) {\n      delete query.limit\n    }\n    return this.prisma.order.count({\n      where: query,\n    })\n  }\n\n  async queryOrderHistory(customerId: string, productId?: string) {\n    const orders = await this.prisma.order.findMany({\n      where: {\n        customerId,\n      },\n      include: {\n        productSnapshots: true,\n      },\n    })\n    if (!productId) {\n      return orders\n    }\n    return orders\n      .map(orderData => {\n        const pid = orderData.productSnapshots[0].productId\n        if (pid === productId) {\n          return orderData\n        }\n        return null\n      })\n      .filter(item => !!item)\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { SdkCreateOrderDto } from './dto/sdkCreateOrder.dto'\nimport { LoggerService } from '@nestjs/common'\nimport { EPlan, IIdentity, OrderError, PrismaTx } from '@flowda-projects/v1-flowda-types'\nimport * as db from '@prisma/client-v1-flowda'\nimport { TWxPayQuery, WxPayService } from '../wx-pay/wxPay.service'\nimport { SdkCreateOrderResDto } from './dto/sdkCreateOrderRes.dto'\nimport { excludedIdentity, TExcludedIdentity } from '../authentication/authentication.service'\nimport { SdkCreateQuickOrderDto } from './dto/sdkCreateQuickOrder.dto'\nimport { ProductService } from '../product/product.service'\nimport { CustomerService } from '../customer/customer.service'\nimport { ProductQuery } from '../product/product.query'\nimport { SdkCreateOrderInJSAPIDto } from './dto/sdkCreateOrderInJSAPI.dto'\nimport { SdkCreateOrderInJSAPIResDto } from './dto/sdkCreateOrderInJSAPIRes.dto'\nimport { OrderQuery } from './order.query'\n\nexport const Serial_Min = 10001\nexport const Serial_Max = 99999\n\nexport type TQueryPayRes = {\n  order: db.Order & {\n    productSnapshots: db.ProductSnapshot[]\n    customer: TExcludedIdentity<db.Customer>\n  }\n  payQueryRet: TWxPayQuery\n}\n\n@injectable()\nexport class OrderService {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(WxPayService) private wxPayService: WxPayService,\n    @inject(ProductService) private productService: ProductService,\n    @inject(ProductQuery) private productQuery: ProductQuery,\n    @inject(OrderQuery) private orderQuery: OrderQuery,\n    @inject(CustomerService) private customerService: CustomerService,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(OrderService.name)\n  }\n\n  async create(user: IIdentity, dto: SdkCreateOrderDto, { tx }: PrismaTx): Promise<SdkCreateOrderResDto> {\n    this.logger.log(`creating order: `, user.id, dto.productId) \n    const { product, productSnapshot, order } = await this.doCreate(user.id, dto.productId, { tx })\n    const profile = await tx.profile.findUnique({ where: { customerId: user.id } })\n    this.logger.log(`profile `, profile) \n\n    // 检查限购情况\n    if (product.restricted) {\n      const purchased = await this.orderQuery.queryOrderHistory(user.id, product.id)\n      if (purchased?.length > 0) {\n        throw new OrderError.PurchaseReactedRestrictedLimit()\n      }\n    }\n\n    // 免费产品\n    if (productSnapshot.snapshotPrice.toNumber() === 0) {\n      const { updatedOrder, customer } = await this.processFreeOrder(order.id, user.id, profile, product, { tx })\n      return {\n        order: updatedOrder,\n        customer: excludedIdentity(customer),\n        productSnapshot,\n        codeUrl: '',\n      }\n    } else {\n      // // 购买付费产品后，不要重复购买，这块逻辑先丑一点挡一下\n      // if (profile && profile.plan === EPlan.VIP) {\n      //   throw new OrderError.CannotPayVIPIfPaid()\n      // }\n\n      // 发起微信支付\n      this.logger.log(`product price ${productSnapshot.snapshotPrice}, call wechat pay`)\n      const wxRet: { status: number; code_url: string } = await this.wxPayService.transactionsNative(\n        order.id,\n        product.name,\n        productSnapshot.snapshotPrice.toNumber(),\n      )\n      const { updatedOrder, customer } = await this.processPaidOrder(order.id, user, { tx })\n      return {\n        order: updatedOrder,\n        customer: excludedIdentity(customer),\n        productSnapshot,\n        codeUrl: wxRet.code_url,\n      }\n    }\n  }\n\n  /**\n   * 在 JSAPI 场景，即微信端创建支付订单\n   */\n  async createJSAPI(\n    user: IIdentity,\n    dto: SdkCreateOrderInJSAPIDto,\n    { tx }: PrismaTx,\n  ): Promise<SdkCreateOrderInJSAPIResDto> {\n    const { product, productSnapshot, order } = await this.doCreate(user.id, dto.productId, { tx })\n    const profile = await tx.profile.findUnique({ where: { customerId: user.id } })\n\n    // 检查限购情况\n    if (product.restricted) {\n      const purchased = await this.orderQuery.queryOrderHistory(user.id, product.id)\n      if (purchased?.length > 0) {\n        throw new OrderError.PurchaseReactedRestrictedLimit()\n      }\n    }\n\n    // 免费产品\n    if (productSnapshot.snapshotPrice.toNumber() === 0) {\n      const { updatedOrder, customer } = await this.processFreeOrder(order.id, user.id, profile, product, { tx })\n      return {\n        order: updatedOrder,\n        customer: excludedIdentity(customer),\n        productSnapshot,\n      }\n    } else {\n      // 购买付费产品后，不要重复购买，这块逻辑先丑一点挡一下\n      // if (profile && profile.plan === EPlan.VIP) {\n      //   throw new OrderError.CannotPayVIPIfPaid()\n      // }\n\n      // 发起微信支付\n      this.logger.log(`product price ${productSnapshot.snapshotPrice}, call wechat jsapi pay`)\n      const wxRet = await this.wxPayService.transactionsJSAPI(\n        dto.openid,\n        order.id,\n        product.name,\n        productSnapshot.snapshotPrice.toNumber(),\n      )\n      const { updatedOrder, customer } = await this.processPaidOrder(order.id, user, { tx })\n      return {\n        order: updatedOrder,\n        customer: excludedIdentity(customer),\n        productSnapshot,\n        wxRet,\n      }\n    }\n  }\n\n  /*\n     - 这个方法就非常复杂，还涉及到了 private methods，就很难 test\n     - 但是如果内聚了，还真容易出现这种情况\n     - 那还是通过 jest 的 spyOn，拿到 instance 后 mock 相应的 method 吧\n     */\n  async doCreate(\n    customerId: string,\n    productId: string,\n    { tx }: PrismaTx,\n  ): Promise<{\n    order: db.Order\n    productSnapshot: db.ProductSnapshot\n    product: db.Product\n  }> {\n    this.logger.log(`${customerId} creating order of product: ${productId} `)\n    const order = await this.createOrder(customerId, { tx })\n    const { product, snapshot } = await this.productService.createProductSnapshot(productId, order.id, { tx })\n    return {\n      order,\n      product: product,\n      productSnapshot: snapshot,\n    }\n  }\n\n  public async createOrder(customerId: string, { tx }: PrismaTx) {\n    const last = await tx.order.findFirst({\n      orderBy: [\n        {\n          createdAt: 'desc',\n        },\n      ],\n    })\n    let serial\n    if (last == null || last.serial >= Serial_Max) {\n      serial = Serial_Min\n    } else {\n      serial = last.serial + 1\n    }\n    const customer = await tx.customer.findUniqueOrThrow({ where: { id: customerId } })\n    const order = await tx.order.create({\n      data: {\n        tenantId: customer.tenantId,\n        appId: customer.appId,\n        customerId,\n        status: db.OrderStatus.INITIALIZED,\n        serial: serial,\n      },\n    })\n    this.logger.log(`order created: ${order.id}`)\n    return {\n      ...order,\n      serial, // 方便测试\n    }\n  }\n\n  async createQuick(appId: string, dto: SdkCreateQuickOrderDto, { tx }: PrismaTx): Promise<SdkCreateOrderResDto> {\n    const anonymous = await this.customerService.createAnonymous(dto.anonymousCustomerToken, appId, { tx })\n    return this.create(anonymous, dto, { tx })\n  }\n\n  async queryPayQuick(anonymousCustomerToken: string, orderId: string, { tx }: PrismaTx) {\n    const findRet = await tx.customer.findFirstOrThrow({\n      where: { name: anonymousCustomerToken },\n    })\n    // todo: 怎么出现了两次 queryPay???\n    const ret = await this.queryPay(findRet.id, orderId, { tx })\n    const openid = ret.payQueryRet.payer.openid\n    const updateRet = await this.customerService.updateAnonymousToPayOpenId(anonymousCustomerToken, openid, { tx })\n    return this.queryPay(updateRet.id, orderId, { tx })\n  }\n\n  async queryPay(\n    userId: string,\n    orderId: string,\n    { tx }: PrismaTx,\n  ): Promise<\n    TQueryPayRes & {\n      customer: TExcludedIdentity<db.Customer> & { profile?: db.Profile }\n    }\n  > {\n    const { order, payQueryRet } = await this.doQueryPay(orderId, { tx })\n    if (order.customerId !== userId) {\n      throw new OrderError.OrderCustomerIdNotMatch() // todo: 这块应该属于 authorization\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-ignore todo 删除 order 关联的 customer 信息，主要是调用的是 legacyQuery，等待重构\n    delete order.customer\n    // todo: 后续重构成 productSnapshot 和 order 1-1，暂时先取第一个\n    const productId = order.productSnapshots[0].productId\n    const product = await this.productQuery.findById(productId)\n    const customer = await this.customerService.updatePaidProfile(userId, product, { tx })\n    return {\n      order,\n      payQueryRet,\n      customer: {\n        ...excludedIdentity(customer),\n        profile: customer.profile === null ? undefined : customer.profile,\n      },\n    }\n  }\n\n  // todo: 将 domain 层的几个函数上移到 service 层，这样便于依赖注入\n  public async doQueryPay(orderId: string, { tx }: PrismaTx): Promise<TQueryPayRes> {\n    this.logger.log(`querying orderId ${orderId} ...`)\n    const order = await tx.order.findFirstOrThrow({\n      where: { id: orderId },\n      include: {\n        customer: true,\n        productSnapshots: true,\n      },\n    })\n    this.logger.log(`order found ${order.id} query request to wx`)\n    const payQueryRet = await this.wxPayService.query(orderId)\n    this.logger.log(`order query response from wx ${payQueryRet?.trade_state}`)\n    if (payQueryRet.status !== 200 || payQueryRet.trade_state !== 'SUCCESS') {\n      throw new OrderError.PayQueryStatusNotOk(payQueryRet)\n    }\n    this.logger.log(`order query success`)\n\n    // 创建支付关联订单\n    await tx.pay.upsert({\n      where: {\n        orderId: orderId,\n      },\n      create: {\n        tenantId: order.tenantId,\n        status: db.PayStatus.PAIED,\n        orderId: orderId,\n        transactionId: payQueryRet.transaction_id,\n      },\n      update: {\n        status: db.PayStatus.PAIED,\n        transactionId: payQueryRet.transaction_id,\n      },\n    })\n    return {\n      order: {\n        ...order,\n        customer: excludedIdentity(order.customer),\n      },\n      payQueryRet,\n    }\n  }\n\n  private async processPaidOrder(orderId: string, user: IIdentity, { tx }: PrismaTx) {\n    const updatedOrder = await tx.order.update({\n      where: { id: orderId },\n      data: { status: db.OrderStatus.PAY_ASSOCIATED },\n    })\n    this.logger.log(`order ${orderId} update to status ${db.OrderStatus.PAY_ASSOCIATED}`)\n    const customer = await tx.customer.findFirstOrThrow({\n      where: {\n        id: user.id,\n      },\n    })\n    return { updatedOrder, customer }\n  }\n\n  private async processFreeOrder(\n    orderId: string,\n    userId: string,\n    profile: db.Profile | null,\n    product: db.Product,\n    { tx }: PrismaTx,\n  ) {\n    // // 购买免费产品之后，可以购买付费产品，但是购买了付费产品，不能再购买免费产品，\n    // // 这块逻辑先丑一点挡一下\n    // if (profile && profile.plan === EPlan.VIP) {\n    //   throw new OrderError.CannotPayFreeIfPaid()\n    // }\n\n    this.logger.log(`product is free, create order status ${db.OrderStatus.FREE_DEAL}`)\n    const updatedOrder = await tx.order.update({\n      where: { id: orderId },\n      data: { status: db.OrderStatus.FREE_DEAL },\n    })\n    const customer = await this.customerService.updateFreeProfile(userId, product, { tx })\n    return { updatedOrder, customer }\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { IIdentity } from '@flowda-projects/v1-flowda-types'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { SdkCreateOrderDto } from './dto/sdkCreateOrder.dto'\nimport { SdkCreateOrderResDto } from './dto/sdkCreateOrderRes.dto'\nimport { OrderService, TQueryPayRes } from './order.service'\nimport { SdkCreateQuickOrderDto } from './dto/sdkCreateQuickOrder.dto'\nimport { TExcludedIdentity } from '../authentication/authentication.service'\nimport * as db from '@prisma/client-v1-flowda'\nimport { SdkCreateOrderInJSAPIDto } from './dto/sdkCreateOrderInJSAPI.dto'\n\n@injectable()\nexport class OrderTx {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject(OrderService) private service: OrderService,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(OrderTx.name)\n  }\n\n  async create(user: IIdentity, dto: SdkCreateOrderDto): Promise<SdkCreateOrderResDto> {\n    return this.prisma.$transaction(async tx => this.service.create(user, dto, { tx }))\n  }\n\n  async createJSAPI(user: IIdentity, dto: SdkCreateOrderInJSAPIDto): Promise<SdkCreateOrderResDto> {\n    return this.prisma.$transaction(async tx => this.service.createJSAPI(user, dto, { tx }))\n  }\n\n  async createQuick(appId: string, dto: SdkCreateQuickOrderDto): Promise<SdkCreateOrderResDto> {\n    return this.prisma.$transaction(async tx => this.service.createQuick(appId, dto, { tx }))\n  }\n\n  async queryPay(\n    userId: string,\n    orderId: string,\n  ): Promise<\n    TQueryPayRes & {\n      customer: TExcludedIdentity<db.Customer> & { profile?: db.Profile }\n    }\n  > {\n    return this.prisma.$transaction(async tx => this.service.queryPay(userId, orderId, { tx }))\n  }\n\n  async queryPayQuick(anonymousCustomerToken: string, orderId: string) {\n    return this.prisma.$transaction(async tx => this.service.queryPayQuick(anonymousCustomerToken, orderId, { tx }))\n  }\n\n  public async doQueryPay(orderId: string): Promise<TQueryPayRes> {\n    return this.prisma.$transaction(async tx => this.service.doQueryPay(orderId, { tx }))\n  }\n\n  public async createOrder(customerId: string) {\n    return this.prisma.$transaction(async tx => this.service.createOrder(customerId, { tx }))\n  }\n}\n","import { IsNotEmpty } from 'class-validator'\n\nexport class SdkProductCreateManyItemDto {\n  @IsNotEmpty()\n  name: string\n  @IsNotEmpty()\n  price: number\n  @IsNotEmpty()\n  productType: string\n\n  amount?: number | null\n  plan?: number | null\n\n  extendedDescriptionData?: any\n\n  // 限购\n  restricted?: number | null\n\n  // todo: legacy 字段，暂时保留，新版 SDK 不应该保留\n  fileSize?: string | null\n  storeDuration?: number | null\n  hasAds?: string | null\n  tecSupport?: string | null\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport { PrismaClient, Product } from '@prisma/client-v1-flowda'\n\n@injectable()\nexport class ProductQuery {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: PrismaClient,\n    @inject('Factory<Logger>')\n    loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(ProductQuery.name)\n  }\n\n  findAll(appId: string): Promise<Product[]> {\n    return this.prisma.product.findMany({\n      where: {\n        appId,\n      },\n    })\n  }\n\n  async findAllByAppName(appName: string): Promise<Product[]> {\n    const app = await this.prisma.app.findFirstOrThrow({\n      where: {\n        name: appName,\n      },\n    })\n    return this.prisma.product.findMany({\n      where: {\n        appId: app.id,\n      },\n    })\n  }\n\n  async findById(id: string): Promise<Product> {\n    return this.prisma.product.findUniqueOrThrow({\n      where: { id },\n    })\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { PrismaTx } from '@flowda-projects/v1-flowda-types'\nimport * as db from '@prisma/client-v1-flowda'\nimport { SdkProductCreateManyItemDto } from './dto/sdkProductCreateManyItem.dto'\n\n@injectable()\nexport class ProductService {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject('Factory<Logger>')\n    loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(ProductService.name)\n  }\n\n  async createManyProducts(\n    appId: string,\n    list: SdkProductCreateManyItemDto[],\n    { tx }: PrismaTx,\n  ): Promise<db.Product[]> {\n    // todo: 根据 appId -> tenantId\n    const app = await tx.app.findUniqueOrThrow({ where: { id: appId } })\n    const data = list.map(item => ({\n      ...item,\n      tenantId: app.tenantId,\n      appId: appId,\n      productType: item.productType as db.ProductType,\n      restricted: item.restricted || 0,\n      // 以下是为了处理 prisma null\n      amount: item.amount === undefined ? null : item.amount,\n      plan: item.plan === undefined ? null : item.plan,\n      extendedDescriptionData: item.extendedDescriptionData,\n      fileSize: item.fileSize === undefined ? null : item.fileSize,\n      storeDuration: item.storeDuration === undefined ? null : item.storeDuration,\n      hasAds: item.hasAds === undefined ? null : item.hasAds,\n      tecSupport: item.tecSupport === undefined ? null : item.tecSupport,\n      validityPeriod: null,\n    }))\n    await tx.product.createMany({ data })\n    return tx.product.findMany({\n      where: {\n        appId: appId,\n      },\n    })\n  }\n\n  private mapToProduct(appId: string, product: SdkProductCreateManyItemDto) {\n    const data = {\n      appId: appId,\n      ...product,\n      productType: product.productType as db.ProductType,\n      // 以下是为了处理 prisma null\n      amount: product.amount === undefined ? null : product.amount,\n      plan: product.plan === undefined ? null : product.plan,\n      fileSize: product.fileSize === undefined ? null : product.fileSize,\n      storeDuration: product.storeDuration === undefined ? null : product.storeDuration,\n      hasAds: product.hasAds === undefined ? null : product.hasAds,\n      tecSupport: product.tecSupport === undefined ? null : product.tecSupport,\n    }\n    return data\n  }\n\n  async createProductSnapshot(\n    productId: string,\n    orderId: string,\n    { tx }: PrismaTx,\n  ): Promise<{\n    product: db.Product\n    snapshot: db.ProductSnapshot\n  }> {\n    const p = await tx.product.findFirstOrThrow({\n      where: {\n        id: productId,\n      },\n    })\n\n    const snapshot = {\n      snapshotPrice: p.price,\n      orderId: orderId,\n      productId: p.id,\n      tenantId: p.tenantId,\n    }\n\n    const snapshotRet = await tx.productSnapshot.create({ data: snapshot })\n    return {\n      product: p,\n      snapshot: snapshotRet,\n    }\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { LoggerService } from '@nestjs/common'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport * as db from '@prisma/client-v1-flowda'\nimport { SdkProductCreateManyItemDto } from './dto/sdkProductCreateManyItem.dto'\nimport { ProductService } from './product.service'\n\n@injectable()\nexport class ProductTx {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n    @inject(ProductService) private productService: ProductService,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(ProductTx.name)\n  }\n\n  async createManyProducts(appId: string, list: SdkProductCreateManyItemDto[]): Promise<db.Product[]> {\n    return this.prisma.$transaction(async tx => this.productService.createManyProducts(appId, list, { tx }))\n  }\n}\n","// https://github.com/omar-dulaimi/prisma-trpc-generator\n// https://github.com/macstr1k3r/trpc-nestjs-adapter\n\nimport { z } from 'zod'\nimport {\n  AppWithRelationsSchema,\n  CustomerWithRelationsSchema,\n  OrderWithRelationsSchema,\n  ProductSnapshotWithRelationsSchema,\n  ProductWithRelationsSchema,\n  ProfileWithRelationsSchema,\n  WeixinProfileWithRelationsSchema,\n} from '@flowda-projects/v1-prisma-flowda'\nimport { meta } from '@flowda-projects/flowda-shared'\n\n// __meta 得增加 extend，去拿 openapi 定义\nexport const ProductResourceSchema = ProductWithRelationsSchema.omit({\n  fileSize: true,\n  storeDuration: true,\n  // todo: buildYup 兼容性有点差\n  // price: true, // oneOf 这种挂\n  extendedDescriptionData: true,\n  app: true,\n  isDeleted: true,\n}).extend({\n  // motor-admin schema\n  __meta: meta({\n    extends: 'ProductSchema',\n  }),\n})\n\nexport const ProductSnapshotResourceSchema = ProductSnapshotWithRelationsSchema.omit({}).extend({\n  // motor-admin schema\n  __meta: meta({\n    extends: 'ProductSnapshotSchema',\n  }),\n})\n\nexport const AppResourceSchema = AppWithRelationsSchema.pick({\n  id: true,\n  name: true,\n  displayName: true,\n  description: true,\n  products: true,\n  orders: true,\n  customers: true,\n}).extend({\n  appToken: z.string().nullable().openapi({ title: '应用 Token', access_type: 'read_only' }),\n  __meta: meta({\n    extends: 'AppSchema',\n  }),\n})\n\nexport const CustomerResourceSchema = CustomerWithRelationsSchema.omit({\n  legacyProfile: true,\n  hashedPassword: true,\n  hashedRefreshToken: true,\n  recoveryCode: true,\n  recoveryToken: true,\n  app: true,\n  isDeleted: true,\n}).extend({\n  __meta: meta({\n    extends: 'CustomerSchema',\n  }),\n})\n\nexport const WeixinProfileResourceSchema = WeixinProfileWithRelationsSchema.omit({\n  customerId: true,\n  customer: true,\n}).extend({\n  __meta: meta({\n    extends: 'WeixinProfileSchema',\n  }),\n})\n\nexport const ProfileResourceSchema = ProfileWithRelationsSchema.omit({\n  customerId: true,\n  customer: true,\n}).extend({\n  __meta: meta({\n    extends: 'ProfileSchema',\n  }),\n})\n\nexport const OrderResourceSchema = OrderWithRelationsSchema.omit({\n  customer: true,\n  status: true,\n  isDeleted: true,\n  productSnapshots: true,\n  pay: true,\n  App: true,\n}).extend({\n  __meta: meta({\n    extends: 'OrderSchema',\n  }),\n})\n","import { IsNotEmpty } from 'class-validator'\n\nexport class TenantEmailSignupDto {\n  @IsNotEmpty()\n  email: string\n  @IsNotEmpty()\n  verifyCode: string\n  @IsNotEmpty()\n  password: string\n  name: string\n}\n","import { injectable } from 'inversify'\n\n@injectable()\nexport class TenantQuery {}\n","import { inject, injectable, named, postConstruct } from 'inversify'\nimport {\n  IdentityProviderServiceSymbol,\n  IIdentityProviderService,\n  AuthenticationError,\n} from '@flowda-projects/v1-flowda-types'\nimport { PrismaClientSymbol } from '@flowda-projects/flowda-shared'\nimport * as db from '@prisma/client-v1-flowda'\nimport * as bcrypt from 'bcrypt'\nimport { JwtService } from '../jwt/jwt.service'\nimport { IConfigService, IMailService } from '../../infra/index'\nimport { Tenant } from '@prisma/client-v1-flowda'\nimport { AuthenticationService, TExcludedIdentity, excludedIdentity } from '../authentication/authentication.service'\nimport { TenantEmailSignupDto } from './dto/tenantEmailSignup.dto'\nimport { tenantPreSignupResDto } from './dto/tenantPreSignupRes.dto'\nimport { tenantPreSignupDto } from './dto/tenantPreSignup.dto'\n@injectable()\nexport class TenantAuthService extends AuthenticationService<Tenant> {\n  constructor(\n    @inject(IdentityProviderServiceSymbol)\n    @named('tenant')\n    protected identityProvider: IIdentityProviderService<Tenant>,\n    @inject(JwtService) protected jwt: JwtService,\n    @inject(IConfigService) protected config: IConfigService,\n    @inject(IMailService) protected mailService: IMailService,\n    @inject(PrismaClientSymbol) private prisma: db.PrismaClient,\n  ) {\n    super(identityProvider, jwt, config, mailService)\n  }\n\n  @postConstruct()\n  postConstruct() {\n    this.setOptions({\n      access_token_secret: this.config.getEnv('tenant_access_token_secret'),\n      refresh_token_secret: this.config.getEnv('tenant_refresh_token_secret'),\n      access_token_expire: this.config.getEnv('tenant_access_token_expire'),\n      refresh_token_expire: this.config.getEnv('tenant_refresh_token_expire'),\n    })\n  }\n\n  /**\n   * 预注册\n   * sdk.register\n   */\n  async preSignup(dto: tenantPreSignupDto): Promise<tenantPreSignupResDto> {\n    // 一个邮箱只能注册一个\n    const user = await this.identityProvider.find(dto)\n    if (user) {\n      throw new AuthenticationError.EmailAlreadyExists()\n    }\n    const randomCode = this.generateRandomUppercaseLetter()\n\n    await this.prisma.tenantPreSignup.create({\n      data: {\n        email: dto.email,\n        verifyCode: randomCode,\n      },\n    })\n\n    await this.mailService.legacySendEmail(dto.email, 'Tenant register verify code - ', randomCode)\n\n    return {\n      verifyCode: randomCode,\n    }\n  }\n\n  async signup(\n    dto: Omit<TenantEmailSignupDto, 'verifyCode'>,\n    extraFields: Record<string, any> = {},\n  ): Promise<TExcludedIdentity<Tenant>> {\n    const user = await this.identityProvider.find({\n      email: dto.email,\n    })\n    if (user) {\n      throw new AuthenticationError.AccountNameAlreadyExists()\n    }\n\n    let hashedPassword: string | null = null\n    if (dto.password) {\n      // todo: 先不做验证这一步，邮箱需要，但是微信/手机号不需要\n      hashedPassword = await bcrypt.hash(dto.password, 10)\n    }\n\n    // 租户的 name 不需要强制校验\n    if (!dto.name) {\n      dto.name = dto.email\n    }\n\n    // const { password, ...rest } = dto // 删除 password\n    const a = {\n      ...dto, // 所有属性（除 password），identity 和非 identity 属性透传，这样子类可以按需保存\n      hashedPassword: hashedPassword,\n      hashedRefreshToken: null,\n      recoveryCode: null,\n      recoveryToken: null,\n      ...extraFields,\n    }\n    const newUser = await this.identityProvider.create(a)\n\n    return excludedIdentity<Tenant>(newUser)\n  }\n\n  async verifyAndSignup(dto: TenantEmailSignupDto): Promise<TExcludedIdentity<Tenant>> {\n    const rt = await this.prisma.tenantPreSignup.findFirst({\n      where: {\n        AND: [{ email: dto.email }, { verifyCode: dto.verifyCode }],\n      },\n    })\n    if (!rt) {\n      throw new AuthenticationError.WrongVerifyCode()\n    }\n\n    const newUser = await this.signup({\n      name: dto.name,\n      password: dto.password,\n      email: dto.email,\n    })\n\n    await this.prisma.tenantPreSignup.delete({\n      where: {\n        id: rt.id,\n      },\n    })\n\n    return newUser\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { IConfigService } from '../../infra'\nimport axios from 'axios'\nimport { WXError } from '@flowda-projects/v1-flowda-types'\n\n@injectable()\nexport class WxFwhLoginService {\n  constructor(@inject(IConfigService) private config: IConfigService) {}\n\n  async getAccessToken(): Promise<{ access_token: string; expires_in: number }> {\n    const appid = this.config.getEnv('freecharger_fuwuhao_appid')\n    const secret = this.config.getEnv('freecharger_fuwuhao_secret')\n    // https://github.com/axios/axios/issues/5082\n    const ret = await axios({\n      method: 'get',\n      url: `https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=${appid}&secret=${secret}`,\n    })\n    return ret.data\n  }\n\n  async getAccessTokenByCode(code: string) {\n    const appid = this.config.getEnv('freecharger_fuwuhao_appid')\n    const secret = this.config.getEnv('freecharger_fuwuhao_secret')\n    const res = await axios({\n      method: 'get',\n      url: `https://api.weixin.qq.com/sns/oauth2/access_token?appid=${appid}&secret=${secret}&code=${code}&grant_type=authorization_code`,\n    })\n    if (res.data.errcode) {\n      console.log('get access token error: ', JSON.stringify(res.data))\n      throw new WXError.FwhGetAccessTokenError(res.data)\n    }\n    return res.data\n  }\n}\n","import { inject, injectable } from 'inversify'\nimport { IConfigService } from '../../infra'\nimport { WechatOAuth, WechatOAuthFactorySymbol } from '../../legacy-libs'\n\nexport type TWxGetAccessTokenRes = {\n  access_token: string\n  expires_in: number\n  refresh_token: string\n  openid: string\n  scope: string\n  unionid: string\n  create_at: number\n}\n\nexport type TWxGetUser = {\n  openid: string\n  nickname: string\n  sex: number\n  headimgurl: string\n  unionid: string\n  language: string\n  city: string\n  province: string\n  country: string\n  privilege: any[]\n}\n\n@injectable()\nexport class WxLoginService {\n  client: any\n\n  constructor(\n    @inject(IConfigService) private config: IConfigService,\n    @inject(WechatOAuthFactorySymbol) private wechatOAuthFactory: () => typeof WechatOAuth,\n  ) {}\n\n  getAuthorizeURLForWebsite(redirectUrl: string) {\n    const url = this.wechatOAuthFactory().getAuthorizeURLForWebsite(redirectUrl)\n    return url\n  }\n\n  getAccessToken(code: string): Promise<{ data: TWxGetAccessTokenRes }> {\n    return new Promise((resolve, reject) => {\n      this.wechatOAuthFactory().getAccessToken(code, function (err: any, result: any) {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(result)\n        }\n      })\n    })\n  }\n\n  getUser(openid: string, access_token: string): Promise<TWxGetUser> {\n    return new Promise((resolve, reject) => {\n      this.wechatOAuthFactory()._getUser(\n        {\n          openid,\n        },\n        access_token,\n        function (err: any, result: any) {\n          if (err) {\n            reject(err)\n          } else {\n            resolve(result)\n          }\n        },\n      )\n    })\n  }\n}\n","import { WechatpayNodeV3, WechatpayNodeV3FactorySymbol } from '../../legacy-libs'\nimport { LoggerService } from '@nestjs/common'\nimport { inject, injectable } from 'inversify'\nimport { getTimeExpire } from '../../utils/dayjs'\nimport { OrderError } from '@flowda-projects/v1-flowda-types'\n\nexport type TWxPayQuery = {\n  status: number\n  trade_state: string\n  transaction_id: string\n  payer: {\n    openid: string\n  }\n}\n\n@injectable()\nexport class WxPayService {\n  private readonly logger: LoggerService\n\n  constructor(\n    @inject(WechatpayNodeV3FactorySymbol)\n    private wechatPayNodeV3Factory: () => typeof WechatpayNodeV3,\n    @inject('Factory<Logger>') loggerFactory: (name: string) => LoggerService,\n  ) {\n    this.logger = loggerFactory(WxPayService.name)\n  }\n\n  /*\n  {\n  \"status\": 200,\n  \"appId\": \"xx\",\n  \"timeStamp\": \"1682132086\",\n  \"nonceStr\": \"xx\",\n  \"package\": \"prepay_id=xx\",\n  \"signType\": \"RSA\",\n  \"paySign\": \"xx\"\n}\n   */\n  async transactionsJSAPI(\n    openid: string,\n    orderId: string,\n    desc: string,\n    total: number,\n  ): Promise<{\n    prepay_id: string\n  }> {\n    const timeExpire = getTimeExpire(5)\n    const params = {\n      description: desc, ///商品描述\n      out_trade_no: orderId, ///户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一\n      time_expire:\n        timeExpire /*订单失效时间，遵循rfc3339标准格式，格式为yyyy-MM-DDTHH:mm:ss+TIMEZONE，yyyy-MM-DD表示年月日，T出现在字符串中，表示time元素的开头，HH:mm:ss表示时分秒，TIMEZONE表示时区（+08:00表示东八区时间，领先UTC8小时，即北京时间）。例如：2015-05-20T13:29:35+08:00表示，北京时间2015年5月20日 13点29分35秒。 */,\n      attach: '附加数据', ///附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。\n      notify_url: 'https://www.weixin.qq.com/wxpay/pay.php', // todo /* 异步接收微信支付结果通知的回调地址，通知url必须为外网可访问的url，不能携带参数。 公网域名必须为https，如果是走专线接入，使用专线NAT IP或者私有回调域名可使用http */\n      support_fapiao: false, ///传入true时，支付成功消息和支付详情页将出现开票入口。需要在微信支付商户平台或微信公众平台开通电子发票功能，传此字段才可生效。\n      amount: {\n        total: total * 100, ///订单总金额，单位为“分”\n        currency: 'CNY', /// CNY：人民币，境内商户号仅支持人民币。\n      },\n      payer: {\n        openid: openid, ///用户在直连商户appid下的唯一标识，不可混用\n      },\n      settle_info: {\n        profit_sharing: false, ///是否指定分账\n      },\n    }\n    const wxRet = await this.wechatPayNodeV3Factory().transactions_jsapi(params)\n    this.logger.log(`wechat transactions_jsapi resp ${JSON.stringify(wxRet)}`)\n    if (wxRet.status !== 200) {\n      throw new OrderError.TransactionsNativeStatusNotOk()\n    }\n    return wxRet\n  }\n\n  async transactionsNative(\n    orderId: string,\n    desc: string,\n    total: number,\n  ): Promise<{\n    status: number\n    code_url: string\n  }> {\n    const timeExpire = getTimeExpire(5)\n    const params = {\n      description: desc, ///商品描述\n      out_trade_no: orderId, ///户系统内部订单号，只能是数字、大小写字母_-*且在同一个商户号下唯一\n      // '2022-11-11T23:59:59+08:00'\n      time_expire: timeExpire,\n      /*订单失效时间，遵循rfc3339标准格式，格式为yyyy-MM-DDTHH:mm:ss+TIMEZONE，yyyy-MM-DD表示年月日，T出现在字符串中，表示time元素的开头，HH:mm:ss表示时分秒，TIMEZONE表示时区（+08:00表示东八区时间，领先UTC8小时，即北京时间）。例如：2015-05-20T13:29:35+08:00表示，北京时间2015年5月20日 13点29分35秒。 */\n      attach: '附加数据', ///附加数据，在查询API和支付通知中原样返回，可作为自定义参数使用，实际情况下只有支付完成状态才会返回该字段。\n      notify_url: 'https://www.weixin.qq.com/wxpay/pay.php', // todo /* 异步接收微信支付结果通知的回调地址，通知url必须为外网可访问的url，不能携带参数。 公网域名必须为https，如果是走专线接入，使用专线NAT IP或者私有回调域名可使用http */\n      support_fapiao: false, ///传入true时，支付成功消息和支付详情页将出现开票入口。需要在微信支付商户平台或微信公众平台开通电子发票功能，传此字段才可生效。\n      amount: {\n        total: total * 100, ///订单总金额，单位为“分”\n        currency: 'CNY', /// CNY：人民币，境内商户号仅支持人民币。\n      },\n      settle_info: {\n        profit_sharing: false, ///是否指定分账\n      },\n    }\n    this.logger.log(`wechat start to transactions_native ${JSON.stringify(params)}`)\n    const wxRet = await this.wechatPayNodeV3Factory().transactions_native(params)\n    this.logger.log(`wechat transactions_native resp ${JSON.stringify(wxRet)}`)\n    if (wxRet.status !== 200) {\n      throw new OrderError.TransactionsNativeStatusNotOk()\n    }\n    return wxRet as {\n      status: number\n      code_url: string\n    }\n  }\n\n  /*\n  {\n    \"status\": 200,\n    \"amount\": {\n        \"currency\": \"CNY\",\n        \"payer_currency\": \"CNY\",\n        \"payer_total\": 1,\n        \"total\": 1\n    },\n    \"appid\": \"wx6ecc94d7d5133fde\",\n    \"attach\": \"附加数据\",\n    \"bank_type\": \"OTHERS\",\n    \"mchid\": \"1634638724\",\n    \"out_trade_no\": \"claz2v5la0000tzp2ivnp5gpm\",\n    \"payer\": {\n        \"openid\": \"oQBzz5GM-9aCngjG3eNpqJIlzJj4\"\n    },\n    \"promotion_detail\": [],\n    \"success_time\": \"2022-11-27T16:07:27+08:00\",\n    \"trade_state\": \"SUCCESS\",\n    \"trade_state_desc\": \"支付成功\",\n    \"trade_type\": \"NATIVE\",\n    \"transaction_id\": \"4200001645202211278892941061\"\n}\n   */\n  async query(outTradeNo: string): Promise<TWxPayQuery> {\n    this.logger.log(`wx pay query with tradeNo ${outTradeNo}`)\n    const ret = await this.wechatPayNodeV3Factory().query({ out_trade_no: outTradeNo })\n    this.logger.log(`wx pay query resp: ${JSON.stringify(ret)}`)\n    return ret as TWxPayQuery\n  }\n}\n","import {\n  ArgumentsHost,\n  Catch,\n  ExceptionFilter,\n  HttpException,\n  HttpStatus,\n  Logger,\n  UnauthorizedException,\n} from '@nestjs/common'\nimport { CustomError } from '@flowda-projects/flowda-shared'\nimport { ZodValidationException } from 'nestjs-zod'\n\n/**\n * 没有细究这里的原理已经正确的使用方式\n * 但是这个 filter 的目的是将 service 层的 error 做一层前端可读性的转换，特别是 message\n */\n@Catch()\nexport class AppExceptionFilter implements ExceptionFilter {\n  private readonly logger = new Logger(AppExceptionFilter.name)\n\n  catch(exception: unknown, host: ArgumentsHost) {\n    const ctx = host.switchToHttp()\n    const response = ctx.getResponse()\n    const request = ctx.getRequest()\n\n    let errorCode\n    let message\n    let errorExtra\n    let status\n    let errorStack\n\n    // 如果是 CustomError 提取 errorCode + message, 200\n    if (exception instanceof CustomError) {\n      const rt = JSON.parse(exception.message)\n      errorCode = rt.errorCode\n      message = rt.message\n      errorExtra = rt.extra\n      status = HttpStatus.OK\n      errorStack = exception.stack\n    } else if (exception instanceof Error) {\n      // 如果是一般 Error，提取 message，errorCode 继续 undef\n      message = exception.message\n      status = HttpStatus.INTERNAL_SERVER_ERROR\n      errorStack = exception.stack\n    }\n\n    // 如果是 HttpException，则重新赋值下 status\n    if (exception instanceof HttpException) {\n      status = exception.getStatus()\n      errorCode = status\n      const res = exception.getResponse()\n      if (typeof res === 'object' && Array.isArray((res as Record<string, any>).message)) {\n        message = (res as unknown as { message: string[] }).message.join(',')\n      }\n      errorStack = exception.stack\n    }\n\n    // 如果是权限相关的（jwt access token 过期）\n    if (exception instanceof UnauthorizedException) {\n      status = exception.getStatus()\n      errorCode = status\n      message = exception.message\n      errorStack = exception.stack\n    }\n\n    if (exception instanceof ZodValidationException) {\n      status = exception.getStatus()\n      errorCode = status\n      message = exception.message\n      errorExtra = (exception.getResponse() as any).errors\n    }\n\n    this.logger.error({\n      request: {\n        method: request.method,\n        url: request.url,\n        query: request.query,\n        body: request.body,\n      },\n      code: errorCode,\n      timestamp: new Date().toISOString(),\n      message: message,\n      extraInfo: errorExtra,\n      errorStack: errorStack,\n    })\n\n    response.status(status).json({\n      message: message,\n      extraInfo: errorExtra,\n      code: errorCode,\n      timestamp: new Date().toISOString(),\n    })\n  }\n}\n","import { advancedFormat, dayjs, timezone, utc } from '../legacy-libs'\n\ndayjs.extend(utc)\ndayjs.extend(timezone)\ndayjs.extend(advancedFormat)\n\nexport function getTimeExpire(min: number) {\n  const fmt = dayjs().tz('Asia/Shanghai').add(min, 'minute').format('YYYY-MM-DDTHH:mm:ss+z')\n  const ret = fmt.match(/.*(GMT\\+(\\d))/)\n  if (ret == null) {\n    return ''\n  } else {\n    return ret[0].replace(ret[1], ret[2].padStart(2, '0') + ':00')\n  }\n}\n\nexport function getTimeByDay(day: number): Date {\n  return dayjs().tz('Asia/Shanghai').add(day, 'day').toDate()\n}\n","export * from './isCuid.decorator'\n","import { cuid } from '../legacy-libs'\nimport { registerDecorator, ValidationOptions } from 'class-validator'\n\nexport function isCuid(validationOptions?: ValidationOptions) {\n  return function (object: any, propertyName: string) {\n    registerDecorator({\n      name: 'isCuid',\n      target: object.constructor,\n      propertyName: propertyName,\n      constraints: [],\n      options: validationOptions,\n      validator: {\n        validate(value: any) {\n          return cuid.isCuid(value)\n        },\n      },\n    })\n  }\n}\n","// export * from './lib/service.type'\nexport * from './lib/prisma.type'\nexport * from './lib/errors'\nexport * from './lib/plan.type'\n\nexport * from './interfaces/identity-provider/identityProvider.service'\n","export const IdentityProviderServiceSymbol = Symbol.for('IIdentityProviderService')\n\nexport interface IIdentity {\n  id: string\n  name: string\n  appId?: string\n  hashedPassword: string | null\n  hashedRefreshToken: string | null\n  recoveryCode: string | null\n  recoveryToken: string | null\n}\n\nexport interface IIdentityProviderService<T extends IIdentity> {\n  // Partial<T> 不行\n  find(query: any): Promise<T | null>\n\n  update(user: IIdentity): Promise<T>\n\n  create(user: Omit<IIdentity, 'id'>): Promise<T>\n}\n","/* eslint-disable @typescript-eslint/no-namespace */\nimport { CustomError } from '@flowda-projects/flowda-shared'\nexport namespace LicenseError {\n  export class InvalidLicense extends CustomError {\n    constructor() {\n      super(1001, 'Invalid license')\n    }\n  }\n\n  export class FreeLicenseLimitReached extends CustomError {\n    constructor() {\n      super(1002, '达到免费证书限额')\n    }\n  }\n}\n\nexport namespace OrderError {\n  export class NoProducts extends CustomError {\n    constructor() {\n      super(2001, 'No products')\n    }\n  }\n\n  export class InvokeTransactionsNativeException extends CustomError {\n    constructor() {\n      super(2002, '微信支付发起失败')\n    }\n  }\n\n  export class TransactionsNativeStatusNotOk extends CustomError {\n    constructor() {\n      super(2003, '微信支付(native)发起返回值 status!=200')\n    }\n  }\n\n  export class PayQueryStatusNotOk extends CustomError {\n    constructor(extra: any) {\n      super(2004, '微信支付查询 status!=200', extra)\n    }\n  }\n\n  export class PayQueryNoOrderFound extends CustomError {\n    constructor() {\n      super(2005, '微信支付查询未查询到关联订单')\n    }\n  }\n\n  export class CannotPayFreeIfPaid extends CustomError {\n    constructor() {\n      super(2006, '购买付费产品之后不能再购买免费产品')\n    }\n  }\n\n  export class CannotPayVIPIfPaid extends CustomError {\n    constructor() {\n      super(2007, '购买过付费产品后不能重复购买')\n    }\n  }\n\n  export class OrderCustomerIdNotMatch extends CustomError {\n    constructor() {\n      super(2008, '订单关联的买家ID和登录信息不一致')\n    }\n  }\n\n  export class DuplicateAnonymousCustomerToken extends CustomError {\n    constructor() {\n      super(2009, '请确认支付快捷创建是已支付状态')\n    }\n  }\n\n  export class TransactionsJSAPIStatusNotOk extends CustomError {\n    constructor() {\n      super(2010, '微信支付(JSAPI)发起返回值 status!=200')\n    }\n  }\n\n  export class PurchaseReactedRestrictedLimit extends CustomError {\n    constructor() {\n      super(2011, '限购产品超出购买次数')\n    }\n  }\n}\n\nexport namespace AuthenticationError {\n  export class AccountNameAlreadyExists extends CustomError {\n    constructor() {\n      super(3001, 'Account name already exists')\n    }\n  }\n\n  export class UserNamePasswordMismatch extends CustomError {\n    constructor() {\n      super(3002, 'Username and password mismatch')\n    }\n  }\n\n  export class AccountNotFound extends CustomError {\n    constructor() {\n      super(3003, 'Account not found')\n    }\n  }\n\n  /**\n   * 之前没有给 customer 做登录密码功能，所以 hashedPassword 为 null\n   * 可以先这样兼容，后续从产品流程上增加请注册流程\n   * 或者数据订正\n   */\n  export class NotInitPassword extends CustomError {\n    constructor() {\n      super(3004, 'Password not init')\n    }\n  }\n\n  export class InvalidToken extends CustomError {\n    constructor() {\n      super(3005, 'Invalid token')\n    }\n  }\n\n  /**\n   * 代表没有登录，就需要重新生成 refresh token\n   */\n  export class NullRefreshToken extends CustomError {\n    constructor() {\n      super(3006, 'null refresh token')\n    }\n  }\n\n  export class NoEmail extends CustomError {\n    constructor() {\n      super(3007, 'No email')\n    }\n  }\n\n  export class InvalidRecoveryCode extends CustomError {\n    constructor() {\n      super(3008, 'Wrong recovery code')\n    }\n  }\n\n  export class EmailAlreadyExists extends CustomError {\n    constructor() {\n      super(3009, 'Email already exists')\n    }\n  }\n\n  export class InvalidAppId extends CustomError {\n    constructor() {\n      super(3100, 'Customer info must contain a valid AppId')\n    }\n  }\n\n  export class InvalidTenant extends CustomError {\n    constructor() {\n      super(3101, 'Tenant info is not invalid')\n    }\n  }\n\n  export class WrongVerifyCode extends CustomError {\n    constructor() {\n      super(4004, 'wrong verify code')\n    }\n  }\n}\n\nexport namespace SdkError {\n  export class InitFailed extends CustomError {\n    constructor() {\n      super(4001, 'init failed')\n    }\n  }\n\n  export class NoPassword extends CustomError {\n    constructor() {\n      super(4002, 'No password')\n    }\n  }\n\n  export class NoEmail extends CustomError {\n    constructor() {\n      super(4003, 'No email')\n    }\n  }\n\n  export class WrongVerifyCode extends CustomError {\n    constructor() {\n      super(4004, 'wrong verify code')\n    }\n  }\n}\n\nexport namespace WXError {\n  export class FwhGetAccessTokenError extends CustomError {\n    constructor(extra: any) {\n      super(5001, '服务号获取 access token 失败', extra)\n    }\n  }\n\n  export class RecoveryNoOrderFound extends CustomError {\n    constructor() {\n      super(5002, '未查询到或者已经恢复了快捷创建的订单')\n    }\n  }\n}\n","export enum EPlan {\n  Free = 1,\n  VIP = 2,\n}\n","import * as db from '@prisma/client-v1-flowda'\n\ndeclare const denylist: readonly ['$connect', '$disconnect', '$on', '$transaction', '$use', '$extends']\nexport declare type ITXClientDenyList = typeof denylist[number]\n\nexport type PrismaTx = {\n  // tx: Omit<db.PrismaClient, '$connect' | '$disconnect' | '$on' | '$transaction' | '$use'>;\n  tx: Omit<db.PrismaClient, ITXClientDenyList>\n}\n","import { extendZodWithOpenApi } from '@anatine/zod-openapi'\nimport { z } from 'zod'\n\nextendZodWithOpenApi(z)\n\nexport * from './zod/index'\nexport * as zt from './zod/index'\n","import { z } from 'zod';\nimport { Prisma } from '@prisma/client-v1-flowda';\n\n/////////////////////////////////////////\n// HELPER FUNCTIONS\n/////////////////////////////////////////\n\n// JSON\n//------------------------------------------------------\n\nexport type NullableJsonInput = Prisma.JsonValue | null | 'JsonNull' | 'DbNull' | Prisma.NullTypes.DbNull | Prisma.NullTypes.JsonNull;\n\nexport const transformJsonNull = (v?: NullableJsonInput) => {\n  if (!v || v === 'DbNull') return Prisma.DbNull;\n  if (v === 'JsonNull') return Prisma.JsonNull;\n  return v;\n};\n\nexport const JsonValue: z.ZodType<Prisma.JsonValue> = z.union([\n  z.string(),\n  z.number(),\n  z.boolean(),\n  z.lazy(() => z.array(JsonValue)),\n  z.lazy(() => z.record(JsonValue)),\n]);\n\nexport type JsonValueType = z.infer<typeof JsonValue>;\n\nexport const NullableJsonValue = z\n  .union([JsonValue, z.literal('DbNull'), z.literal('JsonNull')])\n  .nullable()\n  .transform((v) => transformJsonNull(v));\n\nexport type NullableJsonValueType = z.infer<typeof NullableJsonValue>;\n\nexport const InputJsonValue: z.ZodType<Prisma.InputJsonValue> = z.union([\n  z.string(),\n  z.number(),\n  z.boolean(),\n  z.lazy(() => z.array(InputJsonValue.nullable())),\n  z.lazy(() => z.record(InputJsonValue.nullable())),\n]);\n\nexport type InputJsonValueType = z.infer<typeof InputJsonValue>;\n\n// DECIMAL\n//------------------------------------------------------\n\nexport const DecimalJSLikeSchema: z.ZodType<Prisma.DecimalJsLike> = z.object({ d: z.array(z.number()), e: z.number(), s: z.number(), toFixed: z.function().args().returns(z.string()), });\n\nexport const DecimalJSLikeListSchema: z.ZodType<Prisma.DecimalJsLike[]> = z.object({ d: z.array(z.number()), e: z.number(), s: z.number(), toFixed: z.function().args().returns(z.string()), }).array();\n\nexport const DECIMAL_STRING_REGEX = /^[0-9.,e+-bxffo_cp]+$|Infinity|NaN/;\n\nexport const isValidDecimalInput =\n  (v?: null | string | number | Prisma.DecimalJsLike): v is string | number | Prisma.DecimalJsLike => {\n    if (v === undefined || v === null) return false;\n    return (\n      (typeof v === 'object' && 'd' in v && 'e' in v && 's' in v && 'toFixed' in v) ||\n      (typeof v === 'string' && DECIMAL_STRING_REGEX.test(v)) ||\n      typeof v === 'number'\n    )\n  };\n\n/////////////////////////////////////////\n// ENUMS\n/////////////////////////////////////////\n\nexport const TransactionIsolationLevelSchema = z.enum(['ReadUncommitted','ReadCommitted','RepeatableRead','Serializable']);\n\nexport const AppScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','name','hashedAppToken','hashedPassword','hashedRefreshToken','recoveryCode','recoveryToken','displayName','description','isDeleted','tenantId']);\n\nexport const TenantScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','name','email','hashedPassword','hashedRefreshToken','recoveryCode','recoveryToken','role']);\n\nexport const TenantPreSignupScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','email','verifyCode']);\n\nexport const QuestionScalarFieldEnumSchema = z.enum(['id','uid','question','answer','success','createdAt','updatedAt']);\n\nexport const JYProfileScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','userId']);\n\nexport const JYFreeCountScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','cycle','count','profileId']);\n\nexport const ArticleScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','link','source','title','image','excerpt','profileId']);\n\nexport const ProductScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','name','price','productType','plan','amount','extendedDescriptionData','fileSize','storeDuration','hasAds','tecSupport','validityPeriod','appId','isDeleted','tenantId','restricted']);\n\nexport const PayScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','status','orderId','transactionId','tenantId']);\n\nexport const CustomerScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','name','appId','email','hashedPassword','hashedRefreshToken','recoveryCode','recoveryToken','isDeleted','tenantId']);\n\nexport const WeixinProfileScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','unionid','loginOpenid','headimgurl','nickname','sex','customerId','tenantId']);\n\nexport const ProfileScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','customerId','productType','plan','amount','expireAt','tenantId']);\n\nexport const CustomerPreSignupScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','email','verifyCode','appId','tenantId']);\n\nexport const LegacyProfileScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','customerId','license','refreshToken']);\n\nexport const ProductSnapshotScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','snapshotPrice','orderId','productId','tenantId']);\n\nexport const OrderScalarFieldEnumSchema = z.enum(['id','createdAt','updatedAt','serial','status','customerId','appId','isDeleted','tenantId']);\n\nexport const SortOrderSchema = z.enum(['asc','desc']);\n\nexport const NullableJsonNullValueInputSchema = z.enum(['DbNull','JsonNull',]).transform((v) => transformJsonNull(v));\n\nexport const NullsOrderSchema = z.enum(['first','last']);\n\nexport const JsonNullValueFilterSchema = z.enum(['DbNull','JsonNull','AnyNull',]);\n\nexport const OrderStatusSchema = z.enum(['INITIALIZED','PAY_ASSOCIATED','FREE_DEAL','CANCELED'])\n\nexport type OrderStatusType = `${z.infer<typeof OrderStatusSchema>}`\n\nexport const PayStatusSchema = z.enum(['UNPAIED','PAIED','REFUND'])\n\nexport type PayStatusType = `${z.infer<typeof PayStatusSchema>}`\n\nexport const ProductTypeSchema = z.enum(['AMOUNT','PLAN'])\n\nexport type ProductTypeType = `${z.infer<typeof ProductTypeSchema>}`\n\n/////////////////////////////////////////\n// MODELS\n/////////////////////////////////////////\n\n/////////////////////////////////////////\n// APP SCHEMA\n/////////////////////////////////////////\n\nexport const AppSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  name: z.string().openapi({\"title\":\"应用id\",\"access_type\":\"read_only\"}),\n  hashedAppToken: z.string().nullable(),\n  hashedPassword: z.string(),\n  hashedRefreshToken: z.string().nullable(),\n  recoveryCode: z.string().nullable(),\n  recoveryToken: z.string().nullable(),\n  displayName: z.string().openapi({\"title\":\"应用名\"}),\n  description: z.string().nullable().openapi({\"title\":\"应用描述\"}),\n  isDeleted: z.boolean().nullable(),\n  tenantId: z.string(),\n}).openapi({\"primary_key\":\"id\",\"searchable_columns\":\"name,displayName,description\",\"display_column\":\"displayName\",\"display_name\":\"应用\",\"display_primary_key\":\"true\"})\n\nexport type App = z.infer<typeof AppSchema>\n\n// APP RELATION SCHEMA\n//------------------------------------------------------\n\nexport type AppRelations = {\n  products: ProductWithRelations[];\n  customers: CustomerWithRelations[];\n  orders: OrderWithRelations[];\n};\n\nexport type AppWithRelations = z.infer<typeof AppSchema> & AppRelations\n\nexport const AppWithRelationsSchema: z.ZodObject<any> = AppSchema.merge(z.object({\n  products: z.lazy(() => ProductWithRelationsSchema).array().openapi({\"model_name\":\"Product\",\"foreign_key\":\"appId\",\"primary_key\":\"id\",\"title\":\"Products\"}),\n  customers: z.lazy(() => CustomerWithRelationsSchema).array().openapi({\"model_name\":\"Customer\",\"foreign_key\":\"appId\",\"primary_key\":\"id\",\"title\":\"Customers\"}),\n  orders: z.lazy(() => OrderWithRelationsSchema).array().openapi({\"model_name\":\"Order\",\"foreign_key\":\"appId\",\"primary_key\":\"id\",\"title\":\"Orders\"}),\n}))\n\n/////////////////////////////////////////\n// TENANT SCHEMA\n/////////////////////////////////////////\n\nexport const TenantSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  name: z.string(),\n  email: z.string(),\n  hashedPassword: z.string(),\n  hashedRefreshToken: z.string().nullable(),\n  recoveryCode: z.string().nullable(),\n  recoveryToken: z.string().nullable(),\n  role: z.string().nullable(),\n})\n\nexport type Tenant = z.infer<typeof TenantSchema>\n\n/////////////////////////////////////////\n// TENANT PRE SIGNUP SCHEMA\n/////////////////////////////////////////\n\nexport const TenantPreSignupSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  email: z.string(),\n  verifyCode: z.string(),\n})\n\nexport type TenantPreSignup = z.infer<typeof TenantPreSignupSchema>\n\n/////////////////////////////////////////\n// QUESTION SCHEMA\n/////////////////////////////////////////\n\nexport const QuestionSchema = z.object({\n  id: z.string().cuid(),\n  uid: z.string(),\n  question: z.string().nullable(),\n  answer: z.string().nullable(),\n  success: z.number().int(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n})\n\nexport type Question = z.infer<typeof QuestionSchema>\n\n/////////////////////////////////////////\n// JY PROFILE SCHEMA\n/////////////////////////////////////////\n\nexport const JYProfileSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  userId: z.string(),\n})\n\nexport type JYProfile = z.infer<typeof JYProfileSchema>\n\n// JY PROFILE RELATION SCHEMA\n//------------------------------------------------------\n\nexport type JYProfileRelations = {\n  articles: ArticleWithRelations[];\n  freeCounts: JYFreeCountWithRelations[];\n};\n\nexport type JYProfileWithRelations = z.infer<typeof JYProfileSchema> & JYProfileRelations\n\nexport const JYProfileWithRelationsSchema: z.ZodObject<any> = JYProfileSchema.merge(z.object({\n  articles: z.lazy(() => ArticleWithRelationsSchema).array(),\n  freeCounts: z.lazy(() => JYFreeCountWithRelationsSchema).array(),\n}))\n\n/////////////////////////////////////////\n// JY FREE COUNT SCHEMA\n/////////////////////////////////////////\n\nexport const JYFreeCountSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  cycle: z.number().int(),\n  count: z.number().int(),\n  profileId: z.string(),\n})\n\nexport type JYFreeCount = z.infer<typeof JYFreeCountSchema>\n\n// JY FREE COUNT RELATION SCHEMA\n//------------------------------------------------------\n\nexport type JYFreeCountRelations = {\n  profile: JYProfileWithRelations;\n};\n\nexport type JYFreeCountWithRelations = z.infer<typeof JYFreeCountSchema> & JYFreeCountRelations\n\nexport const JYFreeCountWithRelationsSchema: z.ZodObject<any> = JYFreeCountSchema.merge(z.object({\n  profile: z.lazy(() => JYProfileWithRelationsSchema),\n}))\n\n/////////////////////////////////////////\n// ARTICLE SCHEMA\n/////////////////////////////////////////\n\nexport const ArticleSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  link: z.string(),\n  source: z.string().nullable(),\n  title: z.string().nullable(),\n  image: z.string().nullable(),\n  excerpt: z.string().nullable(),\n  profileId: z.string(),\n})\n\nexport type Article = z.infer<typeof ArticleSchema>\n\n// ARTICLE RELATION SCHEMA\n//------------------------------------------------------\n\nexport type ArticleRelations = {\n  profile: JYProfileWithRelations;\n};\n\nexport type ArticleWithRelations = z.infer<typeof ArticleSchema> & ArticleRelations\n\nexport const ArticleWithRelationsSchema: z.ZodObject<any> = ArticleSchema.merge(z.object({\n  profile: z.lazy(() => JYProfileWithRelationsSchema),\n}))\n\n/////////////////////////////////////////\n// PRODUCT SCHEMA\n/////////////////////////////////////////\n\nexport const ProductSchema = z.object({\n  productType: ProductTypeSchema,\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  name: z.string().openapi({\"title\":\"产品名\"}),\n  /**\n   * @schema.override_type integer\n   */\n  price: z.union([z.number(),z.string(),DecimalJSLikeSchema,]).refine((v) => isValidDecimalInput(v), { message: \"Field 'price' must be a Decimal. Location: ['Models', 'Product']\",  }).openapi({\"title\":\"价格\",\"override_type\":\"integer\"}),\n  plan: z.number().int().nullable(),\n  amount: z.number().int().nullable().openapi({\"title\":\"额度\"}),\n  extendedDescriptionData: NullableJsonValue.optional(),\n  fileSize: z.string().nullable(),\n  storeDuration: z.number().int().nullable(),\n  hasAds: z.string().nullable().openapi({\"title\":\"广告\"}),\n  tecSupport: z.string().nullable().openapi({\"title\":\"技术支持\"}),\n  validityPeriod: z.number().int().nullable().openapi({\"title\":\"有效期/天\"}),\n  appId: z.string().openapi({\"access_type\":\"read_only\"}),\n  isDeleted: z.boolean().nullable(),\n  tenantId: z.string(),\n  restricted: z.number().int(),\n}).openapi({\"primary_key\":\"id\",\"searchable_columns\":\"id,name\",\"display_name\":\"产品\",\"display_column\":\"name\"})\n\nexport type Product = z.infer<typeof ProductSchema>\n\n// PRODUCT RELATION SCHEMA\n//------------------------------------------------------\n\nexport type ProductRelations = {\n  productSnapshots: ProductSnapshotWithRelations[];\n  app: AppWithRelations;\n};\n\nexport type ProductWithRelations = Omit<z.infer<typeof ProductSchema>, \"extendedDescriptionData\"> & {\n  extendedDescriptionData?: NullableJsonInput;\n} & ProductRelations\n\nexport const ProductWithRelationsSchema: z.ZodObject<any> = ProductSchema.merge(z.object({\n  productSnapshots: z.lazy(() => ProductSnapshotWithRelationsSchema).array().openapi({\"model_name\":\"ProductSnapshot\",\"foreign_key\":\"productId\",\"primary_key\":\"id\"}),\n  app: z.lazy(() => AppWithRelationsSchema).openapi({\"model_name\":\"App\",\"foreign_key\":\"appId\",\"primary_key\":\"id\"}),\n}))\n\n/////////////////////////////////////////\n// PAY SCHEMA\n/////////////////////////////////////////\n\nexport const PaySchema = z.object({\n  status: PayStatusSchema,\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  orderId: z.string(),\n  transactionId: z.string(),\n  tenantId: z.string(),\n})\n\nexport type Pay = z.infer<typeof PaySchema>\n\n// PAY RELATION SCHEMA\n//------------------------------------------------------\n\nexport type PayRelations = {\n  Order: OrderWithRelations;\n};\n\nexport type PayWithRelations = z.infer<typeof PaySchema> & PayRelations\n\nexport const PayWithRelationsSchema: z.ZodObject<any> = PaySchema.merge(z.object({\n  Order: z.lazy(() => OrderWithRelationsSchema),\n}))\n\n/////////////////////////////////////////\n// CUSTOMER SCHEMA\n/////////////////////////////////////////\n\nexport const CustomerSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  name: z.string().openapi({\"title\":\"用户名\"}),\n  appId: z.string().openapi({\"access_type\":\"read_only\"}),\n  email: z.string().nullable().openapi({\"title\":\"邮箱\"}),\n  hashedPassword: z.string().nullable(),\n  hashedRefreshToken: z.string().nullable(),\n  recoveryCode: z.string().nullable(),\n  recoveryToken: z.string().nullable(),\n  isDeleted: z.boolean().nullable(),\n  tenantId: z.string(),\n}).openapi({\"primary_key\":\"id\",\"display_name\":\"用户\",\"display_column\":\"name\"})\n\nexport type Customer = z.infer<typeof CustomerSchema>\n\n// CUSTOMER RELATION SCHEMA\n//------------------------------------------------------\n\nexport type CustomerRelations = {\n  app: AppWithRelations;\n  orders: OrderWithRelations[];\n  legacyProfile?: LegacyProfileWithRelations | null;\n  profile?: ProfileWithRelations | null;\n  weixinProfile?: WeixinProfileWithRelations | null;\n};\n\nexport type CustomerWithRelations = z.infer<typeof CustomerSchema> & CustomerRelations\n\nexport const CustomerWithRelationsSchema: z.ZodObject<any> = CustomerSchema.merge(z.object({\n  app: z.lazy(() => AppWithRelationsSchema),\n  orders: z.lazy(() => OrderWithRelationsSchema).array().openapi({\"model_name\":\"Order\",\"foreign_key\":\"customerId\",\"primary_key\":\"id\",\"title\":\"Orders\"}),\n  legacyProfile: z.lazy(() => LegacyProfileWithRelationsSchema).nullable(),\n  profile: z.lazy(() => ProfileWithRelationsSchema).nullable().openapi({\"reference\":\"Profile\"}),\n  weixinProfile: z.lazy(() => WeixinProfileWithRelationsSchema).nullable().openapi({\"reference\":\"WeixinProfile\"}),\n}))\n\n/////////////////////////////////////////\n// WEIXIN PROFILE SCHEMA\n/////////////////////////////////////////\n\nexport const WeixinProfileSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  unionid: z.string().nullable(),\n  loginOpenid: z.string(),\n  headimgurl: z.string(),\n  nickname: z.string(),\n  sex: z.number().int(),\n  customerId: z.string().nullable(),\n  tenantId: z.string(),\n}).openapi({\"primary_key\":\"id\",\"display_name\":\"微信用户信息\",\"display_column\":\"nickname\"})\n\nexport type WeixinProfile = z.infer<typeof WeixinProfileSchema>\n\n// WEIXIN PROFILE RELATION SCHEMA\n//------------------------------------------------------\n\nexport type WeixinProfileRelations = {\n  customer?: CustomerWithRelations | null;\n};\n\nexport type WeixinProfileWithRelations = z.infer<typeof WeixinProfileSchema> & WeixinProfileRelations\n\nexport const WeixinProfileWithRelationsSchema: z.ZodObject<any> = WeixinProfileSchema.merge(z.object({\n  customer: z.lazy(() => CustomerWithRelationsSchema).nullable(),\n}))\n\n/////////////////////////////////////////\n// PROFILE SCHEMA\n/////////////////////////////////////////\n\nexport const ProfileSchema = z.object({\n  productType: ProductTypeSchema,\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  customerId: z.string(),\n  plan: z.number().int().nullable(),\n  amount: z.number().int().nullable(),\n  expireAt: z.date().nullable(),\n  tenantId: z.string(),\n}).openapi({\"primary_key\":\"id\",\"display_name\":\"用户信息\",\"display_column\":\"productType\"})\n\nexport type Profile = z.infer<typeof ProfileSchema>\n\n// PROFILE RELATION SCHEMA\n//------------------------------------------------------\n\nexport type ProfileRelations = {\n  customer: CustomerWithRelations;\n};\n\nexport type ProfileWithRelations = z.infer<typeof ProfileSchema> & ProfileRelations\n\nexport const ProfileWithRelationsSchema: z.ZodObject<any> = ProfileSchema.merge(z.object({\n  customer: z.lazy(() => CustomerWithRelationsSchema),\n}))\n\n/////////////////////////////////////////\n// CUSTOMER PRE SIGNUP SCHEMA\n/////////////////////////////////////////\n\nexport const customerPreSignupSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  email: z.string(),\n  verifyCode: z.string(),\n  appId: z.string(),\n  tenantId: z.string(),\n})\n\nexport type customerPreSignup = z.infer<typeof customerPreSignupSchema>\n\n/////////////////////////////////////////\n// LEGACY PROFILE SCHEMA\n/////////////////////////////////////////\n\nexport const LegacyProfileSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  customerId: z.string(),\n  license: z.string(),\n  refreshToken: z.string(),\n})\n\nexport type LegacyProfile = z.infer<typeof LegacyProfileSchema>\n\n// LEGACY PROFILE RELATION SCHEMA\n//------------------------------------------------------\n\nexport type LegacyProfileRelations = {\n  customer: CustomerWithRelations;\n};\n\nexport type LegacyProfileWithRelations = z.infer<typeof LegacyProfileSchema> & LegacyProfileRelations\n\nexport const LegacyProfileWithRelationsSchema: z.ZodObject<any> = LegacyProfileSchema.merge(z.object({\n  customer: z.lazy(() => CustomerWithRelationsSchema),\n}))\n\n/////////////////////////////////////////\n// PRODUCT SNAPSHOT SCHEMA\n/////////////////////////////////////////\n\nexport const ProductSnapshotSchema = z.object({\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  snapshotPrice: z.union([z.number(),z.string(),DecimalJSLikeSchema,]).refine((v) => isValidDecimalInput(v), { message: \"Field 'snapshotPrice' must be a Decimal. Location: ['Models', 'ProductSnapshot']\",  }),\n  orderId: z.string(),\n  productId: z.string(),\n  tenantId: z.string(),\n})\n\nexport type ProductSnapshot = z.infer<typeof ProductSnapshotSchema>\n\n// PRODUCT SNAPSHOT RELATION SCHEMA\n//------------------------------------------------------\n\nexport type ProductSnapshotRelations = {\n  order: OrderWithRelations;\n  product: ProductWithRelations;\n};\n\nexport type ProductSnapshotWithRelations = z.infer<typeof ProductSnapshotSchema> & ProductSnapshotRelations\n\nexport const ProductSnapshotWithRelationsSchema: z.ZodObject<any> = ProductSnapshotSchema.merge(z.object({\n  order: z.lazy(() => OrderWithRelationsSchema),\n  product: z.lazy(() => ProductWithRelationsSchema),\n}))\n\n/////////////////////////////////////////\n// ORDER SCHEMA\n/////////////////////////////////////////\n\nexport const OrderSchema = z.object({\n  status: OrderStatusSchema,\n  id: z.string().cuid(),\n  createdAt: z.date(),\n  updatedAt: z.date(),\n  serial: z.number().int(),\n  customerId: z.string().openapi({\"reference\":\"Customer\"}),\n  appId: z.string(),\n  isDeleted: z.boolean().nullable(),\n  tenantId: z.string(),\n}).openapi({\"primary_key\":\"id\",\"display_name\":\"订单\",\"display_primary_key\":\"true\"})\n\nexport type Order = z.infer<typeof OrderSchema>\n\n// ORDER RELATION SCHEMA\n//------------------------------------------------------\n\nexport type OrderRelations = {\n  customer: CustomerWithRelations;\n  pay?: PayWithRelations | null;\n  productSnapshots: ProductSnapshotWithRelations[];\n  App: AppWithRelations;\n};\n\nexport type OrderWithRelations = z.infer<typeof OrderSchema> & OrderRelations\n\nexport const OrderWithRelationsSchema: z.ZodObject<any> = OrderSchema.merge(z.object({\n  customer: z.lazy(() => CustomerWithRelationsSchema),\n  pay: z.lazy(() => PayWithRelationsSchema).nullable(),\n  productSnapshots: z.lazy(() => ProductSnapshotWithRelationsSchema).array(),\n  App: z.lazy(() => AppWithRelationsSchema),\n}))\n","module.exports = require(\"@anatine/zod-openapi\");","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/passport\");","module.exports = require(\"@nestjs/swagger\");","module.exports = require(\"@prisma/client-v1-flowda\");","module.exports = require(\"@trpc/client\");","module.exports = require(\"axios\");","module.exports = require(\"bcrypt\");","module.exports = require(\"class-validator\");","module.exports = require(\"class-validator-jsonschema\");","module.exports = require(\"cos-nodejs-sdk-v5\");","module.exports = require(\"cuid\");","module.exports = require(\"dayjs\");","module.exports = require(\"dayjs/plugin/advancedFormat\");","module.exports = require(\"dayjs/plugin/timezone\");","module.exports = require(\"dayjs/plugin/utc\");","module.exports = require(\"dotenv\");","module.exports = require(\"envalid\");","module.exports = require(\"inversify\");","module.exports = require(\"jsonwebtoken\");","module.exports = require(\"keymachine\");","module.exports = require(\"lodash\");","module.exports = require(\"nestjs-zod\");","module.exports = require(\"nodemailer\");","module.exports = require(\"passport-custom\");","module.exports = require(\"passport-jwt\");","module.exports = require(\"passport-local\");","module.exports = require(\"pluralize\");","module.exports = require(\"radash\");","module.exports = require(\"rxjs/operators\");","module.exports = require(\"tslib\");","module.exports = require(\"wechat-oauth\");","module.exports = require(\"wechatpay-node-v3\");","module.exports = require(\"zod\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/main.ts\");\n",""],"names":[],"sourceRoot":""}